var _1=Object.defineProperty;var x1=(t,e,n)=>e in t?_1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var At=(t,e,n)=>x1(t,typeof e!="symbol"?e+"":e,n);function S1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var or=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function ra(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function nc(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var wg={exports:{}},rc={},vg={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sa=Symbol.for("react.element"),E1=Symbol.for("react.portal"),k1=Symbol.for("react.fragment"),A1=Symbol.for("react.strict_mode"),R1=Symbol.for("react.profiler"),C1=Symbol.for("react.provider"),I1=Symbol.for("react.context"),T1=Symbol.for("react.forward_ref"),B1=Symbol.for("react.suspense"),j1=Symbol.for("react.memo"),N1=Symbol.for("react.lazy"),tp=Symbol.iterator;function P1(t){return t===null||typeof t!="object"?null:(t=tp&&t[tp]||t["@@iterator"],typeof t=="function"?t:null)}var bg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_g=Object.assign,xg={};function Yi(t,e,n){this.props=t,this.context=e,this.refs=xg,this.updater=n||bg}Yi.prototype.isReactComponent={};Yi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Yi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Sg(){}Sg.prototype=Yi.prototype;function yh(t,e,n){this.props=t,this.context=e,this.refs=xg,this.updater=n||bg}var wh=yh.prototype=new Sg;wh.constructor=yh;_g(wh,Yi.prototype);wh.isPureReactComponent=!0;var np=Array.isArray,Eg=Object.prototype.hasOwnProperty,vh={current:null},kg={key:!0,ref:!0,__self:!0,__source:!0};function Ag(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Eg.call(e,r)&&!kg.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:sa,type:t,key:i,ref:o,props:s,_owner:vh.current}}function O1(t,e){return{$$typeof:sa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function bh(t){return typeof t=="object"&&t!==null&&t.$$typeof===sa}function M1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var rp=/\/+/g;function Zc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?M1(""+t.key):e.toString(36)}function el(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case sa:case E1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Zc(o,0):r,np(s)?(n="",t!=null&&(n=t.replace(rp,"$&/")+"/"),el(s,e,n,"",function(c){return c})):s!=null&&(bh(s)&&(s=O1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(rp,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",np(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Zc(i,a);o+=el(i,e,n,l,s)}else if(l=P1(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Zc(i,a++),o+=el(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ba(t,e,n){if(t==null)return t;var r=[],s=0;return el(t,r,"","",function(i){return e.call(n,i,s++)}),r}function L1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var cn={current:null},tl={transition:null},U1={ReactCurrentDispatcher:cn,ReactCurrentBatchConfig:tl,ReactCurrentOwner:vh};function Rg(){throw Error("act(...) is not supported in production builds of React.")}ke.Children={map:ba,forEach:function(t,e,n){ba(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ba(t,function(){e++}),e},toArray:function(t){return ba(t,function(e){return e})||[]},only:function(t){if(!bh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ke.Component=Yi;ke.Fragment=k1;ke.Profiler=R1;ke.PureComponent=yh;ke.StrictMode=A1;ke.Suspense=B1;ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U1;ke.act=Rg;ke.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=_g({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=vh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Eg.call(e,l)&&!kg.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:sa,type:t.type,key:s,ref:i,props:r,_owner:o}};ke.createContext=function(t){return t={$$typeof:I1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:C1,_context:t},t.Consumer=t};ke.createElement=Ag;ke.createFactory=function(t){var e=Ag.bind(null,t);return e.type=t,e};ke.createRef=function(){return{current:null}};ke.forwardRef=function(t){return{$$typeof:T1,render:t}};ke.isValidElement=bh;ke.lazy=function(t){return{$$typeof:N1,_payload:{_status:-1,_result:t},_init:L1}};ke.memo=function(t,e){return{$$typeof:j1,type:t,compare:e===void 0?null:e}};ke.startTransition=function(t){var e=tl.transition;tl.transition={};try{t()}finally{tl.transition=e}};ke.unstable_act=Rg;ke.useCallback=function(t,e){return cn.current.useCallback(t,e)};ke.useContext=function(t){return cn.current.useContext(t)};ke.useDebugValue=function(){};ke.useDeferredValue=function(t){return cn.current.useDeferredValue(t)};ke.useEffect=function(t,e){return cn.current.useEffect(t,e)};ke.useId=function(){return cn.current.useId()};ke.useImperativeHandle=function(t,e,n){return cn.current.useImperativeHandle(t,e,n)};ke.useInsertionEffect=function(t,e){return cn.current.useInsertionEffect(t,e)};ke.useLayoutEffect=function(t,e){return cn.current.useLayoutEffect(t,e)};ke.useMemo=function(t,e){return cn.current.useMemo(t,e)};ke.useReducer=function(t,e,n){return cn.current.useReducer(t,e,n)};ke.useRef=function(t){return cn.current.useRef(t)};ke.useState=function(t){return cn.current.useState(t)};ke.useSyncExternalStore=function(t,e,n){return cn.current.useSyncExternalStore(t,e,n)};ke.useTransition=function(){return cn.current.useTransition()};ke.version="18.3.1";vg.exports=ke;var G=vg.exports;const D1=ra(G);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F1=G,$1=Symbol.for("react.element"),z1=Symbol.for("react.fragment"),q1=Object.prototype.hasOwnProperty,W1=F1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,V1={key:!0,ref:!0,__self:!0,__source:!0};function Cg(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)q1.call(e,r)&&!V1.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:$1,type:t,key:i,ref:o,props:s,_owner:W1.current}}rc.Fragment=z1;rc.jsx=Cg;rc.jsxs=Cg;wg.exports=rc;var p=wg.exports,ed={},Ig={exports:{}},Rn={},Tg={exports:{}},Bg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(I,P){var N=I.length;I.push(P);e:for(;0<N;){var R=N-1>>>1,h=I[R];if(0<s(h,P))I[R]=P,I[N]=h,N=R;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var P=I[0],N=I.pop();if(N!==P){I[0]=N;e:for(var R=0,h=I.length,M=h>>>1;R<M;){var ee=2*(R+1)-1,X=I[ee],re=ee+1,ve=I[re];if(0>s(X,N))re<h&&0>s(ve,X)?(I[R]=ve,I[re]=N,R=re):(I[R]=X,I[ee]=N,R=ee);else if(re<h&&0>s(ve,N))I[R]=ve,I[re]=N,R=re;else break e}}return P}function s(I,P){var N=I.sortIndex-P.sortIndex;return N!==0?N:I.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],f=1,v=null,w=3,g=!1,_=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(I){for(var P=n(c);P!==null;){if(P.callback===null)r(c);else if(P.startTime<=I)r(c),P.sortIndex=P.expirationTime,e(l,P);else break;P=n(c)}}function O(I){if(E=!1,x(I),!_)if(n(l)!==null)_=!0,k(L);else{var P=n(c);P!==null&&B(O,P.startTime-I)}}function L(I,P){_=!1,E&&(E=!1,b(q),q=-1),g=!0;var N=w;try{for(x(P),v=n(l);v!==null&&(!(v.expirationTime>P)||I&&!Y());){var R=v.callback;if(typeof R=="function"){v.callback=null,w=v.priorityLevel;var h=R(v.expirationTime<=P);P=t.unstable_now(),typeof h=="function"?v.callback=h:v===n(l)&&r(l),x(P)}else r(l);v=n(l)}if(v!==null)var M=!0;else{var ee=n(c);ee!==null&&B(O,ee.startTime-P),M=!1}return M}finally{v=null,w=N,g=!1}}var D=!1,W=null,q=-1,F=5,K=-1;function Y(){return!(t.unstable_now()-K<F)}function te(){if(W!==null){var I=t.unstable_now();K=I;var P=!0;try{P=W(!0,I)}finally{P?T():(D=!1,W=null)}}else D=!1}var T;if(typeof S=="function")T=function(){S(te)};else if(typeof MessageChannel<"u"){var u=new MessageChannel,m=u.port2;u.port1.onmessage=te,T=function(){m.postMessage(null)}}else T=function(){C(te,0)};function k(I){W=I,D||(D=!0,T())}function B(I,P){q=C(function(){I(t.unstable_now())},P)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_continueExecution=function(){_||g||(_=!0,k(L))},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(I){switch(w){case 1:case 2:case 3:var P=3;break;default:P=w}var N=w;w=P;try{return I()}finally{w=N}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(I,P){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var N=w;w=I;try{return P()}finally{w=N}},t.unstable_scheduleCallback=function(I,P,N){var R=t.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?R+N:R):N=R,I){case 1:var h=-1;break;case 2:h=250;break;case 5:h=1073741823;break;case 4:h=1e4;break;default:h=5e3}return h=N+h,I={id:f++,callback:P,priorityLevel:I,startTime:N,expirationTime:h,sortIndex:-1},N>R?(I.sortIndex=N,e(c,I),n(l)===null&&I===n(c)&&(E?(b(q),q=-1):E=!0,B(O,N-R))):(I.sortIndex=h,e(l,I),_||g||(_=!0,k(L))),I},t.unstable_shouldYield=Y,t.unstable_wrapCallback=function(I){var P=w;return function(){var N=w;w=P;try{return I.apply(this,arguments)}finally{w=N}}}})(Bg);Tg.exports=Bg;var H1=Tg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K1=G,An=H1;function Z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jg=new Set,No={};function Ws(t,e){Ui(t,e),Ui(t+"Capture",e)}function Ui(t,e){for(No[t]=e,t=0;t<e.length;t++)jg.add(e[t])}var Nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),td=Object.prototype.hasOwnProperty,G1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sp={},ip={};function J1(t){return td.call(ip,t)?!0:td.call(sp,t)?!1:G1.test(t)?ip[t]=!0:(sp[t]=!0,!1)}function Y1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Z1(t,e,n,r){if(e===null||typeof e>"u"||Y1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function un(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ht[t]=new un(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ht[e]=new un(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ht[t]=new un(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ht[t]=new un(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ht[t]=new un(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ht[t]=new un(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ht[t]=new un(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ht[t]=new un(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ht[t]=new un(t,5,!1,t.toLowerCase(),null,!1,!1)});var _h=/[\-:]([a-z])/g;function xh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(_h,xh);Ht[e]=new un(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(_h,xh);Ht[e]=new un(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(_h,xh);Ht[e]=new un(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ht[t]=new un(t,1,!1,t.toLowerCase(),null,!1,!1)});Ht.xlinkHref=new un("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ht[t]=new un(t,1,!1,t.toLowerCase(),null,!0,!0)});function Sh(t,e,n,r){var s=Ht.hasOwnProperty(e)?Ht[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Z1(e,n,s,r)&&(n=null),r||s===null?J1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Lr=K1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_a=Symbol.for("react.element"),pi=Symbol.for("react.portal"),gi=Symbol.for("react.fragment"),Eh=Symbol.for("react.strict_mode"),nd=Symbol.for("react.profiler"),Ng=Symbol.for("react.provider"),Pg=Symbol.for("react.context"),kh=Symbol.for("react.forward_ref"),rd=Symbol.for("react.suspense"),sd=Symbol.for("react.suspense_list"),Ah=Symbol.for("react.memo"),Hr=Symbol.for("react.lazy"),Og=Symbol.for("react.offscreen"),op=Symbol.iterator;function oo(t){return t===null||typeof t!="object"?null:(t=op&&t[op]||t["@@iterator"],typeof t=="function"?t:null)}var Ze=Object.assign,Xc;function mo(t){if(Xc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Xc=e&&e[1]||""}return`
`+Xc+t}var Qc=!1;function eu(t,e){if(!t||Qc)return"";Qc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Qc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?mo(t):""}function X1(t){switch(t.tag){case 5:return mo(t.type);case 16:return mo("Lazy");case 13:return mo("Suspense");case 19:return mo("SuspenseList");case 0:case 2:case 15:return t=eu(t.type,!1),t;case 11:return t=eu(t.type.render,!1),t;case 1:return t=eu(t.type,!0),t;default:return""}}function id(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case gi:return"Fragment";case pi:return"Portal";case nd:return"Profiler";case Eh:return"StrictMode";case rd:return"Suspense";case sd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Pg:return(t.displayName||"Context")+".Consumer";case Ng:return(t._context.displayName||"Context")+".Provider";case kh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ah:return e=t.displayName||null,e!==null?e:id(t.type)||"Memo";case Hr:e=t._payload,t=t._init;try{return id(t(e))}catch{}}return null}function Q1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return id(e);case 8:return e===Eh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function us(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Mg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function eb(t){var e=Mg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xa(t){t._valueTracker||(t._valueTracker=eb(t))}function Lg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Mg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function fl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function od(t,e){var n=e.checked;return Ze({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ap(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=us(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ug(t,e){e=e.checked,e!=null&&Sh(t,"checked",e,!1)}function ad(t,e){Ug(t,e);var n=us(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ld(t,e.type,n):e.hasOwnProperty("defaultValue")&&ld(t,e.type,us(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function lp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ld(t,e,n){(e!=="number"||fl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var yo=Array.isArray;function Ci(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+us(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function cd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Z(91));return Ze({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function cp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Z(92));if(yo(n)){if(1<n.length)throw Error(Z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:us(n)}}function Dg(t,e){var n=us(e.value),r=us(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function up(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Fg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ud(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Fg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Sa,$g=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Sa=Sa||document.createElement("div"),Sa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Sa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Po(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var xo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tb=["Webkit","ms","Moz","O"];Object.keys(xo).forEach(function(t){tb.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),xo[e]=xo[t]})});function zg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||xo.hasOwnProperty(t)&&xo[t]?(""+e).trim():e+"px"}function qg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=zg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var nb=Ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dd(t,e){if(e){if(nb[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Z(62))}}function hd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fd=null;function Rh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var pd=null,Ii=null,Ti=null;function dp(t){if(t=aa(t)){if(typeof pd!="function")throw Error(Z(280));var e=t.stateNode;e&&(e=lc(e),pd(t.stateNode,t.type,e))}}function Wg(t){Ii?Ti?Ti.push(t):Ti=[t]:Ii=t}function Vg(){if(Ii){var t=Ii,e=Ti;if(Ti=Ii=null,dp(t),e)for(t=0;t<e.length;t++)dp(e[t])}}function Hg(t,e){return t(e)}function Kg(){}var tu=!1;function Gg(t,e,n){if(tu)return t(e,n);tu=!0;try{return Hg(t,e,n)}finally{tu=!1,(Ii!==null||Ti!==null)&&(Kg(),Vg())}}function Oo(t,e){var n=t.stateNode;if(n===null)return null;var r=lc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Z(231,e,typeof n));return n}var gd=!1;if(Nr)try{var ao={};Object.defineProperty(ao,"passive",{get:function(){gd=!0}}),window.addEventListener("test",ao,ao),window.removeEventListener("test",ao,ao)}catch{gd=!1}function rb(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(f){this.onError(f)}}var So=!1,pl=null,gl=!1,md=null,sb={onError:function(t){So=!0,pl=t}};function ib(t,e,n,r,s,i,o,a,l){So=!1,pl=null,rb.apply(sb,arguments)}function ob(t,e,n,r,s,i,o,a,l){if(ib.apply(this,arguments),So){if(So){var c=pl;So=!1,pl=null}else throw Error(Z(198));gl||(gl=!0,md=c)}}function Vs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Jg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function hp(t){if(Vs(t)!==t)throw Error(Z(188))}function ab(t){var e=t.alternate;if(!e){if(e=Vs(t),e===null)throw Error(Z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return hp(s),t;if(i===r)return hp(s),e;i=i.sibling}throw Error(Z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(Z(189))}}if(n.alternate!==r)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?t:e}function Yg(t){return t=ab(t),t!==null?Zg(t):null}function Zg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Zg(t);if(e!==null)return e;t=t.sibling}return null}var Xg=An.unstable_scheduleCallback,fp=An.unstable_cancelCallback,lb=An.unstable_shouldYield,cb=An.unstable_requestPaint,lt=An.unstable_now,ub=An.unstable_getCurrentPriorityLevel,Ch=An.unstable_ImmediatePriority,Qg=An.unstable_UserBlockingPriority,ml=An.unstable_NormalPriority,db=An.unstable_LowPriority,em=An.unstable_IdlePriority,sc=null,gr=null;function hb(t){if(gr&&typeof gr.onCommitFiberRoot=="function")try{gr.onCommitFiberRoot(sc,t,void 0,(t.current.flags&128)===128)}catch{}}var rr=Math.clz32?Math.clz32:gb,fb=Math.log,pb=Math.LN2;function gb(t){return t>>>=0,t===0?32:31-(fb(t)/pb|0)|0}var Ea=64,ka=4194304;function wo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function yl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=wo(a):(i&=o,i!==0&&(r=wo(i)))}else o=n&~s,o!==0?r=wo(o):i!==0&&(r=wo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-rr(e),s=1<<n,r|=t[n],e&=~s;return r}function mb(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yb(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-rr(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=mb(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function yd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function tm(){var t=Ea;return Ea<<=1,!(Ea&4194240)&&(Ea=64),t}function nu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ia(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-rr(e),t[e]=n}function wb(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-rr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Ih(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-rr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ie=0;function nm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var rm,Th,sm,im,om,wd=!1,Aa=[],ts=null,ns=null,rs=null,Mo=new Map,Lo=new Map,Gr=[],vb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pp(t,e){switch(t){case"focusin":case"focusout":ts=null;break;case"dragenter":case"dragleave":ns=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":Mo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lo.delete(e.pointerId)}}function lo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=aa(e),e!==null&&Th(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function bb(t,e,n,r,s){switch(e){case"focusin":return ts=lo(ts,t,e,n,r,s),!0;case"dragenter":return ns=lo(ns,t,e,n,r,s),!0;case"mouseover":return rs=lo(rs,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Mo.set(i,lo(Mo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Lo.set(i,lo(Lo.get(i)||null,t,e,n,r,s)),!0}return!1}function am(t){var e=Rs(t.target);if(e!==null){var n=Vs(e);if(n!==null){if(e=n.tag,e===13){if(e=Jg(n),e!==null){t.blockedOn=e,om(t.priority,function(){sm(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function nl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=vd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);fd=r,n.target.dispatchEvent(r),fd=null}else return e=aa(n),e!==null&&Th(e),t.blockedOn=n,!1;e.shift()}return!0}function gp(t,e,n){nl(t)&&n.delete(e)}function _b(){wd=!1,ts!==null&&nl(ts)&&(ts=null),ns!==null&&nl(ns)&&(ns=null),rs!==null&&nl(rs)&&(rs=null),Mo.forEach(gp),Lo.forEach(gp)}function co(t,e){t.blockedOn===e&&(t.blockedOn=null,wd||(wd=!0,An.unstable_scheduleCallback(An.unstable_NormalPriority,_b)))}function Uo(t){function e(s){return co(s,t)}if(0<Aa.length){co(Aa[0],t);for(var n=1;n<Aa.length;n++){var r=Aa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ts!==null&&co(ts,t),ns!==null&&co(ns,t),rs!==null&&co(rs,t),Mo.forEach(e),Lo.forEach(e),n=0;n<Gr.length;n++)r=Gr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Gr.length&&(n=Gr[0],n.blockedOn===null);)am(n),n.blockedOn===null&&Gr.shift()}var Bi=Lr.ReactCurrentBatchConfig,wl=!0;function xb(t,e,n,r){var s=Ie,i=Bi.transition;Bi.transition=null;try{Ie=1,Bh(t,e,n,r)}finally{Ie=s,Bi.transition=i}}function Sb(t,e,n,r){var s=Ie,i=Bi.transition;Bi.transition=null;try{Ie=4,Bh(t,e,n,r)}finally{Ie=s,Bi.transition=i}}function Bh(t,e,n,r){if(wl){var s=vd(t,e,n,r);if(s===null)hu(t,e,r,vl,n),pp(t,r);else if(bb(s,t,e,n,r))r.stopPropagation();else if(pp(t,r),e&4&&-1<vb.indexOf(t)){for(;s!==null;){var i=aa(s);if(i!==null&&rm(i),i=vd(t,e,n,r),i===null&&hu(t,e,r,vl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else hu(t,e,r,null,n)}}var vl=null;function vd(t,e,n,r){if(vl=null,t=Rh(r),t=Rs(t),t!==null)if(e=Vs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Jg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return vl=t,null}function lm(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ub()){case Ch:return 1;case Qg:return 4;case ml:case db:return 16;case em:return 536870912;default:return 16}default:return 16}}var Zr=null,jh=null,rl=null;function cm(){if(rl)return rl;var t,e=jh,n=e.length,r,s="value"in Zr?Zr.value:Zr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return rl=s.slice(t,1<r?1-r:void 0)}function sl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ra(){return!0}function mp(){return!1}function Cn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ra:mp,this.isPropagationStopped=mp,this}return Ze(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ra)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ra)},persist:function(){},isPersistent:Ra}),e}var Zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nh=Cn(Zi),oa=Ze({},Zi,{view:0,detail:0}),Eb=Cn(oa),ru,su,uo,ic=Ze({},oa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ph,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==uo&&(uo&&t.type==="mousemove"?(ru=t.screenX-uo.screenX,su=t.screenY-uo.screenY):su=ru=0,uo=t),ru)},movementY:function(t){return"movementY"in t?t.movementY:su}}),yp=Cn(ic),kb=Ze({},ic,{dataTransfer:0}),Ab=Cn(kb),Rb=Ze({},oa,{relatedTarget:0}),iu=Cn(Rb),Cb=Ze({},Zi,{animationName:0,elapsedTime:0,pseudoElement:0}),Ib=Cn(Cb),Tb=Ze({},Zi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Bb=Cn(Tb),jb=Ze({},Zi,{data:0}),wp=Cn(jb),Nb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ob={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mb(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ob[t])?!!e[t]:!1}function Ph(){return Mb}var Lb=Ze({},oa,{key:function(t){if(t.key){var e=Nb[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=sl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Pb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ph,charCode:function(t){return t.type==="keypress"?sl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?sl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ub=Cn(Lb),Db=Ze({},ic,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vp=Cn(Db),Fb=Ze({},oa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ph}),$b=Cn(Fb),zb=Ze({},Zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),qb=Cn(zb),Wb=Ze({},ic,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Vb=Cn(Wb),Hb=[9,13,27,32],Oh=Nr&&"CompositionEvent"in window,Eo=null;Nr&&"documentMode"in document&&(Eo=document.documentMode);var Kb=Nr&&"TextEvent"in window&&!Eo,um=Nr&&(!Oh||Eo&&8<Eo&&11>=Eo),bp=" ",_p=!1;function dm(t,e){switch(t){case"keyup":return Hb.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var mi=!1;function Gb(t,e){switch(t){case"compositionend":return hm(e);case"keypress":return e.which!==32?null:(_p=!0,bp);case"textInput":return t=e.data,t===bp&&_p?null:t;default:return null}}function Jb(t,e){if(mi)return t==="compositionend"||!Oh&&dm(t,e)?(t=cm(),rl=jh=Zr=null,mi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return um&&e.locale!=="ko"?null:e.data;default:return null}}var Yb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Yb[t.type]:e==="textarea"}function fm(t,e,n,r){Wg(r),e=bl(e,"onChange"),0<e.length&&(n=new Nh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ko=null,Do=null;function Zb(t){Em(t,0)}function oc(t){var e=vi(t);if(Lg(e))return t}function Xb(t,e){if(t==="change")return e}var pm=!1;if(Nr){var ou;if(Nr){var au="oninput"in document;if(!au){var Sp=document.createElement("div");Sp.setAttribute("oninput","return;"),au=typeof Sp.oninput=="function"}ou=au}else ou=!1;pm=ou&&(!document.documentMode||9<document.documentMode)}function Ep(){ko&&(ko.detachEvent("onpropertychange",gm),Do=ko=null)}function gm(t){if(t.propertyName==="value"&&oc(Do)){var e=[];fm(e,Do,t,Rh(t)),Gg(Zb,e)}}function Qb(t,e,n){t==="focusin"?(Ep(),ko=e,Do=n,ko.attachEvent("onpropertychange",gm)):t==="focusout"&&Ep()}function e_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return oc(Do)}function t_(t,e){if(t==="click")return oc(e)}function n_(t,e){if(t==="input"||t==="change")return oc(e)}function r_(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ar=typeof Object.is=="function"?Object.is:r_;function Fo(t,e){if(ar(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!td.call(e,s)||!ar(t[s],e[s]))return!1}return!0}function kp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ap(t,e){var n=kp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=kp(n)}}function mm(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?mm(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ym(){for(var t=window,e=fl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=fl(t.document)}return e}function Mh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function s_(t){var e=ym(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&mm(n.ownerDocument.documentElement,n)){if(r!==null&&Mh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Ap(n,i);var o=Ap(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var i_=Nr&&"documentMode"in document&&11>=document.documentMode,yi=null,bd=null,Ao=null,_d=!1;function Rp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_d||yi==null||yi!==fl(r)||(r=yi,"selectionStart"in r&&Mh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ao&&Fo(Ao,r)||(Ao=r,r=bl(bd,"onSelect"),0<r.length&&(e=new Nh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=yi)))}function Ca(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var wi={animationend:Ca("Animation","AnimationEnd"),animationiteration:Ca("Animation","AnimationIteration"),animationstart:Ca("Animation","AnimationStart"),transitionend:Ca("Transition","TransitionEnd")},lu={},wm={};Nr&&(wm=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);function ac(t){if(lu[t])return lu[t];if(!wi[t])return t;var e=wi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in wm)return lu[t]=e[n];return t}var vm=ac("animationend"),bm=ac("animationiteration"),_m=ac("animationstart"),xm=ac("transitionend"),Sm=new Map,Cp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fs(t,e){Sm.set(t,e),Ws(e,[t])}for(var cu=0;cu<Cp.length;cu++){var uu=Cp[cu],o_=uu.toLowerCase(),a_=uu[0].toUpperCase()+uu.slice(1);fs(o_,"on"+a_)}fs(vm,"onAnimationEnd");fs(bm,"onAnimationIteration");fs(_m,"onAnimationStart");fs("dblclick","onDoubleClick");fs("focusin","onFocus");fs("focusout","onBlur");fs(xm,"onTransitionEnd");Ui("onMouseEnter",["mouseout","mouseover"]);Ui("onMouseLeave",["mouseout","mouseover"]);Ui("onPointerEnter",["pointerout","pointerover"]);Ui("onPointerLeave",["pointerout","pointerover"]);Ws("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ws("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ws("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ws("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ws("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ws("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),l_=new Set("cancel close invalid load scroll toggle".split(" ").concat(vo));function Ip(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ob(r,e,void 0,t),t.currentTarget=null}function Em(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Ip(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Ip(s,a,c),i=l}}}if(gl)throw t=md,gl=!1,md=null,t}function Fe(t,e){var n=e[Ad];n===void 0&&(n=e[Ad]=new Set);var r=t+"__bubble";n.has(r)||(km(e,t,2,!1),n.add(r))}function du(t,e,n){var r=0;e&&(r|=4),km(n,t,r,e)}var Ia="_reactListening"+Math.random().toString(36).slice(2);function $o(t){if(!t[Ia]){t[Ia]=!0,jg.forEach(function(n){n!=="selectionchange"&&(l_.has(n)||du(n,!1,t),du(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ia]||(e[Ia]=!0,du("selectionchange",!1,e))}}function km(t,e,n,r){switch(lm(e)){case 1:var s=xb;break;case 4:s=Sb;break;default:s=Bh}n=s.bind(null,e,n,t),s=void 0,!gd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function hu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Rs(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Gg(function(){var c=i,f=Rh(n),v=[];e:{var w=Sm.get(t);if(w!==void 0){var g=Nh,_=t;switch(t){case"keypress":if(sl(n)===0)break e;case"keydown":case"keyup":g=Ub;break;case"focusin":_="focus",g=iu;break;case"focusout":_="blur",g=iu;break;case"beforeblur":case"afterblur":g=iu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=yp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Ab;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=$b;break;case vm:case bm:case _m:g=Ib;break;case xm:g=qb;break;case"scroll":g=Eb;break;case"wheel":g=Vb;break;case"copy":case"cut":case"paste":g=Bb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=vp}var E=(e&4)!==0,C=!E&&t==="scroll",b=E?w!==null?w+"Capture":null:w;E=[];for(var S=c,x;S!==null;){x=S;var O=x.stateNode;if(x.tag===5&&O!==null&&(x=O,b!==null&&(O=Oo(S,b),O!=null&&E.push(zo(S,O,x)))),C)break;S=S.return}0<E.length&&(w=new g(w,_,null,n,f),v.push({event:w,listeners:E}))}}if(!(e&7)){e:{if(w=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",w&&n!==fd&&(_=n.relatedTarget||n.fromElement)&&(Rs(_)||_[Pr]))break e;if((g||w)&&(w=f.window===f?f:(w=f.ownerDocument)?w.defaultView||w.parentWindow:window,g?(_=n.relatedTarget||n.toElement,g=c,_=_?Rs(_):null,_!==null&&(C=Vs(_),_!==C||_.tag!==5&&_.tag!==6)&&(_=null)):(g=null,_=c),g!==_)){if(E=yp,O="onMouseLeave",b="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(E=vp,O="onPointerLeave",b="onPointerEnter",S="pointer"),C=g==null?w:vi(g),x=_==null?w:vi(_),w=new E(O,S+"leave",g,n,f),w.target=C,w.relatedTarget=x,O=null,Rs(f)===c&&(E=new E(b,S+"enter",_,n,f),E.target=x,E.relatedTarget=C,O=E),C=O,g&&_)t:{for(E=g,b=_,S=0,x=E;x;x=Xs(x))S++;for(x=0,O=b;O;O=Xs(O))x++;for(;0<S-x;)E=Xs(E),S--;for(;0<x-S;)b=Xs(b),x--;for(;S--;){if(E===b||b!==null&&E===b.alternate)break t;E=Xs(E),b=Xs(b)}E=null}else E=null;g!==null&&Tp(v,w,g,E,!1),_!==null&&C!==null&&Tp(v,C,_,E,!0)}}e:{if(w=c?vi(c):window,g=w.nodeName&&w.nodeName.toLowerCase(),g==="select"||g==="input"&&w.type==="file")var L=Xb;else if(xp(w))if(pm)L=n_;else{L=e_;var D=Qb}else(g=w.nodeName)&&g.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(L=t_);if(L&&(L=L(t,c))){fm(v,L,n,f);break e}D&&D(t,w,c),t==="focusout"&&(D=w._wrapperState)&&D.controlled&&w.type==="number"&&ld(w,"number",w.value)}switch(D=c?vi(c):window,t){case"focusin":(xp(D)||D.contentEditable==="true")&&(yi=D,bd=c,Ao=null);break;case"focusout":Ao=bd=yi=null;break;case"mousedown":_d=!0;break;case"contextmenu":case"mouseup":case"dragend":_d=!1,Rp(v,n,f);break;case"selectionchange":if(i_)break;case"keydown":case"keyup":Rp(v,n,f)}var W;if(Oh)e:{switch(t){case"compositionstart":var q="onCompositionStart";break e;case"compositionend":q="onCompositionEnd";break e;case"compositionupdate":q="onCompositionUpdate";break e}q=void 0}else mi?dm(t,n)&&(q="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(q="onCompositionStart");q&&(um&&n.locale!=="ko"&&(mi||q!=="onCompositionStart"?q==="onCompositionEnd"&&mi&&(W=cm()):(Zr=f,jh="value"in Zr?Zr.value:Zr.textContent,mi=!0)),D=bl(c,q),0<D.length&&(q=new wp(q,t,null,n,f),v.push({event:q,listeners:D}),W?q.data=W:(W=hm(n),W!==null&&(q.data=W)))),(W=Kb?Gb(t,n):Jb(t,n))&&(c=bl(c,"onBeforeInput"),0<c.length&&(f=new wp("onBeforeInput","beforeinput",null,n,f),v.push({event:f,listeners:c}),f.data=W))}Em(v,e)})}function zo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function bl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Oo(t,n),i!=null&&r.unshift(zo(t,i,s)),i=Oo(t,e),i!=null&&r.push(zo(t,i,s))),t=t.return}return r}function Xs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Tp(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Oo(n,i),l!=null&&o.unshift(zo(n,l,a))):s||(l=Oo(n,i),l!=null&&o.push(zo(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var c_=/\r\n?/g,u_=/\u0000|\uFFFD/g;function Bp(t){return(typeof t=="string"?t:""+t).replace(c_,`
`).replace(u_,"")}function Ta(t,e,n){if(e=Bp(e),Bp(t)!==e&&n)throw Error(Z(425))}function _l(){}var xd=null,Sd=null;function Ed(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var kd=typeof setTimeout=="function"?setTimeout:void 0,d_=typeof clearTimeout=="function"?clearTimeout:void 0,jp=typeof Promise=="function"?Promise:void 0,h_=typeof queueMicrotask=="function"?queueMicrotask:typeof jp<"u"?function(t){return jp.resolve(null).then(t).catch(f_)}:kd;function f_(t){setTimeout(function(){throw t})}function fu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Uo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Uo(e)}function ss(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Np(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Xi=Math.random().toString(36).slice(2),hr="__reactFiber$"+Xi,qo="__reactProps$"+Xi,Pr="__reactContainer$"+Xi,Ad="__reactEvents$"+Xi,p_="__reactListeners$"+Xi,g_="__reactHandles$"+Xi;function Rs(t){var e=t[hr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Pr]||n[hr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Np(t);t!==null;){if(n=t[hr])return n;t=Np(t)}return e}t=n,n=t.parentNode}return null}function aa(t){return t=t[hr]||t[Pr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function vi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Z(33))}function lc(t){return t[qo]||null}var Rd=[],bi=-1;function ps(t){return{current:t}}function $e(t){0>bi||(t.current=Rd[bi],Rd[bi]=null,bi--)}function Le(t,e){bi++,Rd[bi]=t.current,t.current=e}var ds={},tn=ps(ds),gn=ps(!1),Us=ds;function Di(t,e){var n=t.type.contextTypes;if(!n)return ds;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function mn(t){return t=t.childContextTypes,t!=null}function xl(){$e(gn),$e(tn)}function Pp(t,e,n){if(tn.current!==ds)throw Error(Z(168));Le(tn,e),Le(gn,n)}function Am(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Z(108,Q1(t)||"Unknown",s));return Ze({},n,r)}function Sl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ds,Us=tn.current,Le(tn,t),Le(gn,gn.current),!0}function Op(t,e,n){var r=t.stateNode;if(!r)throw Error(Z(169));n?(t=Am(t,e,Us),r.__reactInternalMemoizedMergedChildContext=t,$e(gn),$e(tn),Le(tn,t)):$e(gn),Le(gn,n)}var kr=null,cc=!1,pu=!1;function Rm(t){kr===null?kr=[t]:kr.push(t)}function m_(t){cc=!0,Rm(t)}function gs(){if(!pu&&kr!==null){pu=!0;var t=0,e=Ie;try{var n=kr;for(Ie=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}kr=null,cc=!1}catch(s){throw kr!==null&&(kr=kr.slice(t+1)),Xg(Ch,gs),s}finally{Ie=e,pu=!1}}return null}var _i=[],xi=0,El=null,kl=0,Dn=[],Fn=0,Ds=null,Ir=1,Tr="";function vs(t,e){_i[xi++]=kl,_i[xi++]=El,El=t,kl=e}function Cm(t,e,n){Dn[Fn++]=Ir,Dn[Fn++]=Tr,Dn[Fn++]=Ds,Ds=t;var r=Ir;t=Tr;var s=32-rr(r)-1;r&=~(1<<s),n+=1;var i=32-rr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Ir=1<<32-rr(e)+s|n<<s|r,Tr=i+t}else Ir=1<<i|n<<s|r,Tr=t}function Lh(t){t.return!==null&&(vs(t,1),Cm(t,1,0))}function Uh(t){for(;t===El;)El=_i[--xi],_i[xi]=null,kl=_i[--xi],_i[xi]=null;for(;t===Ds;)Ds=Dn[--Fn],Dn[Fn]=null,Tr=Dn[--Fn],Dn[Fn]=null,Ir=Dn[--Fn],Dn[Fn]=null}var kn=null,En=null,Ve=!1,tr=null;function Im(t,e){var n=zn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Mp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,kn=t,En=ss(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,kn=t,En=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ds!==null?{id:Ir,overflow:Tr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=zn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,kn=t,En=null,!0):!1;default:return!1}}function Cd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Id(t){if(Ve){var e=En;if(e){var n=e;if(!Mp(t,e)){if(Cd(t))throw Error(Z(418));e=ss(n.nextSibling);var r=kn;e&&Mp(t,e)?Im(r,n):(t.flags=t.flags&-4097|2,Ve=!1,kn=t)}}else{if(Cd(t))throw Error(Z(418));t.flags=t.flags&-4097|2,Ve=!1,kn=t}}}function Lp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;kn=t}function Ba(t){if(t!==kn)return!1;if(!Ve)return Lp(t),Ve=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ed(t.type,t.memoizedProps)),e&&(e=En)){if(Cd(t))throw Tm(),Error(Z(418));for(;e;)Im(t,e),e=ss(e.nextSibling)}if(Lp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){En=ss(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}En=null}}else En=kn?ss(t.stateNode.nextSibling):null;return!0}function Tm(){for(var t=En;t;)t=ss(t.nextSibling)}function Fi(){En=kn=null,Ve=!1}function Dh(t){tr===null?tr=[t]:tr.push(t)}var y_=Lr.ReactCurrentBatchConfig;function ho(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Z(309));var r=n.stateNode}if(!r)throw Error(Z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Z(284));if(!n._owner)throw Error(Z(290,t))}return t}function ja(t,e){throw t=Object.prototype.toString.call(e),Error(Z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Up(t){var e=t._init;return e(t._payload)}function Bm(t){function e(b,S){if(t){var x=b.deletions;x===null?(b.deletions=[S],b.flags|=16):x.push(S)}}function n(b,S){if(!t)return null;for(;S!==null;)e(b,S),S=S.sibling;return null}function r(b,S){for(b=new Map;S!==null;)S.key!==null?b.set(S.key,S):b.set(S.index,S),S=S.sibling;return b}function s(b,S){return b=ls(b,S),b.index=0,b.sibling=null,b}function i(b,S,x){return b.index=x,t?(x=b.alternate,x!==null?(x=x.index,x<S?(b.flags|=2,S):x):(b.flags|=2,S)):(b.flags|=1048576,S)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function a(b,S,x,O){return S===null||S.tag!==6?(S=_u(x,b.mode,O),S.return=b,S):(S=s(S,x),S.return=b,S)}function l(b,S,x,O){var L=x.type;return L===gi?f(b,S,x.props.children,O,x.key):S!==null&&(S.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Hr&&Up(L)===S.type)?(O=s(S,x.props),O.ref=ho(b,S,x),O.return=b,O):(O=dl(x.type,x.key,x.props,null,b.mode,O),O.ref=ho(b,S,x),O.return=b,O)}function c(b,S,x,O){return S===null||S.tag!==4||S.stateNode.containerInfo!==x.containerInfo||S.stateNode.implementation!==x.implementation?(S=xu(x,b.mode,O),S.return=b,S):(S=s(S,x.children||[]),S.return=b,S)}function f(b,S,x,O,L){return S===null||S.tag!==7?(S=Os(x,b.mode,O,L),S.return=b,S):(S=s(S,x),S.return=b,S)}function v(b,S,x){if(typeof S=="string"&&S!==""||typeof S=="number")return S=_u(""+S,b.mode,x),S.return=b,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case _a:return x=dl(S.type,S.key,S.props,null,b.mode,x),x.ref=ho(b,null,S),x.return=b,x;case pi:return S=xu(S,b.mode,x),S.return=b,S;case Hr:var O=S._init;return v(b,O(S._payload),x)}if(yo(S)||oo(S))return S=Os(S,b.mode,x,null),S.return=b,S;ja(b,S)}return null}function w(b,S,x,O){var L=S!==null?S.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return L!==null?null:a(b,S,""+x,O);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case _a:return x.key===L?l(b,S,x,O):null;case pi:return x.key===L?c(b,S,x,O):null;case Hr:return L=x._init,w(b,S,L(x._payload),O)}if(yo(x)||oo(x))return L!==null?null:f(b,S,x,O,null);ja(b,x)}return null}function g(b,S,x,O,L){if(typeof O=="string"&&O!==""||typeof O=="number")return b=b.get(x)||null,a(S,b,""+O,L);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case _a:return b=b.get(O.key===null?x:O.key)||null,l(S,b,O,L);case pi:return b=b.get(O.key===null?x:O.key)||null,c(S,b,O,L);case Hr:var D=O._init;return g(b,S,x,D(O._payload),L)}if(yo(O)||oo(O))return b=b.get(x)||null,f(S,b,O,L,null);ja(S,O)}return null}function _(b,S,x,O){for(var L=null,D=null,W=S,q=S=0,F=null;W!==null&&q<x.length;q++){W.index>q?(F=W,W=null):F=W.sibling;var K=w(b,W,x[q],O);if(K===null){W===null&&(W=F);break}t&&W&&K.alternate===null&&e(b,W),S=i(K,S,q),D===null?L=K:D.sibling=K,D=K,W=F}if(q===x.length)return n(b,W),Ve&&vs(b,q),L;if(W===null){for(;q<x.length;q++)W=v(b,x[q],O),W!==null&&(S=i(W,S,q),D===null?L=W:D.sibling=W,D=W);return Ve&&vs(b,q),L}for(W=r(b,W);q<x.length;q++)F=g(W,b,q,x[q],O),F!==null&&(t&&F.alternate!==null&&W.delete(F.key===null?q:F.key),S=i(F,S,q),D===null?L=F:D.sibling=F,D=F);return t&&W.forEach(function(Y){return e(b,Y)}),Ve&&vs(b,q),L}function E(b,S,x,O){var L=oo(x);if(typeof L!="function")throw Error(Z(150));if(x=L.call(x),x==null)throw Error(Z(151));for(var D=L=null,W=S,q=S=0,F=null,K=x.next();W!==null&&!K.done;q++,K=x.next()){W.index>q?(F=W,W=null):F=W.sibling;var Y=w(b,W,K.value,O);if(Y===null){W===null&&(W=F);break}t&&W&&Y.alternate===null&&e(b,W),S=i(Y,S,q),D===null?L=Y:D.sibling=Y,D=Y,W=F}if(K.done)return n(b,W),Ve&&vs(b,q),L;if(W===null){for(;!K.done;q++,K=x.next())K=v(b,K.value,O),K!==null&&(S=i(K,S,q),D===null?L=K:D.sibling=K,D=K);return Ve&&vs(b,q),L}for(W=r(b,W);!K.done;q++,K=x.next())K=g(W,b,q,K.value,O),K!==null&&(t&&K.alternate!==null&&W.delete(K.key===null?q:K.key),S=i(K,S,q),D===null?L=K:D.sibling=K,D=K);return t&&W.forEach(function(te){return e(b,te)}),Ve&&vs(b,q),L}function C(b,S,x,O){if(typeof x=="object"&&x!==null&&x.type===gi&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case _a:e:{for(var L=x.key,D=S;D!==null;){if(D.key===L){if(L=x.type,L===gi){if(D.tag===7){n(b,D.sibling),S=s(D,x.props.children),S.return=b,b=S;break e}}else if(D.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Hr&&Up(L)===D.type){n(b,D.sibling),S=s(D,x.props),S.ref=ho(b,D,x),S.return=b,b=S;break e}n(b,D);break}else e(b,D);D=D.sibling}x.type===gi?(S=Os(x.props.children,b.mode,O,x.key),S.return=b,b=S):(O=dl(x.type,x.key,x.props,null,b.mode,O),O.ref=ho(b,S,x),O.return=b,b=O)}return o(b);case pi:e:{for(D=x.key;S!==null;){if(S.key===D)if(S.tag===4&&S.stateNode.containerInfo===x.containerInfo&&S.stateNode.implementation===x.implementation){n(b,S.sibling),S=s(S,x.children||[]),S.return=b,b=S;break e}else{n(b,S);break}else e(b,S);S=S.sibling}S=xu(x,b.mode,O),S.return=b,b=S}return o(b);case Hr:return D=x._init,C(b,S,D(x._payload),O)}if(yo(x))return _(b,S,x,O);if(oo(x))return E(b,S,x,O);ja(b,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,S!==null&&S.tag===6?(n(b,S.sibling),S=s(S,x),S.return=b,b=S):(n(b,S),S=_u(x,b.mode,O),S.return=b,b=S),o(b)):n(b,S)}return C}var $i=Bm(!0),jm=Bm(!1),Al=ps(null),Rl=null,Si=null,Fh=null;function $h(){Fh=Si=Rl=null}function zh(t){var e=Al.current;$e(Al),t._currentValue=e}function Td(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ji(t,e){Rl=t,Fh=Si=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(fn=!0),t.firstContext=null)}function Vn(t){var e=t._currentValue;if(Fh!==t)if(t={context:t,memoizedValue:e,next:null},Si===null){if(Rl===null)throw Error(Z(308));Si=t,Rl.dependencies={lanes:0,firstContext:t}}else Si=Si.next=t;return e}var Cs=null;function qh(t){Cs===null?Cs=[t]:Cs.push(t)}function Nm(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,qh(e)):(n.next=s.next,s.next=n),e.interleaved=n,Or(t,r)}function Or(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Kr=!1;function Wh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pm(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function jr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function is(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Re&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Or(t,n)}return s=r.interleaved,s===null?(e.next=e,qh(r)):(e.next=s.next,s.next=e),r.interleaved=e,Or(t,n)}function il(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ih(t,n)}}function Dp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Cl(t,e,n,r){var s=t.updateQueue;Kr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=l))}if(i!==null){var v=s.baseState;o=0,f=c=l=null,a=i;do{var w=a.lane,g=a.eventTime;if((r&w)===w){f!==null&&(f=f.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,E=a;switch(w=e,g=n,E.tag){case 1:if(_=E.payload,typeof _=="function"){v=_.call(g,v,w);break e}v=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=E.payload,w=typeof _=="function"?_.call(g,v,w):_,w==null)break e;v=Ze({},v,w);break e;case 2:Kr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,w=s.effects,w===null?s.effects=[a]:w.push(a))}else g={eventTime:g,lane:w,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(c=f=g,l=v):f=f.next=g,o|=w;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;w=a,a=w.next,w.next=null,s.lastBaseUpdate=w,s.shared.pending=null}}while(!0);if(f===null&&(l=v),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);$s|=o,t.lanes=o,t.memoizedState=v}}function Fp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Z(191,s));s.call(r)}}}var la={},mr=ps(la),Wo=ps(la),Vo=ps(la);function Is(t){if(t===la)throw Error(Z(174));return t}function Vh(t,e){switch(Le(Vo,e),Le(Wo,t),Le(mr,la),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ud(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ud(e,t)}$e(mr),Le(mr,e)}function zi(){$e(mr),$e(Wo),$e(Vo)}function Om(t){Is(Vo.current);var e=Is(mr.current),n=ud(e,t.type);e!==n&&(Le(Wo,t),Le(mr,n))}function Hh(t){Wo.current===t&&($e(mr),$e(Wo))}var Ge=ps(0);function Il(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gu=[];function Kh(){for(var t=0;t<gu.length;t++)gu[t]._workInProgressVersionPrimary=null;gu.length=0}var ol=Lr.ReactCurrentDispatcher,mu=Lr.ReactCurrentBatchConfig,Fs=0,Ye=null,jt=null,Ot=null,Tl=!1,Ro=!1,Ho=0,w_=0;function Kt(){throw Error(Z(321))}function Gh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ar(t[n],e[n]))return!1;return!0}function Jh(t,e,n,r,s,i){if(Fs=i,Ye=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ol.current=t===null||t.memoizedState===null?x_:S_,t=n(r,s),Ro){i=0;do{if(Ro=!1,Ho=0,25<=i)throw Error(Z(301));i+=1,Ot=jt=null,e.updateQueue=null,ol.current=E_,t=n(r,s)}while(Ro)}if(ol.current=Bl,e=jt!==null&&jt.next!==null,Fs=0,Ot=jt=Ye=null,Tl=!1,e)throw Error(Z(300));return t}function Yh(){var t=Ho!==0;return Ho=0,t}function dr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?Ye.memoizedState=Ot=t:Ot=Ot.next=t,Ot}function Hn(){if(jt===null){var t=Ye.alternate;t=t!==null?t.memoizedState:null}else t=jt.next;var e=Ot===null?Ye.memoizedState:Ot.next;if(e!==null)Ot=e,jt=t;else{if(t===null)throw Error(Z(310));jt=t,t={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},Ot===null?Ye.memoizedState=Ot=t:Ot=Ot.next=t}return Ot}function Ko(t,e){return typeof e=="function"?e(t):e}function yu(t){var e=Hn(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=jt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var f=c.lane;if((Fs&f)===f)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var v={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=v,o=r):l=l.next=v,Ye.lanes|=f,$s|=f}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,ar(r,e.memoizedState)||(fn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ye.lanes|=i,$s|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function wu(t){var e=Hn(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);ar(i,e.memoizedState)||(fn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Mm(){}function Lm(t,e){var n=Ye,r=Hn(),s=e(),i=!ar(r.memoizedState,s);if(i&&(r.memoizedState=s,fn=!0),r=r.queue,Zh(Fm.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ot!==null&&Ot.memoizedState.tag&1){if(n.flags|=2048,Go(9,Dm.bind(null,n,r,s,e),void 0,null),Mt===null)throw Error(Z(349));Fs&30||Um(n,e,s)}return s}function Um(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Dm(t,e,n,r){e.value=n,e.getSnapshot=r,$m(e)&&zm(t)}function Fm(t,e,n){return n(function(){$m(e)&&zm(t)})}function $m(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ar(t,n)}catch{return!0}}function zm(t){var e=Or(t,1);e!==null&&sr(e,t,1,-1)}function $p(t){var e=dr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:t},e.queue=t,t=t.dispatch=__.bind(null,Ye,t),[e.memoizedState,t]}function Go(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function qm(){return Hn().memoizedState}function al(t,e,n,r){var s=dr();Ye.flags|=t,s.memoizedState=Go(1|e,n,void 0,r===void 0?null:r)}function uc(t,e,n,r){var s=Hn();r=r===void 0?null:r;var i=void 0;if(jt!==null){var o=jt.memoizedState;if(i=o.destroy,r!==null&&Gh(r,o.deps)){s.memoizedState=Go(e,n,i,r);return}}Ye.flags|=t,s.memoizedState=Go(1|e,n,i,r)}function zp(t,e){return al(8390656,8,t,e)}function Zh(t,e){return uc(2048,8,t,e)}function Wm(t,e){return uc(4,2,t,e)}function Vm(t,e){return uc(4,4,t,e)}function Hm(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Km(t,e,n){return n=n!=null?n.concat([t]):null,uc(4,4,Hm.bind(null,e,t),n)}function Xh(){}function Gm(t,e){var n=Hn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Gh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Jm(t,e){var n=Hn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Gh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ym(t,e,n){return Fs&21?(ar(n,e)||(n=tm(),Ye.lanes|=n,$s|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,fn=!0),t.memoizedState=n)}function v_(t,e){var n=Ie;Ie=n!==0&&4>n?n:4,t(!0);var r=mu.transition;mu.transition={};try{t(!1),e()}finally{Ie=n,mu.transition=r}}function Zm(){return Hn().memoizedState}function b_(t,e,n){var r=as(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xm(t))Qm(e,n);else if(n=Nm(t,e,n,r),n!==null){var s=an();sr(n,t,r,s),ey(n,e,r)}}function __(t,e,n){var r=as(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xm(t))Qm(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,ar(a,o)){var l=e.interleaved;l===null?(s.next=s,qh(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=Nm(t,e,s,r),n!==null&&(s=an(),sr(n,t,r,s),ey(n,e,r))}}function Xm(t){var e=t.alternate;return t===Ye||e!==null&&e===Ye}function Qm(t,e){Ro=Tl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ey(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ih(t,n)}}var Bl={readContext:Vn,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useInsertionEffect:Kt,useLayoutEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useMutableSource:Kt,useSyncExternalStore:Kt,useId:Kt,unstable_isNewReconciler:!1},x_={readContext:Vn,useCallback:function(t,e){return dr().memoizedState=[t,e===void 0?null:e],t},useContext:Vn,useEffect:zp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,al(4194308,4,Hm.bind(null,e,t),n)},useLayoutEffect:function(t,e){return al(4194308,4,t,e)},useInsertionEffect:function(t,e){return al(4,2,t,e)},useMemo:function(t,e){var n=dr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=dr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=b_.bind(null,Ye,t),[r.memoizedState,t]},useRef:function(t){var e=dr();return t={current:t},e.memoizedState=t},useState:$p,useDebugValue:Xh,useDeferredValue:function(t){return dr().memoizedState=t},useTransition:function(){var t=$p(!1),e=t[0];return t=v_.bind(null,t[1]),dr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ye,s=dr();if(Ve){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=e(),Mt===null)throw Error(Z(349));Fs&30||Um(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,zp(Fm.bind(null,r,i,t),[t]),r.flags|=2048,Go(9,Dm.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=dr(),e=Mt.identifierPrefix;if(Ve){var n=Tr,r=Ir;n=(r&~(1<<32-rr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ho++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=w_++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},S_={readContext:Vn,useCallback:Gm,useContext:Vn,useEffect:Zh,useImperativeHandle:Km,useInsertionEffect:Wm,useLayoutEffect:Vm,useMemo:Jm,useReducer:yu,useRef:qm,useState:function(){return yu(Ko)},useDebugValue:Xh,useDeferredValue:function(t){var e=Hn();return Ym(e,jt.memoizedState,t)},useTransition:function(){var t=yu(Ko)[0],e=Hn().memoizedState;return[t,e]},useMutableSource:Mm,useSyncExternalStore:Lm,useId:Zm,unstable_isNewReconciler:!1},E_={readContext:Vn,useCallback:Gm,useContext:Vn,useEffect:Zh,useImperativeHandle:Km,useInsertionEffect:Wm,useLayoutEffect:Vm,useMemo:Jm,useReducer:wu,useRef:qm,useState:function(){return wu(Ko)},useDebugValue:Xh,useDeferredValue:function(t){var e=Hn();return jt===null?e.memoizedState=t:Ym(e,jt.memoizedState,t)},useTransition:function(){var t=wu(Ko)[0],e=Hn().memoizedState;return[t,e]},useMutableSource:Mm,useSyncExternalStore:Lm,useId:Zm,unstable_isNewReconciler:!1};function Zn(t,e){if(t&&t.defaultProps){e=Ze({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Bd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ze({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var dc={isMounted:function(t){return(t=t._reactInternals)?Vs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=an(),s=as(t),i=jr(r,s);i.payload=e,n!=null&&(i.callback=n),e=is(t,i,s),e!==null&&(sr(e,t,s,r),il(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=an(),s=as(t),i=jr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=is(t,i,s),e!==null&&(sr(e,t,s,r),il(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=an(),r=as(t),s=jr(n,r);s.tag=2,e!=null&&(s.callback=e),e=is(t,s,r),e!==null&&(sr(e,t,r,n),il(e,t,r))}};function qp(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Fo(n,r)||!Fo(s,i):!0}function ty(t,e,n){var r=!1,s=ds,i=e.contextType;return typeof i=="object"&&i!==null?i=Vn(i):(s=mn(e)?Us:tn.current,r=e.contextTypes,i=(r=r!=null)?Di(t,s):ds),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=dc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Wp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&dc.enqueueReplaceState(e,e.state,null)}function jd(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Wh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Vn(i):(i=mn(e)?Us:tn.current,s.context=Di(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Bd(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&dc.enqueueReplaceState(s,s.state,null),Cl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function qi(t,e){try{var n="",r=e;do n+=X1(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function vu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Nd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var k_=typeof WeakMap=="function"?WeakMap:Map;function ny(t,e,n){n=jr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Nl||(Nl=!0,qd=r),Nd(t,e)},n}function ry(t,e,n){n=jr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Nd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Nd(t,e),typeof r!="function"&&(os===null?os=new Set([this]):os.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Vp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new k_;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=D_.bind(null,t,e,n),e.then(t,t))}function Hp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Kp(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=jr(-1,1),e.tag=2,is(n,e,1))),n.lanes|=1),t)}var A_=Lr.ReactCurrentOwner,fn=!1;function nn(t,e,n,r){e.child=t===null?jm(e,null,n,r):$i(e,t.child,n,r)}function Gp(t,e,n,r,s){n=n.render;var i=e.ref;return ji(e,s),r=Jh(t,e,n,r,i,s),n=Yh(),t!==null&&!fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Mr(t,e,s)):(Ve&&n&&Lh(e),e.flags|=1,nn(t,e,r,s),e.child)}function Jp(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!af(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,sy(t,e,i,r,s)):(t=dl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Fo,n(o,r)&&t.ref===e.ref)return Mr(t,e,s)}return e.flags|=1,t=ls(i,r),t.ref=e.ref,t.return=e,e.child=t}function sy(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Fo(i,r)&&t.ref===e.ref)if(fn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(fn=!0);else return e.lanes=t.lanes,Mr(t,e,s)}return Pd(t,e,n,r,s)}function iy(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(ki,bn),bn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Le(ki,bn),bn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Le(ki,bn),bn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Le(ki,bn),bn|=r;return nn(t,e,s,n),e.child}function oy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Pd(t,e,n,r,s){var i=mn(n)?Us:tn.current;return i=Di(e,i),ji(e,s),n=Jh(t,e,n,r,i,s),r=Yh(),t!==null&&!fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Mr(t,e,s)):(Ve&&r&&Lh(e),e.flags|=1,nn(t,e,n,s),e.child)}function Yp(t,e,n,r,s){if(mn(n)){var i=!0;Sl(e)}else i=!1;if(ji(e,s),e.stateNode===null)ll(t,e),ty(e,n,r),jd(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Vn(c):(c=mn(n)?Us:tn.current,c=Di(e,c));var f=n.getDerivedStateFromProps,v=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";v||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Wp(e,o,r,c),Kr=!1;var w=e.memoizedState;o.state=w,Cl(e,r,o,s),l=e.memoizedState,a!==r||w!==l||gn.current||Kr?(typeof f=="function"&&(Bd(e,n,f,r),l=e.memoizedState),(a=Kr||qp(e,n,a,r,w,l,c))?(v||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Pm(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Zn(e.type,a),o.props=c,v=e.pendingProps,w=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Vn(l):(l=mn(n)?Us:tn.current,l=Di(e,l));var g=n.getDerivedStateFromProps;(f=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==v||w!==l)&&Wp(e,o,r,l),Kr=!1,w=e.memoizedState,o.state=w,Cl(e,r,o,s);var _=e.memoizedState;a!==v||w!==_||gn.current||Kr?(typeof g=="function"&&(Bd(e,n,g,r),_=e.memoizedState),(c=Kr||qp(e,n,c,r,w,_,l)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),r=!1)}return Od(t,e,n,r,i,s)}function Od(t,e,n,r,s,i){oy(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Op(e,n,!1),Mr(t,e,i);r=e.stateNode,A_.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=$i(e,t.child,null,i),e.child=$i(e,null,a,i)):nn(t,e,a,i),e.memoizedState=r.state,s&&Op(e,n,!0),e.child}function ay(t){var e=t.stateNode;e.pendingContext?Pp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Pp(t,e.context,!1),Vh(t,e.containerInfo)}function Zp(t,e,n,r,s){return Fi(),Dh(s),e.flags|=256,nn(t,e,n,r),e.child}var Md={dehydrated:null,treeContext:null,retryLane:0};function Ld(t){return{baseLanes:t,cachePool:null,transitions:null}}function ly(t,e,n){var r=e.pendingProps,s=Ge.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Le(Ge,s&1),t===null)return Id(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=pc(o,r,0,null),t=Os(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ld(n),e.memoizedState=Md,t):Qh(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return R_(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ls(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ls(a,i):(i=Os(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Ld(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Md,r}return i=t.child,t=i.sibling,r=ls(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Qh(t,e){return e=pc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Na(t,e,n,r){return r!==null&&Dh(r),$i(e,t.child,null,n),t=Qh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function R_(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=vu(Error(Z(422))),Na(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=pc({mode:"visible",children:r.children},s,0,null),i=Os(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&$i(e,t.child,null,o),e.child.memoizedState=Ld(o),e.memoizedState=Md,i);if(!(e.mode&1))return Na(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Z(419)),r=vu(i,r,void 0),Na(t,e,o,r)}if(a=(o&t.childLanes)!==0,fn||a){if(r=Mt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Or(t,s),sr(r,t,s,-1))}return of(),r=vu(Error(Z(421))),Na(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=F_.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,En=ss(s.nextSibling),kn=e,Ve=!0,tr=null,t!==null&&(Dn[Fn++]=Ir,Dn[Fn++]=Tr,Dn[Fn++]=Ds,Ir=t.id,Tr=t.overflow,Ds=e),e=Qh(e,r.children),e.flags|=4096,e)}function Xp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Td(t.return,e,n)}function bu(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function cy(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(nn(t,e,r.children,n),r=Ge.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Xp(t,n,e);else if(t.tag===19)Xp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Le(Ge,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Il(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),bu(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Il(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}bu(e,!0,n,null,i);break;case"together":bu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ll(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Mr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),$s|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Z(153));if(e.child!==null){for(t=e.child,n=ls(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ls(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function C_(t,e,n){switch(e.tag){case 3:ay(e),Fi();break;case 5:Om(e);break;case 1:mn(e.type)&&Sl(e);break;case 4:Vh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Le(Al,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Le(Ge,Ge.current&1),e.flags|=128,null):n&e.child.childLanes?ly(t,e,n):(Le(Ge,Ge.current&1),t=Mr(t,e,n),t!==null?t.sibling:null);Le(Ge,Ge.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return cy(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Le(Ge,Ge.current),r)break;return null;case 22:case 23:return e.lanes=0,iy(t,e,n)}return Mr(t,e,n)}var uy,Ud,dy,hy;uy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ud=function(){};dy=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Is(mr.current);var i=null;switch(n){case"input":s=od(t,s),r=od(t,r),i=[];break;case"select":s=Ze({},s,{value:void 0}),r=Ze({},r,{value:void 0}),i=[];break;case"textarea":s=cd(t,s),r=cd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=_l)}dd(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(No.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(No.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Fe("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};hy=function(t,e,n,r){n!==r&&(e.flags|=4)};function fo(t,e){if(!Ve)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Gt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function I_(t,e,n){var r=e.pendingProps;switch(Uh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(e),null;case 1:return mn(e.type)&&xl(),Gt(e),null;case 3:return r=e.stateNode,zi(),$e(gn),$e(tn),Kh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ba(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,tr!==null&&(Hd(tr),tr=null))),Ud(t,e),Gt(e),null;case 5:Hh(e);var s=Is(Vo.current);if(n=e.type,t!==null&&e.stateNode!=null)dy(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Z(166));return Gt(e),null}if(t=Is(mr.current),Ba(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[hr]=e,r[qo]=i,t=(e.mode&1)!==0,n){case"dialog":Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":case"embed":Fe("load",r);break;case"video":case"audio":for(s=0;s<vo.length;s++)Fe(vo[s],r);break;case"source":Fe("error",r);break;case"img":case"image":case"link":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"input":ap(r,i),Fe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Fe("invalid",r);break;case"textarea":cp(r,i),Fe("invalid",r)}dd(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Ta(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Ta(r.textContent,a,t),s=["children",""+a]):No.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Fe("scroll",r)}switch(n){case"input":xa(r),lp(r,i,!0);break;case"textarea":xa(r),up(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=_l)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Fg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[hr]=e,t[qo]=r,uy(t,e,!1,!1),e.stateNode=t;e:{switch(o=hd(n,r),n){case"dialog":Fe("cancel",t),Fe("close",t),s=r;break;case"iframe":case"object":case"embed":Fe("load",t),s=r;break;case"video":case"audio":for(s=0;s<vo.length;s++)Fe(vo[s],t);s=r;break;case"source":Fe("error",t),s=r;break;case"img":case"image":case"link":Fe("error",t),Fe("load",t),s=r;break;case"details":Fe("toggle",t),s=r;break;case"input":ap(t,r),s=od(t,r),Fe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ze({},r,{value:void 0}),Fe("invalid",t);break;case"textarea":cp(t,r),s=cd(t,r),Fe("invalid",t);break;default:s=r}dd(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?qg(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&$g(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Po(t,l):typeof l=="number"&&Po(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(No.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Fe("scroll",t):l!=null&&Sh(t,i,l,o))}switch(n){case"input":xa(t),lp(t,r,!1);break;case"textarea":xa(t),up(t);break;case"option":r.value!=null&&t.setAttribute("value",""+us(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ci(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ci(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=_l)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Gt(e),null;case 6:if(t&&e.stateNode!=null)hy(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Z(166));if(n=Is(Vo.current),Is(mr.current),Ba(e)){if(r=e.stateNode,n=e.memoizedProps,r[hr]=e,(i=r.nodeValue!==n)&&(t=kn,t!==null))switch(t.tag){case 3:Ta(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ta(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[hr]=e,e.stateNode=r}return Gt(e),null;case 13:if($e(Ge),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ve&&En!==null&&e.mode&1&&!(e.flags&128))Tm(),Fi(),e.flags|=98560,i=!1;else if(i=Ba(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Z(317));i[hr]=e}else Fi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Gt(e),i=!1}else tr!==null&&(Hd(tr),tr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ge.current&1?Nt===0&&(Nt=3):of())),e.updateQueue!==null&&(e.flags|=4),Gt(e),null);case 4:return zi(),Ud(t,e),t===null&&$o(e.stateNode.containerInfo),Gt(e),null;case 10:return zh(e.type._context),Gt(e),null;case 17:return mn(e.type)&&xl(),Gt(e),null;case 19:if($e(Ge),i=e.memoizedState,i===null)return Gt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)fo(i,!1);else{if(Nt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Il(t),o!==null){for(e.flags|=128,fo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Le(Ge,Ge.current&1|2),e.child}t=t.sibling}i.tail!==null&&lt()>Wi&&(e.flags|=128,r=!0,fo(i,!1),e.lanes=4194304)}else{if(!r)if(t=Il(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),fo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ve)return Gt(e),null}else 2*lt()-i.renderingStartTime>Wi&&n!==1073741824&&(e.flags|=128,r=!0,fo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=lt(),e.sibling=null,n=Ge.current,Le(Ge,r?n&1|2:n&1),e):(Gt(e),null);case 22:case 23:return sf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?bn&1073741824&&(Gt(e),e.subtreeFlags&6&&(e.flags|=8192)):Gt(e),null;case 24:return null;case 25:return null}throw Error(Z(156,e.tag))}function T_(t,e){switch(Uh(e),e.tag){case 1:return mn(e.type)&&xl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return zi(),$e(gn),$e(tn),Kh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Hh(e),null;case 13:if($e(Ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Z(340));Fi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return $e(Ge),null;case 4:return zi(),null;case 10:return zh(e.type._context),null;case 22:case 23:return sf(),null;case 24:return null;default:return null}}var Pa=!1,en=!1,B_=typeof WeakSet=="function"?WeakSet:Set,oe=null;function Ei(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ot(t,e,r)}else n.current=null}function Dd(t,e,n){try{n()}catch(r){ot(t,e,r)}}var Qp=!1;function j_(t,e){if(xd=wl,t=ym(),Mh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,f=0,v=t,w=null;t:for(;;){for(var g;v!==n||s!==0&&v.nodeType!==3||(a=o+s),v!==i||r!==0&&v.nodeType!==3||(l=o+r),v.nodeType===3&&(o+=v.nodeValue.length),(g=v.firstChild)!==null;)w=v,v=g;for(;;){if(v===t)break t;if(w===n&&++c===s&&(a=o),w===i&&++f===r&&(l=o),(g=v.nextSibling)!==null)break;v=w,w=v.parentNode}v=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Sd={focusedElem:t,selectionRange:n},wl=!1,oe=e;oe!==null;)if(e=oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,oe=t;else for(;oe!==null;){e=oe;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var E=_.memoizedProps,C=_.memoizedState,b=e.stateNode,S=b.getSnapshotBeforeUpdate(e.elementType===e.type?E:Zn(e.type,E),C);b.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(O){ot(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,oe=t;break}oe=e.return}return _=Qp,Qp=!1,_}function Co(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Dd(e,n,i)}s=s.next}while(s!==r)}}function hc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Fd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function fy(t){var e=t.alternate;e!==null&&(t.alternate=null,fy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[hr],delete e[qo],delete e[Ad],delete e[p_],delete e[g_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function py(t){return t.tag===5||t.tag===3||t.tag===4}function e0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||py(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $d(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=_l));else if(r!==4&&(t=t.child,t!==null))for($d(t,e,n),t=t.sibling;t!==null;)$d(t,e,n),t=t.sibling}function zd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(zd(t,e,n),t=t.sibling;t!==null;)zd(t,e,n),t=t.sibling}var Ft=null,Qn=!1;function Ur(t,e,n){for(n=n.child;n!==null;)gy(t,e,n),n=n.sibling}function gy(t,e,n){if(gr&&typeof gr.onCommitFiberUnmount=="function")try{gr.onCommitFiberUnmount(sc,n)}catch{}switch(n.tag){case 5:en||Ei(n,e);case 6:var r=Ft,s=Qn;Ft=null,Ur(t,e,n),Ft=r,Qn=s,Ft!==null&&(Qn?(t=Ft,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ft.removeChild(n.stateNode));break;case 18:Ft!==null&&(Qn?(t=Ft,n=n.stateNode,t.nodeType===8?fu(t.parentNode,n):t.nodeType===1&&fu(t,n),Uo(t)):fu(Ft,n.stateNode));break;case 4:r=Ft,s=Qn,Ft=n.stateNode.containerInfo,Qn=!0,Ur(t,e,n),Ft=r,Qn=s;break;case 0:case 11:case 14:case 15:if(!en&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Dd(n,e,o),s=s.next}while(s!==r)}Ur(t,e,n);break;case 1:if(!en&&(Ei(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ot(n,e,a)}Ur(t,e,n);break;case 21:Ur(t,e,n);break;case 22:n.mode&1?(en=(r=en)||n.memoizedState!==null,Ur(t,e,n),en=r):Ur(t,e,n);break;default:Ur(t,e,n)}}function t0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new B_),e.forEach(function(r){var s=$_.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Jn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ft=a.stateNode,Qn=!1;break e;case 3:Ft=a.stateNode.containerInfo,Qn=!0;break e;case 4:Ft=a.stateNode.containerInfo,Qn=!0;break e}a=a.return}if(Ft===null)throw Error(Z(160));gy(i,o,s),Ft=null,Qn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){ot(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)my(e,t),e=e.sibling}function my(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Jn(e,t),cr(t),r&4){try{Co(3,t,t.return),hc(3,t)}catch(E){ot(t,t.return,E)}try{Co(5,t,t.return)}catch(E){ot(t,t.return,E)}}break;case 1:Jn(e,t),cr(t),r&512&&n!==null&&Ei(n,n.return);break;case 5:if(Jn(e,t),cr(t),r&512&&n!==null&&Ei(n,n.return),t.flags&32){var s=t.stateNode;try{Po(s,"")}catch(E){ot(t,t.return,E)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Ug(s,i),hd(a,o);var c=hd(a,i);for(o=0;o<l.length;o+=2){var f=l[o],v=l[o+1];f==="style"?qg(s,v):f==="dangerouslySetInnerHTML"?$g(s,v):f==="children"?Po(s,v):Sh(s,f,v,c)}switch(a){case"input":ad(s,i);break;case"textarea":Dg(s,i);break;case"select":var w=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Ci(s,!!i.multiple,g,!1):w!==!!i.multiple&&(i.defaultValue!=null?Ci(s,!!i.multiple,i.defaultValue,!0):Ci(s,!!i.multiple,i.multiple?[]:"",!1))}s[qo]=i}catch(E){ot(t,t.return,E)}}break;case 6:if(Jn(e,t),cr(t),r&4){if(t.stateNode===null)throw Error(Z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(E){ot(t,t.return,E)}}break;case 3:if(Jn(e,t),cr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Uo(e.containerInfo)}catch(E){ot(t,t.return,E)}break;case 4:Jn(e,t),cr(t);break;case 13:Jn(e,t),cr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(nf=lt())),r&4&&t0(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(en=(c=en)||f,Jn(e,t),en=c):Jn(e,t),cr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!f&&t.mode&1)for(oe=t,f=t.child;f!==null;){for(v=oe=f;oe!==null;){switch(w=oe,g=w.child,w.tag){case 0:case 11:case 14:case 15:Co(4,w,w.return);break;case 1:Ei(w,w.return);var _=w.stateNode;if(typeof _.componentWillUnmount=="function"){r=w,n=w.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(E){ot(r,n,E)}}break;case 5:Ei(w,w.return);break;case 22:if(w.memoizedState!==null){r0(v);continue}}g!==null?(g.return=w,oe=g):r0(v)}f=f.sibling}e:for(f=null,v=t;;){if(v.tag===5){if(f===null){f=v;try{s=v.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=v.stateNode,l=v.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=zg("display",o))}catch(E){ot(t,t.return,E)}}}else if(v.tag===6){if(f===null)try{v.stateNode.nodeValue=c?"":v.memoizedProps}catch(E){ot(t,t.return,E)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;f===v&&(f=null),v=v.return}f===v&&(f=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:Jn(e,t),cr(t),r&4&&t0(t);break;case 21:break;default:Jn(e,t),cr(t)}}function cr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(py(n)){var r=n;break e}n=n.return}throw Error(Z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Po(s,""),r.flags&=-33);var i=e0(t);zd(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=e0(t);$d(t,a,o);break;default:throw Error(Z(161))}}catch(l){ot(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function N_(t,e,n){oe=t,yy(t)}function yy(t,e,n){for(var r=(t.mode&1)!==0;oe!==null;){var s=oe,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Pa;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||en;a=Pa;var c=en;if(Pa=o,(en=l)&&!c)for(oe=s;oe!==null;)o=oe,l=o.child,o.tag===22&&o.memoizedState!==null?s0(s):l!==null?(l.return=o,oe=l):s0(s);for(;i!==null;)oe=i,yy(i),i=i.sibling;oe=s,Pa=a,en=c}n0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,oe=i):n0(t)}}function n0(t){for(;oe!==null;){var e=oe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:en||hc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!en)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Zn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Fp(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Fp(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var v=f.dehydrated;v!==null&&Uo(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}en||e.flags&512&&Fd(e)}catch(w){ot(e,e.return,w)}}if(e===t){oe=null;break}if(n=e.sibling,n!==null){n.return=e.return,oe=n;break}oe=e.return}}function r0(t){for(;oe!==null;){var e=oe;if(e===t){oe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,oe=n;break}oe=e.return}}function s0(t){for(;oe!==null;){var e=oe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{hc(4,e)}catch(l){ot(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){ot(e,s,l)}}var i=e.return;try{Fd(e)}catch(l){ot(e,i,l)}break;case 5:var o=e.return;try{Fd(e)}catch(l){ot(e,o,l)}}}catch(l){ot(e,e.return,l)}if(e===t){oe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,oe=a;break}oe=e.return}}var P_=Math.ceil,jl=Lr.ReactCurrentDispatcher,ef=Lr.ReactCurrentOwner,qn=Lr.ReactCurrentBatchConfig,Re=0,Mt=null,Tt=null,Wt=0,bn=0,ki=ps(0),Nt=0,Jo=null,$s=0,fc=0,tf=0,Io=null,dn=null,nf=0,Wi=1/0,Sr=null,Nl=!1,qd=null,os=null,Oa=!1,Xr=null,Pl=0,To=0,Wd=null,cl=-1,ul=0;function an(){return Re&6?lt():cl!==-1?cl:cl=lt()}function as(t){return t.mode&1?Re&2&&Wt!==0?Wt&-Wt:y_.transition!==null?(ul===0&&(ul=tm()),ul):(t=Ie,t!==0||(t=window.event,t=t===void 0?16:lm(t.type)),t):1}function sr(t,e,n,r){if(50<To)throw To=0,Wd=null,Error(Z(185));ia(t,n,r),(!(Re&2)||t!==Mt)&&(t===Mt&&(!(Re&2)&&(fc|=n),Nt===4&&Jr(t,Wt)),yn(t,r),n===1&&Re===0&&!(e.mode&1)&&(Wi=lt()+500,cc&&gs()))}function yn(t,e){var n=t.callbackNode;yb(t,e);var r=yl(t,t===Mt?Wt:0);if(r===0)n!==null&&fp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&fp(n),e===1)t.tag===0?m_(i0.bind(null,t)):Rm(i0.bind(null,t)),h_(function(){!(Re&6)&&gs()}),n=null;else{switch(nm(r)){case 1:n=Ch;break;case 4:n=Qg;break;case 16:n=ml;break;case 536870912:n=em;break;default:n=ml}n=ky(n,wy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function wy(t,e){if(cl=-1,ul=0,Re&6)throw Error(Z(327));var n=t.callbackNode;if(Ni()&&t.callbackNode!==n)return null;var r=yl(t,t===Mt?Wt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ol(t,r);else{e=r;var s=Re;Re|=2;var i=by();(Mt!==t||Wt!==e)&&(Sr=null,Wi=lt()+500,Ps(t,e));do try{L_();break}catch(a){vy(t,a)}while(!0);$h(),jl.current=i,Re=s,Tt!==null?e=0:(Mt=null,Wt=0,e=Nt)}if(e!==0){if(e===2&&(s=yd(t),s!==0&&(r=s,e=Vd(t,s))),e===1)throw n=Jo,Ps(t,0),Jr(t,r),yn(t,lt()),n;if(e===6)Jr(t,r);else{if(s=t.current.alternate,!(r&30)&&!O_(s)&&(e=Ol(t,r),e===2&&(i=yd(t),i!==0&&(r=i,e=Vd(t,i))),e===1))throw n=Jo,Ps(t,0),Jr(t,r),yn(t,lt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Z(345));case 2:bs(t,dn,Sr);break;case 3:if(Jr(t,r),(r&130023424)===r&&(e=nf+500-lt(),10<e)){if(yl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){an(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=kd(bs.bind(null,t,dn,Sr),e);break}bs(t,dn,Sr);break;case 4:if(Jr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-rr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=lt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*P_(r/1960))-r,10<r){t.timeoutHandle=kd(bs.bind(null,t,dn,Sr),r);break}bs(t,dn,Sr);break;case 5:bs(t,dn,Sr);break;default:throw Error(Z(329))}}}return yn(t,lt()),t.callbackNode===n?wy.bind(null,t):null}function Vd(t,e){var n=Io;return t.current.memoizedState.isDehydrated&&(Ps(t,e).flags|=256),t=Ol(t,e),t!==2&&(e=dn,dn=n,e!==null&&Hd(e)),t}function Hd(t){dn===null?dn=t:dn.push.apply(dn,t)}function O_(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!ar(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Jr(t,e){for(e&=~tf,e&=~fc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-rr(e),r=1<<n;t[n]=-1,e&=~r}}function i0(t){if(Re&6)throw Error(Z(327));Ni();var e=yl(t,0);if(!(e&1))return yn(t,lt()),null;var n=Ol(t,e);if(t.tag!==0&&n===2){var r=yd(t);r!==0&&(e=r,n=Vd(t,r))}if(n===1)throw n=Jo,Ps(t,0),Jr(t,e),yn(t,lt()),n;if(n===6)throw Error(Z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,bs(t,dn,Sr),yn(t,lt()),null}function rf(t,e){var n=Re;Re|=1;try{return t(e)}finally{Re=n,Re===0&&(Wi=lt()+500,cc&&gs())}}function zs(t){Xr!==null&&Xr.tag===0&&!(Re&6)&&Ni();var e=Re;Re|=1;var n=qn.transition,r=Ie;try{if(qn.transition=null,Ie=1,t)return t()}finally{Ie=r,qn.transition=n,Re=e,!(Re&6)&&gs()}}function sf(){bn=ki.current,$e(ki)}function Ps(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,d_(n)),Tt!==null)for(n=Tt.return;n!==null;){var r=n;switch(Uh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&xl();break;case 3:zi(),$e(gn),$e(tn),Kh();break;case 5:Hh(r);break;case 4:zi();break;case 13:$e(Ge);break;case 19:$e(Ge);break;case 10:zh(r.type._context);break;case 22:case 23:sf()}n=n.return}if(Mt=t,Tt=t=ls(t.current,null),Wt=bn=e,Nt=0,Jo=null,tf=fc=$s=0,dn=Io=null,Cs!==null){for(e=0;e<Cs.length;e++)if(n=Cs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Cs=null}return t}function vy(t,e){do{var n=Tt;try{if($h(),ol.current=Bl,Tl){for(var r=Ye.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Tl=!1}if(Fs=0,Ot=jt=Ye=null,Ro=!1,Ho=0,ef.current=null,n===null||n.return===null){Nt=1,Jo=e,Tt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Wt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,f=a,v=f.tag;if(!(f.mode&1)&&(v===0||v===11||v===15)){var w=f.alternate;w?(f.updateQueue=w.updateQueue,f.memoizedState=w.memoizedState,f.lanes=w.lanes):(f.updateQueue=null,f.memoizedState=null)}var g=Hp(o);if(g!==null){g.flags&=-257,Kp(g,o,a,i,e),g.mode&1&&Vp(i,c,e),e=g,l=c;var _=e.updateQueue;if(_===null){var E=new Set;E.add(l),e.updateQueue=E}else _.add(l);break e}else{if(!(e&1)){Vp(i,c,e),of();break e}l=Error(Z(426))}}else if(Ve&&a.mode&1){var C=Hp(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Kp(C,o,a,i,e),Dh(qi(l,a));break e}}i=l=qi(l,a),Nt!==4&&(Nt=2),Io===null?Io=[i]:Io.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=ny(i,l,e);Dp(i,b);break e;case 1:a=l;var S=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof S.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(os===null||!os.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var O=ry(i,a,e);Dp(i,O);break e}}i=i.return}while(i!==null)}xy(n)}catch(L){e=L,Tt===n&&n!==null&&(Tt=n=n.return);continue}break}while(!0)}function by(){var t=jl.current;return jl.current=Bl,t===null?Bl:t}function of(){(Nt===0||Nt===3||Nt===2)&&(Nt=4),Mt===null||!($s&268435455)&&!(fc&268435455)||Jr(Mt,Wt)}function Ol(t,e){var n=Re;Re|=2;var r=by();(Mt!==t||Wt!==e)&&(Sr=null,Ps(t,e));do try{M_();break}catch(s){vy(t,s)}while(!0);if($h(),Re=n,jl.current=r,Tt!==null)throw Error(Z(261));return Mt=null,Wt=0,Nt}function M_(){for(;Tt!==null;)_y(Tt)}function L_(){for(;Tt!==null&&!lb();)_y(Tt)}function _y(t){var e=Ey(t.alternate,t,bn);t.memoizedProps=t.pendingProps,e===null?xy(t):Tt=e,ef.current=null}function xy(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=T_(n,e),n!==null){n.flags&=32767,Tt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Nt=6,Tt=null;return}}else if(n=I_(n,e,bn),n!==null){Tt=n;return}if(e=e.sibling,e!==null){Tt=e;return}Tt=e=t}while(e!==null);Nt===0&&(Nt=5)}function bs(t,e,n){var r=Ie,s=qn.transition;try{qn.transition=null,Ie=1,U_(t,e,n,r)}finally{qn.transition=s,Ie=r}return null}function U_(t,e,n,r){do Ni();while(Xr!==null);if(Re&6)throw Error(Z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(wb(t,i),t===Mt&&(Tt=Mt=null,Wt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Oa||(Oa=!0,ky(ml,function(){return Ni(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=qn.transition,qn.transition=null;var o=Ie;Ie=1;var a=Re;Re|=4,ef.current=null,j_(t,n),my(n,t),s_(Sd),wl=!!xd,Sd=xd=null,t.current=n,N_(n),cb(),Re=a,Ie=o,qn.transition=i}else t.current=n;if(Oa&&(Oa=!1,Xr=t,Pl=s),i=t.pendingLanes,i===0&&(os=null),hb(n.stateNode),yn(t,lt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Nl)throw Nl=!1,t=qd,qd=null,t;return Pl&1&&t.tag!==0&&Ni(),i=t.pendingLanes,i&1?t===Wd?To++:(To=0,Wd=t):To=0,gs(),null}function Ni(){if(Xr!==null){var t=nm(Pl),e=qn.transition,n=Ie;try{if(qn.transition=null,Ie=16>t?16:t,Xr===null)var r=!1;else{if(t=Xr,Xr=null,Pl=0,Re&6)throw Error(Z(331));var s=Re;for(Re|=4,oe=t.current;oe!==null;){var i=oe,o=i.child;if(oe.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(oe=c;oe!==null;){var f=oe;switch(f.tag){case 0:case 11:case 15:Co(8,f,i)}var v=f.child;if(v!==null)v.return=f,oe=v;else for(;oe!==null;){f=oe;var w=f.sibling,g=f.return;if(fy(f),f===c){oe=null;break}if(w!==null){w.return=g,oe=w;break}oe=g}}}var _=i.alternate;if(_!==null){var E=_.child;if(E!==null){_.child=null;do{var C=E.sibling;E.sibling=null,E=C}while(E!==null)}}oe=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,oe=o;else e:for(;oe!==null;){if(i=oe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Co(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,oe=b;break e}oe=i.return}}var S=t.current;for(oe=S;oe!==null;){o=oe;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,oe=x;else e:for(o=S;oe!==null;){if(a=oe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:hc(9,a)}}catch(L){ot(a,a.return,L)}if(a===o){oe=null;break e}var O=a.sibling;if(O!==null){O.return=a.return,oe=O;break e}oe=a.return}}if(Re=s,gs(),gr&&typeof gr.onPostCommitFiberRoot=="function")try{gr.onPostCommitFiberRoot(sc,t)}catch{}r=!0}return r}finally{Ie=n,qn.transition=e}}return!1}function o0(t,e,n){e=qi(n,e),e=ny(t,e,1),t=is(t,e,1),e=an(),t!==null&&(ia(t,1,e),yn(t,e))}function ot(t,e,n){if(t.tag===3)o0(t,t,n);else for(;e!==null;){if(e.tag===3){o0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(os===null||!os.has(r))){t=qi(n,t),t=ry(e,t,1),e=is(e,t,1),t=an(),e!==null&&(ia(e,1,t),yn(e,t));break}}e=e.return}}function D_(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=an(),t.pingedLanes|=t.suspendedLanes&n,Mt===t&&(Wt&n)===n&&(Nt===4||Nt===3&&(Wt&130023424)===Wt&&500>lt()-nf?Ps(t,0):tf|=n),yn(t,e)}function Sy(t,e){e===0&&(t.mode&1?(e=ka,ka<<=1,!(ka&130023424)&&(ka=4194304)):e=1);var n=an();t=Or(t,e),t!==null&&(ia(t,e,n),yn(t,n))}function F_(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Sy(t,n)}function $_(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Z(314))}r!==null&&r.delete(e),Sy(t,n)}var Ey;Ey=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||gn.current)fn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return fn=!1,C_(t,e,n);fn=!!(t.flags&131072)}else fn=!1,Ve&&e.flags&1048576&&Cm(e,kl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ll(t,e),t=e.pendingProps;var s=Di(e,tn.current);ji(e,n),s=Jh(null,e,r,t,s,n);var i=Yh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mn(r)?(i=!0,Sl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Wh(e),s.updater=dc,e.stateNode=s,s._reactInternals=e,jd(e,r,t,n),e=Od(null,e,r,!0,i,n)):(e.tag=0,Ve&&i&&Lh(e),nn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ll(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=q_(r),t=Zn(r,t),s){case 0:e=Pd(null,e,r,t,n);break e;case 1:e=Yp(null,e,r,t,n);break e;case 11:e=Gp(null,e,r,t,n);break e;case 14:e=Jp(null,e,r,Zn(r.type,t),n);break e}throw Error(Z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zn(r,s),Pd(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zn(r,s),Yp(t,e,r,s,n);case 3:e:{if(ay(e),t===null)throw Error(Z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Pm(t,e),Cl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=qi(Error(Z(423)),e),e=Zp(t,e,r,n,s);break e}else if(r!==s){s=qi(Error(Z(424)),e),e=Zp(t,e,r,n,s);break e}else for(En=ss(e.stateNode.containerInfo.firstChild),kn=e,Ve=!0,tr=null,n=jm(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fi(),r===s){e=Mr(t,e,n);break e}nn(t,e,r,n)}e=e.child}return e;case 5:return Om(e),t===null&&Id(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ed(r,s)?o=null:i!==null&&Ed(r,i)&&(e.flags|=32),oy(t,e),nn(t,e,o,n),e.child;case 6:return t===null&&Id(e),null;case 13:return ly(t,e,n);case 4:return Vh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=$i(e,null,r,n):nn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zn(r,s),Gp(t,e,r,s,n);case 7:return nn(t,e,e.pendingProps,n),e.child;case 8:return nn(t,e,e.pendingProps.children,n),e.child;case 12:return nn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Le(Al,r._currentValue),r._currentValue=o,i!==null)if(ar(i.value,o)){if(i.children===s.children&&!gn.current){e=Mr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=jr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?l.next=l:(l.next=f.next,f.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Td(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Z(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Td(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}nn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ji(e,n),s=Vn(s),r=r(s),e.flags|=1,nn(t,e,r,n),e.child;case 14:return r=e.type,s=Zn(r,e.pendingProps),s=Zn(r.type,s),Jp(t,e,r,s,n);case 15:return sy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zn(r,s),ll(t,e),e.tag=1,mn(r)?(t=!0,Sl(e)):t=!1,ji(e,n),ty(e,r,s),jd(e,r,s,n),Od(null,e,r,!0,t,n);case 19:return cy(t,e,n);case 22:return iy(t,e,n)}throw Error(Z(156,e.tag))};function ky(t,e){return Xg(t,e)}function z_(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zn(t,e,n,r){return new z_(t,e,n,r)}function af(t){return t=t.prototype,!(!t||!t.isReactComponent)}function q_(t){if(typeof t=="function")return af(t)?1:0;if(t!=null){if(t=t.$$typeof,t===kh)return 11;if(t===Ah)return 14}return 2}function ls(t,e){var n=t.alternate;return n===null?(n=zn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function dl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")af(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case gi:return Os(n.children,s,i,e);case Eh:o=8,s|=8;break;case nd:return t=zn(12,n,e,s|2),t.elementType=nd,t.lanes=i,t;case rd:return t=zn(13,n,e,s),t.elementType=rd,t.lanes=i,t;case sd:return t=zn(19,n,e,s),t.elementType=sd,t.lanes=i,t;case Og:return pc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ng:o=10;break e;case Pg:o=9;break e;case kh:o=11;break e;case Ah:o=14;break e;case Hr:o=16,r=null;break e}throw Error(Z(130,t==null?t:typeof t,""))}return e=zn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Os(t,e,n,r){return t=zn(7,t,r,e),t.lanes=n,t}function pc(t,e,n,r){return t=zn(22,t,r,e),t.elementType=Og,t.lanes=n,t.stateNode={isHidden:!1},t}function _u(t,e,n){return t=zn(6,t,null,e),t.lanes=n,t}function xu(t,e,n){return e=zn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function W_(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nu(0),this.expirationTimes=nu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function lf(t,e,n,r,s,i,o,a,l){return t=new W_(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=zn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wh(i),t}function V_(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Ay(t){if(!t)return ds;t=t._reactInternals;e:{if(Vs(t)!==t||t.tag!==1)throw Error(Z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Z(171))}if(t.tag===1){var n=t.type;if(mn(n))return Am(t,n,e)}return e}function Ry(t,e,n,r,s,i,o,a,l){return t=lf(n,r,!0,t,s,i,o,a,l),t.context=Ay(null),n=t.current,r=an(),s=as(n),i=jr(r,s),i.callback=e??null,is(n,i,s),t.current.lanes=s,ia(t,s,r),yn(t,r),t}function gc(t,e,n,r){var s=e.current,i=an(),o=as(s);return n=Ay(n),e.context===null?e.context=n:e.pendingContext=n,e=jr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=is(s,e,o),t!==null&&(sr(t,s,o,i),il(t,s,o)),o}function Ml(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function a0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function cf(t,e){a0(t,e),(t=t.alternate)&&a0(t,e)}function H_(){return null}var Cy=typeof reportError=="function"?reportError:function(t){console.error(t)};function uf(t){this._internalRoot=t}mc.prototype.render=uf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Z(409));gc(t,e,null,null)};mc.prototype.unmount=uf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;zs(function(){gc(null,t,null,null)}),e[Pr]=null}};function mc(t){this._internalRoot=t}mc.prototype.unstable_scheduleHydration=function(t){if(t){var e=im();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Gr.length&&e!==0&&e<Gr[n].priority;n++);Gr.splice(n,0,t),n===0&&am(t)}};function df(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function yc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function l0(){}function K_(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Ml(o);i.call(c)}}var o=Ry(e,r,t,0,null,!1,!1,"",l0);return t._reactRootContainer=o,t[Pr]=o.current,$o(t.nodeType===8?t.parentNode:t),zs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Ml(l);a.call(c)}}var l=lf(t,0,!1,null,null,!1,!1,"",l0);return t._reactRootContainer=l,t[Pr]=l.current,$o(t.nodeType===8?t.parentNode:t),zs(function(){gc(e,l,n,r)}),l}function wc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Ml(o);a.call(l)}}gc(e,o,t,s)}else o=K_(n,e,t,s,r);return Ml(o)}rm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=wo(e.pendingLanes);n!==0&&(Ih(e,n|1),yn(e,lt()),!(Re&6)&&(Wi=lt()+500,gs()))}break;case 13:zs(function(){var r=Or(t,1);if(r!==null){var s=an();sr(r,t,1,s)}}),cf(t,1)}};Th=function(t){if(t.tag===13){var e=Or(t,134217728);if(e!==null){var n=an();sr(e,t,134217728,n)}cf(t,134217728)}};sm=function(t){if(t.tag===13){var e=as(t),n=Or(t,e);if(n!==null){var r=an();sr(n,t,e,r)}cf(t,e)}};im=function(){return Ie};om=function(t,e){var n=Ie;try{return Ie=t,e()}finally{Ie=n}};pd=function(t,e,n){switch(e){case"input":if(ad(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=lc(r);if(!s)throw Error(Z(90));Lg(r),ad(r,s)}}}break;case"textarea":Dg(t,n);break;case"select":e=n.value,e!=null&&Ci(t,!!n.multiple,e,!1)}};Hg=rf;Kg=zs;var G_={usingClientEntryPoint:!1,Events:[aa,vi,lc,Wg,Vg,rf]},po={findFiberByHostInstance:Rs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},J_={bundleType:po.bundleType,version:po.version,rendererPackageName:po.rendererPackageName,rendererConfig:po.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Lr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Yg(t),t===null?null:t.stateNode},findFiberByHostInstance:po.findFiberByHostInstance||H_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ma=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ma.isDisabled&&Ma.supportsFiber)try{sc=Ma.inject(J_),gr=Ma}catch{}}Rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G_;Rn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!df(e))throw Error(Z(200));return V_(t,e,null,n)};Rn.createRoot=function(t,e){if(!df(t))throw Error(Z(299));var n=!1,r="",s=Cy;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=lf(t,1,!1,null,null,n,!1,r,s),t[Pr]=e.current,$o(t.nodeType===8?t.parentNode:t),new uf(e)};Rn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Z(188)):(t=Object.keys(t).join(","),Error(Z(268,t)));return t=Yg(e),t=t===null?null:t.stateNode,t};Rn.flushSync=function(t){return zs(t)};Rn.hydrate=function(t,e,n){if(!yc(e))throw Error(Z(200));return wc(null,t,e,!0,n)};Rn.hydrateRoot=function(t,e,n){if(!df(t))throw Error(Z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Cy;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Ry(e,null,t,1,n??null,s,!1,i,o),t[Pr]=e.current,$o(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new mc(e)};Rn.render=function(t,e,n){if(!yc(e))throw Error(Z(200));return wc(null,t,e,!1,n)};Rn.unmountComponentAtNode=function(t){if(!yc(t))throw Error(Z(40));return t._reactRootContainer?(zs(function(){wc(null,null,t,!1,function(){t._reactRootContainer=null,t[Pr]=null})}),!0):!1};Rn.unstable_batchedUpdates=rf;Rn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!yc(n))throw Error(Z(200));if(t==null||t._reactInternals===void 0)throw Error(Z(38));return wc(t,e,n,!1,r)};Rn.version="18.3.1-next-f1338f8080-20240426";function Iy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Iy)}catch(t){console.error(t)}}Iy(),Ig.exports=Rn;var Y_=Ig.exports,c0=Y_;ed.createRoot=c0.createRoot,ed.hydrateRoot=c0.hydrateRoot;const Z_={"nav.features":{en:"Features",fr:"Fonctionnalits",th:""},"nav.countries":{en:"Countries",fr:"Pays",th:""},"nav.contact":{en:"Contact",fr:"Contact",th:""},"nav.getStarted":{en:"Get Started",fr:"Commencer",th:""},"nav.signOut":{en:"Sign Out",fr:"Se dconnecter",th:""},"nav.comingSoon":{en:"Coming soon",fr:"Bientt disponible",th:" "},"nav.contactUs":{en:"Contact Us",fr:"Nous contacter",th:""},"hero.title":{en:"Transfer Money Globally",fr:"Transfrer de l'argent dans le monde entier",th:""},"hero.subtitle":{en:"With Crypto Speed",fr:"Avec la vitesse crypto",th:""},"hero.description":{en:"Send money to France, America, and Thailand instantly using cryptocurrency. Fast, secure, and transparent international transfers.",fr:"Envoyez de l'argent en France, en Amrique et en Thalande instantanment en utilisant la crypto-monnaie. Transferts internationaux rapides, scuriss et transparents.",th:"     "},"hero.startTransfer":{en:"Start Transfer",fr:"Commencer le transfert",th:""},"hero.learnMore":{en:"Learn More",fr:"En savoir plus",th:""},"dashboard.title":{en:"Dashboard",fr:"Tableau de bord",th:""},"dashboard.transactions":{en:"Transactions",fr:"Transactions",th:""},"dashboard.settings":{en:"Settings",fr:"Paramtres",th:""},"dashboard.liveRates":{en:"Live Exchange Rates",fr:"Taux de change en direct",th:""},"dashboard.sendMoney":{en:"Send Money",fr:"Envoyer de l'argent",th:""},"dashboard.connectedAccounts":{en:"Connected Accounts",fr:"Comptes connects",th:""},"rates.loading":{en:"Loading exchange rates...",fr:"Chargement des taux de change...",th:"..."},"rates.lastUpdate":{en:"Last updated:",fr:"Dernire mise  jour:",th:":"},"transfer.cryptoTransfer":{en:"Crypto Transfer",fr:"Transfert crypto",th:""},"transfer.bankTransfer":{en:"Bank Transfer",fr:"Virement bancaire",th:""},"transfer.from":{en:"From",fr:"De",th:""},"transfer.selectSource":{en:"Select source",fr:"Slectionner la source",th:""},"transfer.to":{en:"To Wallet Address",fr:"Vers l'adresse du portefeuille",th:""},"transfer.toAccount":{en:"To Account",fr:"Vers le compte",th:""},"transfer.toPlaceholder":{en:"Account number or email",fr:"Numro de compte ou email",th:""},"transfer.amount":{en:"Amount",fr:"Montant",th:""},"transfer.currency":{en:"Currency",fr:"Devise",th:""},"transfer.send":{en:"Send Transfer",fr:"Envoyer",th:""},"transfer.processing":{en:"Processing...",fr:"Traitement en cours...",th:"..."},"transfer.success":{en:"Transfer initiated successfully!",fr:"Transfert initi avec succs!",th:"!"},"transfer.networkFee":{en:"Network Fee:",fr:"Frais de rseau:",th:":"},"transfer.estimatedTime":{en:"Estimated Time:",fr:"Temps estim:",th:":"},"wallet.title":{en:"Crypto Wallets",fr:"Portefeuilles crypto",th:""},"wallet.addWallet":{en:"+ Add Wallet",fr:"+ Ajouter un portefeuille",th:"+ "},"wallet.cancel":{en:"Cancel",fr:"Annuler",th:""},"wallet.connect":{en:"Connect Wallet",fr:"Connecter le portefeuille",th:""},"wallet.adding":{en:"Adding...",fr:"Ajout en cours...",th:"..."},"wallet.noWallets":{en:"No wallets connected",fr:"Aucun portefeuille connect",th:""},"wallet.type":{en:"Wallet Type",fr:"Type de portefeuille",th:""},"wallet.address":{en:"Wallet Address",fr:"Adresse du portefeuille",th:""},"bank.title":{en:"Bank Accounts",fr:"Comptes bancaires",th:""},"bank.addBank":{en:"+ Add Bank",fr:"+ Ajouter une banque",th:"+ "},"bank.connect":{en:"Connect Bank Account",fr:"Connecter le compte bancaire",th:""},"bank.adding":{en:"Adding...",fr:"Ajout en cours...",th:"..."},"bank.noAccounts":{en:"No bank accounts connected",fr:"Aucun compte bancaire connect",th:""},"bank.name":{en:"Bank Name",fr:"Nom de la banque",th:""},"bank.namePlaceholder":{en:"e.g., Chase, Bank of America",fr:"ex. BNP Paribas, Crdit Agricole",th:" , "},"bank.accountType":{en:"Account Type",fr:"Type de compte",th:""},"bank.checking":{en:"Checking",fr:"Courant",th:""},"bank.savings":{en:"Savings",fr:"pargne",th:""},"bank.accountNumber":{en:"Account Number",fr:"Numro de compte",th:""},"bank.accountPlaceholder":{en:"Enter account number",fr:"Entrez le numro de compte",th:""},"bank.securityNote":{en:"Only last 4 digits will be stored",fr:"Seuls les 4 derniers chiffres seront stocks",th:" 4 "},"common.remove":{en:"Remove",fr:"Supprimer",th:""},"features.title":{en:"Why Choose CoinVoy",fr:"Pourquoi choisir CoinVoy",th:" CoinVoy"},"features.fast.title":{en:"Lightning Fast",fr:"Ultra Rapide",th:""},"features.fast.description":{en:"Complete transfers in minutes, not days. Cryptocurrency enables instant cross-border transactions.",fr:"Effectuez des transferts en quelques minutes, pas en jours. La crypto-monnaie permet des transactions transfrontalires instantanes.",th:"  "},"features.lowFees.title":{en:"Low Fees",fr:"Frais rduits",th:""},"features.lowFees.description":{en:"Save on traditional banking fees. Our crypto-powered system keeps costs minimal.",fr:"conomisez sur les frais bancaires traditionnels. Notre systme aliment par la crypto maintient les cots au minimum.",th:" "},"features.secure.title":{en:"Secure & Transparent",fr:"Scuris et transparent",th:""},"features.secure.description":{en:"Track your transfer in real-time. Blockchain technology ensures security and transparency.",fr:"Suivez votre transfert en temps rel. La technologie blockchain garantit scurit et transparence.",th:" "},"features.simple.title":{en:"Simple Process",fr:"Processus simple",th:""},"features.simple.description":{en:"Easy to use interface. Send money in three simple steps without technical knowledge.",fr:"Interface facile  utiliser. Envoyez de l'argent en trois tapes simples sans connaissances techniques.",th:"  3  "},"countries.title":{en:"Supported Countries",fr:"Pays pris en charge",th:""},"countries.subtitle":{en:"Send money to these countries with ease",fr:"Envoyez de l'argent vers ces pays en toute simplicit",th:""},"countries.france.description":{en:"Fast transfers to all major French banks",fr:"Transferts rapides vers toutes les grandes banques franaises",th:""},"countries.usa.description":{en:"Instant deposits across the United States",fr:"Dpts instantans dans tous les tats-Unis",th:""},"countries.thailand.description":{en:"Quick and reliable transfers throughout Thailand",fr:"Transferts rapides et fiables dans toute la Thalande",th:""},"contact.title":{en:"Contact Us",fr:"Nous contacter",th:""},"contact.description":{en:"Fill out the form below and we'll get back to you soon.",fr:"Remplissez le formulaire ci-dessous et nous vous recontacterons bientt.",th:""},"contact.email":{en:"Email",fr:"Email",th:""},"contact.emailPlaceholder":{en:"your@email.com",fr:"votre@email.com",th:"email@.com"},"contact.phone":{en:"Phone Number",fr:"Numro de tlphone",th:""},"contact.phonePlaceholder":{en:"+1 (555) 000-0000",fr:"+33 6 00 00 00 00",th:"+66 8 0000 0000"},"contact.notes":{en:"Notes",fr:"Notes",th:""},"contact.notesPlaceholder":{en:"Tell us how we can help you...",fr:"Dites-nous comment nous pouvons vous aider...",th:"..."},"contact.sending":{en:"Sending...",fr:"Envoi en cours...",th:"..."},"contact.sendMessage":{en:"Send Message",fr:"Envoyer le message",th:""},"contact.success":{en:"Thank you! We'll be in touch soon.",fr:"Merci! Nous vous contacterons bientt.",th:"! "},"contact.error":{en:"Something went wrong. Please try again.",fr:"Quelque chose s'est mal pass. Veuillez ressayer.",th:" "},"cta.title":{en:"Ready to Start Transferring?",fr:"Prt  commencer les transferts?",th:"?"},"cta.description":{en:"Join thousands of users who trust CoinVoy for their international money transfers. Get started today and experience the future of cross-border payments.",fr:"Rejoignez des milliers d'utilisateurs qui font confiance  CoinVoy pour leurs transferts d'argent internationaux. Commencez aujourd'hui et dcouvrez l'avenir des paiements transfrontaliers.",th:" CoinVoy  "},"cta.button":{en:"Get Started Now",fr:"Commencer maintenant",th:""},"footer.privacy":{en:"Privacy Policy",fr:"Politique de confidentialit",th:""},"footer.terms":{en:"Terms of Service",fr:"Conditions d'utilisation",th:""},"footer.support":{en:"Support",fr:"Assistance",th:""},"footer.copyright":{en:" 2025 CoinVoy. All rights reserved.",fr:" 2025 CoinVoy. Tous droits rservs.",th:" 2025 CoinVoy "},"featuresNew.title":{en:"Powerful Features",fr:"Fonctionnalits puissantes",th:""},"featuresNew.description":{en:"Everything you need to manage your money globally",fr:"Tout ce dont vous avez besoin pour grer votre argent dans le monde entier",th:""},"featuresNew.instantTransfers.title":{en:"Instant Transfers",fr:"Transferts instantans",th:""},"featuresNew.instantTransfers.description":{en:"Send money globally in seconds with our lightning-fast transfer system. No more waiting days for your money to arrive.",fr:"Envoyez de l'argent dans le monde entier en quelques secondes avec notre systme de transfert ultra-rapide. Plus besoin d'attendre des jours pour que votre argent arrive.",th:" "},"featuresNew.multiCurrency.title":{en:"Multi-Currency Support",fr:"Prise en charge multi-devises",th:""},"featuresNew.multiCurrency.description":{en:"Support for over 150 currencies worldwide. Exchange between currencies with competitive rates instantly.",fr:"Prise en charge de plus de 150 devises dans le monde. changez entre devises avec des taux comptitifs instantanment.",th:" 150  "},"featuresNew.bankIntegration.title":{en:"Bank Integration",fr:"Intgration bancaire",th:""},"featuresNew.bankIntegration.description":{en:"Connect your bank accounts seamlessly. Link multiple accounts and manage all your finances in one place.",fr:"Connectez vos comptes bancaires en toute transparence. Liez plusieurs comptes et grez toutes vos finances en un seul endroit.",th:" "},"featuresNew.cryptoWallets.title":{en:"Crypto Wallets",fr:"Portefeuilles crypto",th:""},"featuresNew.cryptoWallets.description":{en:"Store and manage your cryptocurrency safely. Support for Bitcoin, Ethereum, and other major cryptocurrencies.",fr:"Stockez et grez votre crypto-monnaie en toute scurit. Prise en charge de Bitcoin, Ethereum et d'autres crypto-monnaies majeures.",th:"  Bitcoin, Ethereum "},"featuresNew.realTimeRates.title":{en:"Real-Time Exchange Rates",fr:"Taux de change en temps rel",th:""},"featuresNew.realTimeRates.description":{en:"Get live exchange rates updated every minute. Always know the exact amount you will receive.",fr:"Obtenez des taux de change en direct mis  jour chaque minute. Sachez toujours le montant exact que vous recevrez.",th:" "},"featuresNew.secureTransactions.title":{en:"Secure Transactions",fr:"Transactions scurises",th:""},"featuresNew.secureTransactions.description":{en:"Bank-level security with end-to-end encryption. Your money and data are always protected.",fr:"Scurit de niveau bancaire avec cryptage de bout en bout. Votre argent et vos donnes sont toujours protgs.",th:" "},"auth.createAccount":{en:"Create Account",fr:"Crer un compte",th:""},"auth.welcomeBack":{en:"Welcome Back",fr:"Bon retour",th:""},"auth.signUpDescription":{en:"Sign up to start transferring money globally",fr:"Inscrivez-vous pour commencer  transfrer de l'argent dans le monde entier",th:""},"auth.signInDescription":{en:"Sign in to continue your transfers",fr:"Connectez-vous pour continuer vos transferts",th:""},"auth.email":{en:"Email",fr:"Email",th:""},"auth.emailPlaceholder":{en:"your@email.com",fr:"votre@email.com",th:"@.com"},"auth.password":{en:"Password",fr:"Mot de passe",th:""},"auth.passwordPlaceholder":{en:"",fr:"",th:""},"auth.confirmPassword":{en:"Confirm Password",fr:"Confirmer le mot de passe",th:""},"auth.processing":{en:"Processing...",fr:"Traitement en cours...",th:"..."},"auth.signIn":{en:"Sign In",fr:"Se connecter",th:""},"auth.signUp":{en:"Sign Up",fr:"S'inscrire",th:""},"auth.alreadyHaveAccount":{en:"Already have an account?",fr:"Vous avez dj un compte?",th:"?"},"auth.dontHaveAccount":{en:"Don't have an account?",fr:"Vous n'avez pas de compte?",th:"?"},"auth.backHome":{en:" Back to Home",fr:" Retour  l'accueil",th:" "},"auth.passwordsDoNotMatch":{en:"Passwords do not match",fr:"Les mots de passe ne correspondent pas",th:""},"auth.accountCreated":{en:"Account created successfully!",fr:"Compte cr avec succs!",th:"!"},"auth.networkError":{en:"Network error. Please try again.",fr:"Erreur rseau. Veuillez ressayer.",th:" "}},Ty=G.createContext(void 0);function X_({children:t}){const[e,n]=G.useState(()=>localStorage.getItem("language")||"en");G.useEffect(()=>{localStorage.setItem("language",e)},[e]);const r=i=>{n(i)},s=i=>{var o;return((o=Z_[i])==null?void 0:o[e])||i};return p.jsx(Ty.Provider,{value:{language:e,setLanguage:r,t:s},children:t})}function Kn(){const t=G.useContext(Ty);if(t===void 0)throw new Error("useLanguage must be used within a LanguageProvider");return t}function Q_({onClose:t}){const{t:e}=Kn(),[n,r]=G.useState(""),[s,i]=G.useState(""),[o,a]=G.useState(""),[l,c]=G.useState(!1),[f,v]=G.useState("idle"),w=async g=>{g.preventDefault(),c(!0),v("idle");try{(await fetch("https://oiprgbmrbffoqvdidnrg.supabase.co/rest/v1/contact_submissions",{method:"POST",headers:{"Content-Type":"application/json",apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9pcHJnYm1yYmZmb3F2ZGlkbnJnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ3OTA2MDcsImV4cCI6MjA4MDM2NjYwN30.WmPh8IR_2VfPnREx2ZxeBrSD1orWMJqqdBYUitwkwxc",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9pcHJnYm1yYmZmb3F2ZGlkbnJnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ3OTA2MDcsImV4cCI6MjA4MDM2NjYwN30.WmPh8IR_2VfPnREx2ZxeBrSD1orWMJqqdBYUitwkwxc"},body:JSON.stringify({email:n,phone:s,notes:o})})).ok?(v("success"),setTimeout(()=>{t()},2e3)):v("error")}catch{v("error")}finally{c(!1)}};return p.jsx("div",{className:"contact-modal-overlay",onClick:t,children:p.jsxs("div",{className:"contact-modal glass-card",onClick:g=>g.stopPropagation(),children:[p.jsx("button",{className:"modal-close",onClick:t,children:""}),p.jsx("h2",{className:"modal-title",children:e("contact.title")}),p.jsx("p",{className:"modal-description",children:e("contact.description")}),p.jsxs("form",{onSubmit:w,className:"contact-form",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"email",children:e("contact.email")}),p.jsx("input",{type:"email",id:"email",value:n,onChange:g=>r(g.target.value),required:!0,placeholder:e("contact.emailPlaceholder")})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"phone",children:e("contact.phone")}),p.jsx("input",{type:"tel",id:"phone",value:s,onChange:g=>i(g.target.value),required:!0,placeholder:e("contact.phonePlaceholder")})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"notes",children:e("contact.notes")}),p.jsx("textarea",{id:"notes",value:o,onChange:g=>a(g.target.value),required:!0,placeholder:e("contact.notesPlaceholder"),rows:5})]}),f==="success"&&p.jsx("div",{className:"submit-message success",children:e("contact.success")}),f==="error"&&p.jsx("div",{className:"submit-message error",children:e("contact.error")}),p.jsx("button",{type:"submit",className:"submit-button",disabled:l,children:e(l?"contact.sending":"contact.sendMessage")})]})]})})}function ex({onNavigateToAuth:t}){const{t:e,setLanguage:n}=Kn(),[r,s]=G.useState(!1),i=G.useRef(null),o=G.useRef(null),[a,l]=G.useState({x:0,y:0}),[c,f]=G.useState({x:0,y:0}),[v,w]=G.useState(null),[g,_]=G.useState(!1),E=[{code:"en",name:"English",flag:""},{code:"fr",name:"Franais",flag:""},{code:"th",name:"",flag:""}];G.useEffect(()=>{const S=()=>{_(window.scrollY>20)};return window.addEventListener("scroll",S),()=>window.removeEventListener("scroll",S)},[]);const C=S=>{if(!i.current)return;const x=i.current.getBoundingClientRect(),O=S.clientX-x.left,L=S.clientY-x.top;l({x:O,y:L})},b=S=>{if(!o.current)return;const x=o.current.getBoundingClientRect(),O=S.clientX-x.left,L=S.clientY-x.top;f({x:O,y:L})};return p.jsxs("section",{className:"hero",children:[p.jsx("nav",{className:`nav ${g?"nav-scrolled":""}`,children:p.jsxs("div",{className:"nav-container",children:[p.jsx("div",{className:"logo",children:"CoinVoy"}),p.jsxs("div",{className:"nav-links",children:[p.jsxs("div",{className:"nav-dropdown",onMouseEnter:()=>w("contact"),onMouseLeave:()=>w(null),children:[p.jsx("button",{className:"nav-link-button",children:e("nav.contact")}),v==="contact"&&p.jsx("div",{className:"dropdown-menu",children:p.jsx("button",{className:"dropdown-item",onClick:()=>s(!0),children:e("nav.contactUs")})})]}),p.jsxs("div",{className:"nav-dropdown",onMouseEnter:()=>w("language"),onMouseLeave:()=>w(null),children:[p.jsx("button",{className:"nav-link-button language-icon-button",children:p.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("circle",{cx:"12",cy:"12",r:"10"}),p.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),p.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]})}),v==="language"&&p.jsx("div",{className:"dropdown-menu",children:E.map(S=>p.jsxs("button",{className:"dropdown-item",onClick:()=>n(S.code),children:[p.jsx("span",{className:"dropdown-flag",children:S.flag}),S.name]},S.code))})]}),p.jsx("button",{ref:o,className:"nav-button",onClick:t,onMouseMove:b,style:{"--x":`${c.x}px`,"--y":`${c.y}px`},children:e("nav.getStarted")})]})]})}),p.jsxs("div",{className:"hero-content",children:[p.jsxs("h1",{className:"hero-title",children:[e("hero.title"),p.jsx("br",{}),p.jsx("span",{className:"gradient-text",children:e("hero.subtitle")})]}),p.jsx("p",{className:"hero-description",children:e("hero.description")}),p.jsxs("div",{className:"hero-buttons",children:[p.jsx("button",{ref:i,className:"primary-button",onClick:t,onMouseMove:C,style:{"--x":`${a.x}px`,"--y":`${a.y}px`},children:e("hero.startTransfer")}),p.jsx("button",{className:"secondary-button glass-card",onClick:()=>{const S=document.querySelector(".features");S&&S.scrollIntoView({behavior:"smooth",block:"start"})},children:e("hero.learnMore")})]})]}),r&&p.jsx(Q_,{onClose:()=>s(!1)})]})}function tx(){const{t}=Kn(),e=[{title:t("featuresNew.instantTransfers.title"),description:t("featuresNew.instantTransfers.description")},{title:t("featuresNew.multiCurrency.title"),description:t("featuresNew.multiCurrency.description")},{title:t("featuresNew.bankIntegration.title"),description:t("featuresNew.bankIntegration.description")},{title:t("featuresNew.cryptoWallets.title"),description:t("featuresNew.cryptoWallets.description")},{title:t("featuresNew.realTimeRates.title"),description:t("featuresNew.realTimeRates.description")},{title:t("featuresNew.secureTransactions.title"),description:t("featuresNew.secureTransactions.description")}],n=G.useRef([]),[r,s]=G.useState(e.map(()=>({x:0,y:0}))),i=(o,a)=>{const l=n.current[a];if(!l)return;const c=l.getBoundingClientRect(),f=o.clientX-c.left,v=o.clientY-c.top;s(w=>{const g=[...w];return g[a]={x:f,y:v},g})};return p.jsx("section",{id:"features",className:"features",children:p.jsxs("div",{className:"features-container",children:[p.jsx("h2",{className:"section-title",children:t("featuresNew.title")}),p.jsx("p",{className:"section-description",children:t("featuresNew.description")}),p.jsx("div",{className:"features-grid",children:e.map((o,a)=>p.jsxs("div",{ref:l=>n.current[a]=l,className:"feature-card glass-card",onMouseMove:l=>i(l,a),style:{"--x":`${r[a].x}px`,"--y":`${r[a].y}px`},children:[p.jsx("h3",{className:"feature-title",children:o.title}),p.jsx("p",{className:"feature-description",children:o.description})]},a))})]})})}function nx(){const{t}=Kn(),[e,n]=G.useState(null),r=[{id:"france",name:"France",flag:"",currency:"EUR",description:t("countries.france.description")},{id:"usa",name:"United States",flag:"",currency:"USD",description:t("countries.usa.description")},{id:"thailand",name:"Thailand",flag:"",currency:"THB",description:t("countries.thailand.description")}];return p.jsx("section",{id:"countries",className:"countries",children:p.jsxs("div",{className:"countries-container",children:[p.jsx("h2",{className:"section-title",children:t("countries.title")}),p.jsx("p",{className:"countries-subtitle",children:t("countries.subtitle")}),p.jsx("div",{className:"countries-grid",children:r.map(s=>p.jsxs("div",{className:`country-card glass-card ${e===s.id?"active":""}`,onMouseEnter:()=>n(s.id),onMouseLeave:()=>n(null),children:[p.jsx("div",{className:"country-card-flag",children:s.flag}),p.jsx("h3",{className:"country-card-name",children:s.name}),p.jsx("div",{className:"country-card-currency",children:s.currency}),p.jsx("p",{className:"country-card-description",children:s.description})]},s.id))})]})})}function rx({onClose:t}){return p.jsx("div",{className:"legal-overlay",children:p.jsxs("div",{className:"legal-modal",children:[p.jsxs("div",{className:"legal-header",children:[p.jsx("h1",{children:"Privacy Policy"}),p.jsx("button",{className:"close-btn",onClick:t,children:""})]}),p.jsxs("div",{className:"legal-content",children:[p.jsx("p",{className:"legal-updated",children:"Last Updated: November 19, 2025"}),p.jsxs("section",{children:[p.jsx("h2",{children:"1. Information We Collect"}),p.jsx("p",{children:"We collect information that you provide directly to us, including:"}),p.jsxs("ul",{children:[p.jsx("li",{children:"Account information (name, email address)"}),p.jsx("li",{children:"Transaction data and payment information"}),p.jsx("li",{children:"Communication preferences"}),p.jsx("li",{children:"Device and usage information"})]})]}),p.jsxs("section",{children:[p.jsx("h2",{children:"2. How We Use Your Information"}),p.jsx("p",{children:"We use the information we collect to:"}),p.jsxs("ul",{children:[p.jsx("li",{children:"Provide, maintain, and improve our services"}),p.jsx("li",{children:"Process your transactions and send related information"}),p.jsx("li",{children:"Send you technical notices and support messages"}),p.jsx("li",{children:"Respond to your comments and questions"}),p.jsx("li",{children:"Protect against fraudulent or illegal activity"})]})]}),p.jsxs("section",{children:[p.jsx("h2",{children:"3. Information Sharing"}),p.jsx("p",{children:"We do not sell your personal information. We may share your information only in the following circumstances:"}),p.jsxs("ul",{children:[p.jsx("li",{children:"With your consent"}),p.jsx("li",{children:"To comply with legal obligations"}),p.jsx("li",{children:"To protect our rights and prevent fraud"}),p.jsx("li",{children:"With service providers who assist our operations"})]})]}),p.jsxs("section",{children:[p.jsx("h2",{children:"4. Data Security"}),p.jsx("p",{children:"We implement appropriate technical and organizational measures to protect your personal information against unauthorized access, alteration, disclosure, or destruction."})]}),p.jsxs("section",{children:[p.jsx("h2",{children:"5. Your Rights"}),p.jsx("p",{children:"You have the right to:"}),p.jsxs("ul",{children:[p.jsx("li",{children:"Access your personal information"}),p.jsx("li",{children:"Correct inaccurate data"}),p.jsx("li",{children:"Request deletion of your data"}),p.jsx("li",{children:"Object to data processing"}),p.jsx("li",{children:"Data portability"})]})]}),p.jsxs("section",{children:[p.jsx("h2",{children:"6. Cookies"}),p.jsx("p",{children:"We use cookies and similar tracking technologies to collect information about your browsing activities and to provide personalized content and advertising."})]}),p.jsxs("section",{children:[p.jsx("h2",{children:"7. International Data Transfers"}),p.jsx("p",{children:"Your information may be transferred to and processed in countries other than your own. We ensure appropriate safeguards are in place for such transfers."})]}),p.jsxs("section",{children:[p.jsx("h2",{children:"8. Children's Privacy"}),p.jsx("p",{children:"Our services are not intended for children under 18. We do not knowingly collect personal information from children."})]}),p.jsxs("section",{children:[p.jsx("h2",{children:"9. Changes to This Policy"}),p.jsx("p",{children:"We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new policy on this page."})]}),p.jsxs("section",{children:[p.jsx("h2",{children:"10. Contact Us"}),p.jsx("p",{children:"If you have questions about this Privacy Policy, please contact us at:"}),p.jsx("p",{className:"contact-info",children:"privacy@coinvoy.com"})]})]})]})})}function sx({onClose:t}){return p.jsx("div",{className:"legal-overlay",children:p.jsxs("div",{className:"legal-modal",children:[p.jsxs("div",{className:"legal-header",children:[p.jsx("h1",{children:"Terms of Service"}),p.jsx("button",{className:"close-btn",onClick:t,children:""})]}),p.jsxs("div",{className:"legal-content",children:[p.jsx("p",{className:"legal-updated",children:"Last Updated: November 19, 2025"}),p.jsxs("section",{children:[p.jsx("h2",{children:"1. Acceptance of Terms"}),p.jsx("p",{children:"By accessing and using CoinVoy, you accept and agree to be bound by these Terms of Service. If you do not agree to these terms, please do not use our services."})]}),p.jsxs("section",{children:[p.jsx("h2",{children:"2. Description of Service"}),p.jsx("p",{children:"CoinVoy provides a platform for international money transfers and currency exchange. Our services include:"}),p.jsxs("ul",{children:[p.jsx("li",{children:"Currency exchange and conversion"}),p.jsx("li",{children:"International money transfers"}),p.jsx("li",{children:"Cryptocurrency wallet integration"}),p.jsx("li",{children:"Bank account linking"}),p.jsx("li",{children:"Transaction history and reporting"})]})]}),p.jsxs("section",{children:[p.jsx("h2",{children:"3. User Account"}),p.jsx("p",{children:"To use our services, you must:"}),p.jsxs("ul",{children:[p.jsx("li",{children:"Be at least 18 years old"}),p.jsx("li",{children:"Provide accurate and complete information"}),p.jsx("li",{children:"Maintain the security of your account credentials"}),p.jsx("li",{children:"Notify us immediately of any unauthorized access"})]})]}),p.jsxs("section",{children:[p.jsx("h2",{children:"4. Fees and Payments"}),p.jsx("p",{children:"You agree to pay all applicable fees for transactions. Fees are displayed before you complete a transaction. We reserve the right to change our fee structure with notice."})]}),p.jsxs("section",{children:[p.jsx("h2",{children:"5. Transaction Limits"}),p.jsx("p",{children:"We may impose transaction limits based on verification level, transaction history, and other risk factors. These limits are subject to change."})]}),p.jsxs("section",{children:[p.jsx("h2",{children:"6. Prohibited Activities"}),p.jsx("p",{children:"You agree not to:"}),p.jsxs("ul",{children:[p.jsx("li",{children:"Use the service for illegal activities"}),p.jsx("li",{children:"Violate any laws or regulations"}),p.jsx("li",{children:"Impersonate any person or entity"}),p.jsx("li",{children:"Interfere with or disrupt the service"}),p.jsx("li",{children:"Attempt to gain unauthorized access to our systems"}),p.jsx("li",{children:"Engage in money laundering or terrorist financing"})]})]}),p.jsxs("section",{children:[p.jsx("h2",{children:"7. Compliance and Verification"}),p.jsx("p",{children:"We are required to comply with Know Your Customer (KYC) and Anti-Money Laundering (AML) regulations. You agree to provide necessary documentation for verification purposes."})]}),p.jsxs("section",{children:[p.jsx("h2",{children:"8. Liability Limitation"}),p.jsx("p",{children:"To the maximum extent permitted by law, CoinVoy shall not be liable for any indirect, incidental, special, consequential, or punitive damages resulting from your use of the service."})]}),p.jsxs("section",{children:[p.jsx("h2",{children:"9. Dispute Resolution"}),p.jsx("p",{children:"Any disputes arising from these terms shall be resolved through binding arbitration in accordance with applicable laws."})]}),p.jsxs("section",{children:[p.jsx("h2",{children:"10. Service Modifications"}),p.jsx("p",{children:"We reserve the right to modify or discontinue the service at any time, with or without notice. We shall not be liable for any modification, suspension, or discontinuation of the service."})]}),p.jsxs("section",{children:[p.jsx("h2",{children:"11. Intellectual Property"}),p.jsx("p",{children:"All content, trademarks, and intellectual property on CoinVoy are owned by or licensed to us. You may not use our intellectual property without prior written permission."})]}),p.jsxs("section",{children:[p.jsx("h2",{children:"12. Termination"}),p.jsx("p",{children:"We may terminate or suspend your account immediately, without prior notice, for any breach of these Terms of Service."})]}),p.jsxs("section",{children:[p.jsx("h2",{children:"13. Governing Law"}),p.jsx("p",{children:"These Terms shall be governed by and construed in accordance with applicable laws, without regard to conflict of law provisions."})]}),p.jsxs("section",{children:[p.jsx("h2",{children:"14. Contact Information"}),p.jsx("p",{children:"For questions about these Terms of Service, contact us at:"}),p.jsx("p",{className:"contact-info",children:"legal@coinvoy.com"})]})]})]})})}function ix({onNavigateToAuth:t}){const{t:e}=Kn(),n=G.useRef(null),[r,s]=G.useState({x:0,y:0}),[i,o]=G.useState(!1),[a,l]=G.useState(!1),c=f=>{if(!n.current)return;const v=n.current.getBoundingClientRect(),w=f.clientX-v.left,g=f.clientY-v.top;s({x:w,y:g})};return p.jsxs(p.Fragment,{children:[i&&p.jsx(rx,{onClose:()=>o(!1)}),a&&p.jsx(sx,{onClose:()=>l(!1)}),p.jsxs("section",{id:"contact",className:"cta",children:[p.jsxs("div",{className:"cta-container glass-card",children:[p.jsx("h2",{className:"cta-title",children:e("cta.title")}),p.jsx("p",{className:"cta-description",children:e("cta.description")}),p.jsx("button",{ref:n,className:"cta-button",onClick:t,onMouseMove:c,style:{"--x":`${r.x}px`,"--y":`${r.y}px`},children:e("cta.button")})]}),p.jsx("footer",{className:"footer",children:p.jsxs("div",{className:"footer-content",children:[p.jsx("div",{className:"footer-logo",children:"CoinVoy"}),p.jsxs("div",{className:"footer-links",children:[p.jsx("button",{onClick:()=>o(!0),className:"footer-link-button",children:e("footer.privacy")}),p.jsx("button",{onClick:()=>l(!0),className:"footer-link-button",children:e("footer.terms")}),p.jsx("a",{href:"#support",children:e("footer.support")})]}),p.jsx("p",{className:"footer-copyright",children:e("footer.copyright")})]})})]})]})}var Kd=function(t,e){return Kd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},Kd(t,e)};function By(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Kd(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Ll=function(){return Ll=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ll.apply(this,arguments)};function Qi(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function jy(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function Ny(t,e){return function(n,r){e(n,r,t)}}function Py(t,e,n,r,s,i){function o(b){if(b!==void 0&&typeof b!="function")throw new TypeError("Function expected");return b}for(var a=r.kind,l=a==="getter"?"get":a==="setter"?"set":"value",c=!e&&t?r.static?t:t.prototype:null,f=e||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),v,w=!1,g=n.length-1;g>=0;g--){var _={};for(var E in r)_[E]=E==="access"?{}:r[E];for(var E in r.access)_.access[E]=r.access[E];_.addInitializer=function(b){if(w)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(b||null))};var C=(0,n[g])(a==="accessor"?{get:f.get,set:f.set}:f[l],_);if(a==="accessor"){if(C===void 0)continue;if(C===null||typeof C!="object")throw new TypeError("Object expected");(v=o(C.get))&&(f.get=v),(v=o(C.set))&&(f.set=v),(v=o(C.init))&&s.unshift(v)}else(v=o(C))&&(a==="field"?s.unshift(v):f[l]=v)}c&&Object.defineProperty(c,r.name,f),w=!0}function Oy(t,e,n){for(var r=arguments.length>2,s=0;s<e.length;s++)n=r?e[s].call(t,n):e[s].call(t);return r?n:void 0}function My(t){return typeof t=="symbol"?t:"".concat(t)}function Ly(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function Uy(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function ce(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(f){try{c(r.next(f))}catch(v){o(v)}}function l(f){try{c(r.throw(f))}catch(v){o(v)}}function c(f){f.done?i(f.value):s(f.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function Dy(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(f){return l([c,f])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(f){c=[6,f],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var vc=Object.create?function(t,e,n,r){r===void 0&&(r=n);var s=Object.getOwnPropertyDescriptor(e,n);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,s)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]};function Fy(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&vc(e,t,n)}function Ul(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function hf(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function $y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(hf(arguments[e]));return t}function zy(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function qy(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function Vi(t){return this instanceof Vi?(this.v=t,this):new Vi(t)}function Wy(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(g){return function(_){return Promise.resolve(_).then(g,v)}}function a(g,_){r[g]&&(s[g]=function(E){return new Promise(function(C,b){i.push([g,E,C,b])>1||l(g,E)})},_&&(s[g]=_(s[g])))}function l(g,_){try{c(r[g](_))}catch(E){w(i[0][3],E)}}function c(g){g.value instanceof Vi?Promise.resolve(g.value.v).then(f,v):w(i[0][2],g)}function f(g){l("next",g)}function v(g){l("throw",g)}function w(g,_){g(_),i.shift(),i.length&&l(i[0][0],i[0][1])}}function Vy(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:Vi(t[s](o)),done:!1}:i?i(o):o}:i}}function Hy(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Ul=="function"?Ul(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,l){o=t[i](o),s(a,l,o.done,o.value)})}}function s(i,o,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},o)}}function Ky(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var ox=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},Gd=function(t){return Gd=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},Gd(t)};function Gy(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=Gd(t),r=0;r<n.length;r++)n[r]!=="default"&&vc(e,t,n[r]);return ox(e,t),e}function Jy(t){return t&&t.__esModule?t:{default:t}}function Yy(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function Zy(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n}function Xy(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Qy(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,s;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(s=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");s&&(r=function(){try{s.call(this)}catch(i){return Promise.reject(i)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var ax=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function ew(t){function e(i){t.error=t.hasError?new ax(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var n,r=0;function s(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(s);if(n.dispose){var i=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(i).then(s,function(o){return e(o),s()})}else r|=1}catch(o){e(o)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function tw(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,s,i,o){return r?e?".jsx":".js":s&&(!i||!o)?n:s+i+"."+o.toLowerCase()+"js"}):t}const lx={__extends:By,__assign:Ll,__rest:Qi,__decorate:jy,__param:Ny,__esDecorate:Py,__runInitializers:Oy,__propKey:My,__setFunctionName:Ly,__metadata:Uy,__awaiter:ce,__generator:Dy,__createBinding:vc,__exportStar:Fy,__values:Ul,__read:hf,__spread:$y,__spreadArrays:zy,__spreadArray:qy,__await:Vi,__asyncGenerator:Wy,__asyncDelegator:Vy,__asyncValues:Hy,__makeTemplateObject:Ky,__importStar:Gy,__importDefault:Jy,__classPrivateFieldGet:Yy,__classPrivateFieldSet:Zy,__classPrivateFieldIn:Xy,__addDisposableResource:Qy,__disposeResources:ew,__rewriteRelativeImportExtension:tw},cx=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Qy,get __assign(){return Ll},__asyncDelegator:Vy,__asyncGenerator:Wy,__asyncValues:Hy,__await:Vi,__awaiter:ce,__classPrivateFieldGet:Yy,__classPrivateFieldIn:Xy,__classPrivateFieldSet:Zy,__createBinding:vc,__decorate:jy,__disposeResources:ew,__esDecorate:Py,__exportStar:Fy,__extends:By,__generator:Dy,__importDefault:Jy,__importStar:Gy,__makeTemplateObject:Ky,__metadata:Uy,__param:Ny,__propKey:My,__read:hf,__rest:Qi,__rewriteRelativeImportExtension:tw,__runInitializers:Oy,__setFunctionName:Ly,__spread:$y,__spreadArray:qy,__spreadArrays:zy,__values:Ul,default:lx},Symbol.toStringTag,{value:"Module"})),ux=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class ff extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class dx extends ff{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class u0 extends ff{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class d0 extends ff{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Jd;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Jd||(Jd={}));class hx{constructor(e,{headers:n={},customFetch:r,region:s=Jd.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=ux(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return ce(this,arguments,void 0,function*(n,r={}){var s;let i,o;try{const{headers:a,method:l,body:c,signal:f,timeout:v}=r;let w={},{region:g}=r;g||(g=this.region);const _=new URL(`${this.url}/${n}`);g&&g!=="any"&&(w["x-region"]=g,_.searchParams.set("forceFunctionRegion",g));let E;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(w["Content-Type"]="application/octet-stream",E=c):typeof c=="string"?(w["Content-Type"]="text/plain",E=c):typeof FormData<"u"&&c instanceof FormData?E=c:(w["Content-Type"]="application/json",E=JSON.stringify(c)):E=c;let C=f;v&&(o=new AbortController,i=setTimeout(()=>o.abort(),v),f?(C=o.signal,f.addEventListener("abort",()=>o.abort())):C=o.signal);const b=yield this.fetch(_.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},w),this.headers),a),body:E,signal:C}).catch(L=>{throw new dx(L)}),S=b.headers.get("x-relay-error");if(S&&S==="true")throw new u0(b);if(!b.ok)throw new d0(b);let x=((s=b.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),O;return x==="application/json"?O=yield b.json():x==="application/octet-stream"||x==="application/pdf"?O=yield b.blob():x==="text/event-stream"?O=b:x==="multipart/form-data"?O=yield b.formData():O=yield b.text(),{data:O,error:null,response:b}}catch(a){return{data:null,error:a,response:a instanceof d0||a instanceof u0?a.context:void 0}}finally{i&&clearTimeout(i)}})}}var rn={};const eo=nc(cx);var La={},Ua={},Da={},Fa={},$a={},za={},h0;function nw(){if(h0)return za;h0=1,Object.defineProperty(za,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return za.default=t,za}var f0;function rw(){if(f0)return $a;f0=1,Object.defineProperty($a,"__esModule",{value:!0});const e=eo.__importDefault(nw());class n{constructor(s){var i,o;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(i=s.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=s.signal,this.isMaybeSingle=(o=s.isMaybeSingle)!==null&&o!==void 0?o:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,i){return this.headers=new Headers(this.headers),this.headers.set(s,i),this}then(s,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let a=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var c,f,v,w;let g=null,_=null,E=null,C=l.status,b=l.statusText;if(l.ok){if(this.method!=="HEAD"){const L=await l.text();L===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((c=this.headers.get("Accept"))===null||c===void 0)&&c.includes("application/vnd.pgrst.plan+text"))?_=L:_=JSON.parse(L))}const x=(f=this.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),O=(v=l.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");x&&O&&O.length>1&&(E=parseInt(O[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(g={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,E=null,C=406,b="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const x=await l.text();try{g=JSON.parse(x),Array.isArray(g)&&l.status===404&&(_=[],g=null,C=200,b="OK")}catch{l.status===404&&x===""?(C=204,b="No Content"):g={message:x}}if(g&&this.isMaybeSingle&&(!((w=g==null?void 0:g.details)===null||w===void 0)&&w.includes("0 rows"))&&(g=null,C=200,b="OK"),g&&this.shouldThrowOnError)throw new e.default(g)}return{error:g,data:_,count:E,status:C,statusText:b}});return this.shouldThrowOnError||(a=a.catch(l=>{var c,f,v,w,g,_;let E="";const C=l==null?void 0:l.cause;if(C){const b=(c=C==null?void 0:C.message)!==null&&c!==void 0?c:"",S=(f=C==null?void 0:C.code)!==null&&f!==void 0?f:"";E=`${(v=l==null?void 0:l.name)!==null&&v!==void 0?v:"FetchError"}: ${l==null?void 0:l.message}`,E+=`

Caused by: ${(w=C==null?void 0:C.name)!==null&&w!==void 0?w:"Error"}: ${b}`,S&&(E+=` (${S})`),C!=null&&C.stack&&(E+=`
${C.stack}`)}else E=(g=l==null?void 0:l.stack)!==null&&g!==void 0?g:"";return{error:{message:`${(_=l==null?void 0:l.name)!==null&&_!==void 0?_:"FetchError"}: ${l==null?void 0:l.message}`,details:E,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(s,i)}returns(){return this}overrideTypes(){return this}}return $a.default=n,$a}var p0;function sw(){if(p0)return Fa;p0=1,Object.defineProperty(Fa,"__esModule",{value:!0});const e=eo.__importDefault(rw());class n extends e.default{select(s){let i=!1;const o=(s??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:i=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.order`:"order",f=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${f?`${f},`:""}${s}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:o=i}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${s}`),this}range(s,i,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${s}`),this.url.searchParams.set(c,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:i=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:c="text"}={}){var f;const v=[s?"analyze":null,i?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),w=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${w}"; options=${v};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return Fa.default=n,Fa}var g0;function pf(){if(g0)return Da;g0=1,Object.defineProperty(Da,"__esModule",{value:!0});const e=eo.__importDefault(sw()),n=new RegExp("[,()]");class r extends e.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}regexMatch(i,o){return this.url.searchParams.append(i,`match.${o}`),this}regexIMatch(i,o){return this.url.searchParams.append(i,`imatch.${o}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}isDistinct(i,o){return this.url.searchParams.append(i,`isdistinct.${o}`),this}in(i,o){const a=Array.from(new Set(o)).map(l=>typeof l=="string"&&n.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(i,`in.(${a})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:a,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const f=a===void 0?"":`(${a})`;return this.url.searchParams.append(i,`${c}fts${f}.${o}`),this}match(i){return Object.entries(i).forEach(([o,a])=>{this.url.searchParams.append(o,`eq.${a}`)}),this}not(i,o,a){return this.url.searchParams.append(i,`not.${o}.${a}`),this}or(i,{foreignTable:o,referencedTable:a=o}={}){const l=a?`${a}.or`:"or";return this.url.searchParams.append(l,`(${i})`),this}filter(i,o,a){return this.url.searchParams.append(i,`${o}.${a}`),this}}return Da.default=r,Da}var m0;function iw(){if(m0)return Ua;m0=1,Object.defineProperty(Ua,"__esModule",{value:!0});const e=eo.__importDefault(pf());class n{constructor(s,{headers:i={},schema:o,fetch:a}){this.url=s,this.headers=new Headers(i),this.schema=o,this.fetch=a}select(s,i){const{head:o=!1,count:a}=i??{},l=o?"HEAD":"GET";let c=!1;const f=(s??"*").split("").map(v=>/\s/.test(v)&&!c?"":(v==='"'&&(c=!c),v)).join("");return this.url.searchParams.set("select",f),a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:i,defaultToNull:o=!0}={}){var a;const l="POST";if(i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const c=s.reduce((f,v)=>f.concat(Object.keys(v)),[]);if(c.length>0){const f=[...new Set(c)].map(v=>`"${v}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(s,{onConflict:i,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){var c;const f="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const v=s.reduce((w,g)=>w.concat(Object.keys(g)),[]);if(v.length>0){const w=[...new Set(v)].map(g=>`"${g}"`);this.url.searchParams.set("columns",w.join(","))}}return new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(s,{count:i}={}){var o;const a="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:s}={}){var i;const o="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return Ua.default=n,Ua}var y0;function fx(){if(y0)return La;y0=1,Object.defineProperty(La,"__esModule",{value:!0});const t=eo,e=t.__importDefault(iw()),n=t.__importDefault(pf());class r{constructor(i,{headers:o={},schema:a,fetch:l}={}){this.url=i,this.headers=new Headers(o),this.schemaName=a,this.fetch=l}from(i){if(!i||typeof i!="string"||i.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const o=new URL(`${this.url}/${i}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new r(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:a=!1,get:l=!1,count:c}={}){var f;let v;const w=new URL(`${this.url}/rpc/${i}`);let g;a||l?(v=a?"HEAD":"GET",Object.entries(o).filter(([E,C])=>C!==void 0).map(([E,C])=>[E,Array.isArray(C)?`{${C.join(",")}}`:`${C}`]).forEach(([E,C])=>{w.searchParams.append(E,C)})):(v="POST",g=o);const _=new Headers(this.headers);return c&&_.set("Prefer",`count=${c}`),new n.default({method:v,url:w,headers:_,schema:this.schemaName,body:g,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}}return La.default=r,La}Object.defineProperty(rn,"__esModule",{value:!0});var ow=rn.PostgrestError=mw=rn.PostgrestBuilder=pw=rn.PostgrestTransformBuilder=hw=rn.PostgrestFilterBuilder=uw=rn.PostgrestQueryBuilder=lw=rn.PostgrestClient=void 0;const to=eo,aw=to.__importDefault(fx());var lw=rn.PostgrestClient=aw.default;const cw=to.__importDefault(iw());var uw=rn.PostgrestQueryBuilder=cw.default;const dw=to.__importDefault(pf());var hw=rn.PostgrestFilterBuilder=dw.default;const fw=to.__importDefault(sw());var pw=rn.PostgrestTransformBuilder=fw.default;const gw=to.__importDefault(rw());var mw=rn.PostgrestBuilder=gw.default;const yw=to.__importDefault(nw());ow=rn.PostgrestError=yw.default;var ww=rn.default={PostgrestClient:aw.default,PostgrestQueryBuilder:cw.default,PostgrestFilterBuilder:dw.default,PostgrestTransformBuilder:fw.default,PostgrestBuilder:gw.default,PostgrestError:yw.default};const px=S1({__proto__:null,get PostgrestBuilder(){return mw},get PostgrestClient(){return lw},get PostgrestError(){return ow},get PostgrestFilterBuilder(){return hw},get PostgrestQueryBuilder(){return uw},get PostgrestTransformBuilder(){return pw},default:ww},[rn]),{PostgrestClient:gx,PostgrestQueryBuilder:$C,PostgrestFilterBuilder:zC,PostgrestTransformBuilder:qC,PostgrestBuilder:WC,PostgrestError:VC}=ww||px;class mx{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const yx="2.84.0",wx=`realtime-js/${yx}`,vw="1.0.0",vx="2.0.0",w0=vw,Yd=1e4,bx=1e3,_x=100;var xs;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(xs||(xs={}));var Bt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Bt||(Bt={}));var er;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(er||(er={}));var Zd;(function(t){t.websocket="websocket"})(Zd||(Zd={}));var Ss;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ss||(Ss={}));class xx{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast"}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r,s,i;const o=e.topic,a=(n=e.ref)!==null&&n!==void 0?n:"",l=(r=e.join_ref)!==null&&r!==void 0?r:"",c=e.payload.event,f=(i=(s=e.payload)===null||s===void 0?void 0:s.payload)!==null&&i!==void 0?i:new ArrayBuffer(0),v=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+c.length,w=new ArrayBuffer(this.HEADER_LENGTH+v);let g=new DataView(w),_=0;g.setUint8(_++,this.KINDS.userBroadcastPush),g.setUint8(_++,l.length),g.setUint8(_++,a.length),g.setUint8(_++,o.length),g.setUint8(_++,c.length),g.setUint8(_++,this.BINARY_ENCODING),Array.from(l,C=>g.setUint8(_++,C.charCodeAt(0))),Array.from(a,C=>g.setUint8(_++,C.charCodeAt(0))),Array.from(o,C=>g.setUint8(_++,C.charCodeAt(0))),Array.from(c,C=>g.setUint8(_++,C.charCodeAt(0)));var E=new Uint8Array(w.byteLength+f.byteLength);return E.set(new Uint8Array(w),0),E.set(new Uint8Array(f),w.byteLength),E.buffer}_encodeJsonUserBroadcastPush(e){var n,r,s,i;const o=e.topic,a=(n=e.ref)!==null&&n!==void 0?n:"",l=(r=e.join_ref)!==null&&r!==void 0?r:"",c=e.payload.event,f=(i=(s=e.payload)===null||s===void 0?void 0:s.payload)!==null&&i!==void 0?i:{},w=new TextEncoder().encode(JSON.stringify(f)).buffer,g=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+c.length,_=new ArrayBuffer(this.HEADER_LENGTH+g);let E=new DataView(_),C=0;E.setUint8(C++,this.KINDS.userBroadcastPush),E.setUint8(C++,l.length),E.setUint8(C++,a.length),E.setUint8(C++,o.length),E.setUint8(C++,c.length),E.setUint8(C++,this.JSON_ENCODING),Array.from(l,S=>E.setUint8(C++,S.charCodeAt(0))),Array.from(a,S=>E.setUint8(C++,S.charCodeAt(0))),Array.from(o,S=>E.setUint8(C++,S.charCodeAt(0))),Array.from(c,S=>E.setUint8(C++,S.charCodeAt(0)));var b=new Uint8Array(_.byteLength+w.byteLength);return b.set(new Uint8Array(_),0),b.set(new Uint8Array(w),_.byteLength),b.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[s,i,o,a,l]=r;return n({join_ref:s,ref:i,topic:o,event:a,payload:l})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,s)}}_decodeUserBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2),o=n.getUint8(3),a=n.getUint8(4);let l=this.HEADER_LENGTH+4;const c=r.decode(e.slice(l,l+s));l=l+s;const f=r.decode(e.slice(l,l+i));l=l+i;const v=r.decode(e.slice(l,l+o));l=l+o;const w=e.slice(l,e.byteLength),g=a===this.JSON_ENCODING?JSON.parse(r.decode(w)):w,_={type:this.BROADCAST_EVENT,event:f,payload:g};return o>0&&(_.meta=JSON.parse(v)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:_}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}}class bw{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Me;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Me||(Me={}));const v0=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=Sx(o,t,e,s),i),{}):{}},Sx=(t,e,n,r)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?_w(i,o):Xd(o)},_w=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return Rx(e,n)}switch(t){case Me.bool:return Ex(e);case Me.float4:case Me.float8:case Me.int2:case Me.int4:case Me.int8:case Me.numeric:case Me.oid:return kx(e);case Me.json:case Me.jsonb:return Ax(e);case Me.timestamp:return Cx(e);case Me.abstime:case Me.date:case Me.daterange:case Me.int4range:case Me.int8range:case Me.money:case Me.reltime:case Me.text:case Me.time:case Me.timestamptz:case Me.timetz:case Me.tsrange:case Me.tstzrange:return Xd(e);default:return Xd(e)}},Xd=t=>t,Ex=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},kx=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Ax=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Rx=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>_w(e,a))}return t},Cx=t=>typeof t=="string"?t.replace(" ","T"):t,xw=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Su{constructor(e,n,r={},s=Yd){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var b0;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(b0||(b0={}));class Bo{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Bo.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=Bo.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Bo.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(i,(c,f)=>{o[c]||(l[c]=f)}),this.map(o,(c,f)=>{const v=i[c];if(v){const w=f.map(C=>C.presence_ref),g=v.map(C=>C.presence_ref),_=f.filter(C=>g.indexOf(C.presence_ref)<0),E=v.filter(C=>w.indexOf(C.presence_ref)<0);_.length>0&&(a[c]=_),E.length>0&&(l[c]=E)}else a[c]=f}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var c;const f=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),f.length>0){const v=e[a].map(g=>g.presence_ref),w=f.filter(g=>v.indexOf(g.presence_ref)<0);e[a].unshift(...w)}r(a,f,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const f=l.map(v=>v.presence_ref);c=c.filter(v=>f.indexOf(v.presence_ref)<0),e[a]=c,s(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var _0;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(_0||(_0={}));var jo;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(jo||(jo={}));var Er;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Er||(Er={}));class gf{constructor(e,n={config:{}},r){var s,i;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Bt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Su(this,er.join,this.params,this.timeout),this.rejoinTimer=new bw(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Bt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Bt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(er.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Bo(this),this.broadcastEndpointURL=xw(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Bt.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&s!==void 0?s:[],f=!!this.bindings[jo.PRESENCE]&&this.bindings[jo.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,v={},w={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:f}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(g=>e==null?void 0:e(Er.CHANNEL_ERROR,g)),this._onClose(()=>e==null?void 0:e(Er.CLOSED)),this.updateJoinPayload(Object.assign({config:w},v)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var _;if(this.socket.setAuth(),g===void 0){e==null||e(Er.SUBSCRIBED);return}else{const E=this.bindings.postgres_changes,C=(_=E==null?void 0:E.length)!==null&&_!==void 0?_:0,b=[];for(let S=0;S<C;S++){const x=E[S],{filter:{event:O,schema:L,table:D,filter:W}}=x,q=g&&g[S];if(q&&q.event===O&&q.schema===L&&q.table===D&&q.filter===W)b.push(Object.assign(Object.assign({},x),{id:q.id}));else{this.unsubscribe(),this.state=Bt.errored,e==null||e(Er.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e(Er.SUBSCRIBED);return}}).receive("error",g=>{this.state=Bt.errored,e==null||e(Er.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Er.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===Bt.joined&&e===jo.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var s;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Bt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(er.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Su(this,er.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Bt.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Su(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>_x){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:f}=er;if(r&&[a,l,c,f].indexOf(o)>=0&&r!==this._joinRef())return;let w=this._onMessage(o,n,r);if(n&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(g=>{var _,E,C;return((_=g.filter)===null||_===void 0?void 0:_.event)==="*"||((C=(E=g.filter)===null||E===void 0?void 0:E.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===o}).map(g=>g.callback(w,r)):(i=this.bindings[o])===null||i===void 0||i.filter(g=>{var _,E,C,b,S,x;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const O=g.id,L=(_=g.filter)===null||_===void 0?void 0:_.event;return O&&((E=n.ids)===null||E===void 0?void 0:E.includes(O))&&(L==="*"||(L==null?void 0:L.toLocaleLowerCase())===((C=n.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const O=(S=(b=g==null?void 0:g.filter)===null||b===void 0?void 0:b.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return O==="*"||O===((x=n==null?void 0:n.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof w=="object"&&"ids"in w){const _=w.data,{schema:E,table:C,commit_timestamp:b,type:S,errors:x}=_;w=Object.assign(Object.assign({},{schema:E,table:C,commit_timestamp:b,eventType:S,new:{},old:{},errors:x}),this._getPayloadRecords(_))}g.callback(w,r)})}_isClosed(){return this.state===Bt.closed}_isJoined(){return this.state===Bt.joined}_isJoining(){return this.state===Bt.joining}_isLeaving(){return this.state===Bt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&gf.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(er.close,{},e)}_onError(e){this._on(er.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Bt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=v0(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=v0(e.columns,e.old_record)),n}}const Eu=()=>{},qa={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Ix=[1e3,2e3,5e3,1e4],Tx=1e4,Bx=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class jx{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Yd,this.transport=null,this.heartbeatIntervalMs=qa.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Eu,this.ref=0,this.reconnectTimer=null,this.vsn=w0,this.logger=Eu,this.conn=null,this.sendBuffer=[],this.serializer=new xx,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Zd.websocket}`,this.httpEndpoint=xw(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=mx.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case xs.connecting:return Ss.Connecting;case xs.open:return Ss.Open;case xs.closing:return Ss.Closing;default:return Ss.Closed}}isConnected(){return this.connectionState()===Ss.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new gf(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(bx,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},qa.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=n,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${s} ${a}`.trim(),i),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===xs.open||this.conn.readyState===xs.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(er.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([Bx],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:wx};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(er.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new bw(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},qa.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,i,o,a,l,c,f,v,w,g;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Yd,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:qa.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:Eu,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:w0,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:_=>Ix[_-1]||Tx,this.vsn){case vw:this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:(_,E)=>E(JSON.stringify(_)),this.decode=(v=e==null?void 0:e.decode)!==null&&v!==void 0?v:(_,E)=>E(JSON.parse(_));break;case vx:this.encode=(w=e==null?void 0:e.encode)!==null&&w!==void 0?w:this.serializer.encode.bind(this.serializer),this.decode=(g=e==null?void 0:e.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class mf extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ke(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Nx extends mf{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Qd extends mf{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const yf=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Px=()=>Response,eh=t=>{if(Array.isArray(t))return t.map(n=>eh(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=eh(r)}),e},Ox=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},ku=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},Mx=(t,e,n)=>ce(void 0,void 0,void 0,function*(){const r=yield Px();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const i=t.status||500,o=(s==null?void 0:s.statusCode)||i+"";e(new Nx(ku(s),i,o))}).catch(s=>{e(new Qd(ku(s),s))}):e(new Qd(ku(t),t))}),Lx=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(Ox(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),n))};function ca(t,e,n,r,s,i){return ce(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,Lx(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Mx(l,a,r))})})}function Yo(t,e,n,r){return ce(this,void 0,void 0,function*(){return ca(t,"GET",e,n,r)})}function Xn(t,e,n,r,s){return ce(this,void 0,void 0,function*(){return ca(t,"POST",e,r,s,n)})}function th(t,e,n,r,s){return ce(this,void 0,void 0,function*(){return ca(t,"PUT",e,r,s,n)})}function Ux(t,e,n,r){return ce(this,void 0,void 0,function*(){return ca(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function wf(t,e,n,r,s){return ce(this,void 0,void 0,function*(){return ca(t,"DELETE",e,r,s,n)})}class Dx{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return ce(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ke(e))return{data:null,error:e};throw e}})}}var Sw;class Fx{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[Sw]="BlobDownloadBuilder",this.promise=null}asStream(){return new Dx(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ce(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ke(e))return{data:null,error:e};throw e}})}}Sw=Symbol.toStringTag;const $x={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},x0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class zx{constructor(e,n={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=yf(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,s){return ce(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},x0),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),l&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const c=this._removeEmptyFolders(n),f=this._getFinalPath(c),v=yield(e=="PUT"?th:Xn)(this.fetch,`${this.url}/object/${f}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:v.Id,fullPath:v.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ke(i))return{data:null,error:i};throw i}})}upload(e,n,r){return ce(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return ce(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:x0.upsert},s),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,f["cache-control"]=`max-age=${c.cacheControl}`,f["content-type"]=c.contentType);const v=yield th(this.fetch,a.toString(),l,{headers:f});return{data:{path:i,fullPath:v.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ke(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return ce(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield Xn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new mf("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ke(r))return{data:null,error:r};throw r}})}update(e,n,r){return ce(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return ce(this,void 0,void 0,function*(){try{return{data:yield Xn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ke(s))return{data:null,error:s};throw s}})}copy(e,n,r){return ce(this,void 0,void 0,function*(){try{return{data:{path:(yield Xn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ke(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return ce(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield Xn(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ke(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return ce(this,void 0,void 0,function*(){try{const s=yield Xn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ke(s))return{data:null,error:s};throw s}})}download(e,n){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"",a=this._getFinalPath(e),l=()=>Yo(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new Fx(l,this.shouldThrowOnError)}info(e){return ce(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Yo(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:eh(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ke(r))return{data:null,error:r};throw r}})}exists(e){return ce(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Ux(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ke(r)&&r instanceof Qd){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return ce(this,void 0,void 0,function*(){try{return{data:yield wf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}})}list(e,n,r){return ce(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},$x),n),{prefix:e||""});return{data:yield Xn(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ke(s))return{data:null,error:s};throw s}})}listV2(e,n){return ce(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Xn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ke(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Ew="2.84.0",kw={"X-Client-Info":`storage-js/${Ew}`};class qx{constructor(e,n={},r,s){this.shouldThrowOnError=!1;const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},kw),n),this.fetch=yf(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return ce(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield Yo(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}})}getBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield Yo(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}})}createBucket(e){return ce(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Xn(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ke(s))return{data:null,error:s};throw s}})}updateBucket(e,n){return ce(this,void 0,void 0,function*(){try{return{data:yield th(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ke(r))return{data:null,error:r};throw r}})}emptyBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield Xn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield wf(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class Wx{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},kw),n),this.fetch=yf(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield Xn(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}})}listBuckets(e){return ce(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),s=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Yo(this.fetch,s,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield wf(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}})}}const vf={"X-Client-Info":`storage-js/${Ew}`,"Content-Type":"application/json"};class Aw extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function xn(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Au extends Aw{constructor(e,n,r){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Vx extends Aw{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var S0;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(S0||(S0={}));const bf=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Hx=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},E0=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Kx=(t,e,n)=>ce(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const s=t.status||500,i=t;if(typeof i.json=="function")i.json().then(o=>{const a=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||s+"";e(new Au(E0(o),s,a))}).catch(()=>{const o=s+"",a=i.statusText||`HTTP ${s} error`;e(new Au(a,s,o))});else{const o=s+"",a=i.statusText||`HTTP ${s} error`;e(new Au(a,s,o))}}else e(new Vx(E0(t),t))}),Gx=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return r?(Hx(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,Object.assign(Object.assign({},s),n)):s};function Jx(t,e,n,r,s,i){return ce(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,Gx(e,r,s,i)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>Kx(l,a,r))})})}function Sn(t,e,n,r,s){return ce(this,void 0,void 0,function*(){return Jx(t,"POST",e,r,s,n)})}class Yx{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},vf),n),this.fetch=bf(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return ce(this,void 0,void 0,function*(){try{return{data:(yield Sn(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}})}getIndex(e,n){return ce(this,void 0,void 0,function*(){try{return{data:yield Sn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xn(r))return{data:null,error:r};throw r}})}listIndexes(e){return ce(this,void 0,void 0,function*(){try{return{data:yield Sn(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return ce(this,void 0,void 0,function*(){try{return{data:(yield Sn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xn(r))return{data:null,error:r};throw r}})}}class Zx{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},vf),n),this.fetch=bf(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return ce(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Sn(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}})}getVectors(e){return ce(this,void 0,void 0,function*(){try{return{data:yield Sn(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}})}listVectors(e){return ce(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Sn(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}})}queryVectors(e){return ce(this,void 0,void 0,function*(){try{return{data:yield Sn(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}})}deleteVectors(e){return ce(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Sn(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}})}}class Xx{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},vf),n),this.fetch=bf(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:(yield Sn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}})}getBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield Sn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}})}listBuckets(){return ce(this,arguments,void 0,function*(e={}){try{return{data:yield Sn(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:(yield Sn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}})}}class Qx extends Xx{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new eS(this.url,this.headers,e,this.fetch)}}class eS extends Yx{constructor(e,n,r,s){super(e,n,s),this.vectorBucketName=r}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ce(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ce(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ce(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ce(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new tS(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class tS extends Zx{constructor(e,n,r,s,i){super(e,n,i),this.vectorBucketName=r,this.indexName=s}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ce(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ce(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ce(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ce(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ce(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class nS extends qx{constructor(e,n={},r,s){super(e,n,r,s)}from(e){return new zx(this.url,this.headers,e,this.fetch)}get vectors(){return new Qx(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Wx(this.url+"/iceberg",this.headers,this.fetch)}}const rS="2.84.0";let bo="";typeof Deno<"u"?bo="deno":typeof document<"u"?bo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?bo="react-native":bo="node";const sS={"X-Client-Info":`supabase-js-${bo}/${rS}`},iS={headers:sS},oS={schema:"public"},aS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},lS={},cS=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),uS=()=>Headers,dS=(t,e,n)=>{const r=cS(n),s=uS();return async(i,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:t;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:c}))}};function hS(t){return t.endsWith("/")?t:t+"/"}function fS(t,e){var n,r;const{db:s,auth:i,realtime:o,global:a}=t,{db:l,auth:c,realtime:f,global:v}=e,w={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},f),o),storage:{},global:Object.assign(Object.assign(Object.assign({},v),a),{headers:Object.assign(Object.assign({},(n=v==null?void 0:v.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?w.accessToken=t.accessToken:delete w.accessToken,w}function pS(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(hS(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Rw="2.84.0",ui=30*1e3,nh=3,Ru=nh*ui,gS="http://localhost:9999",mS="supabase.auth.token",yS={"X-Client-Info":`gotrue-js/${Rw}`},rh="X-Supabase-Api-Version",Cw={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},wS=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,vS=10*60*1e3;class Zo extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function de(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class bS extends Zo{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function _S(t){return de(t)&&t.name==="AuthApiError"}class Es extends Zo{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class ms extends Zo{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class vn extends ms{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function xS(t){return de(t)&&t.name==="AuthSessionMissingError"}class Qs extends ms{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Wa extends ms{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Va extends ms{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function SS(t){return de(t)&&t.name==="AuthImplicitGrantRedirectError"}class k0 extends ms{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class sh extends ms{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Cu(t){return de(t)&&t.name==="AuthRetryableFetchError"}class A0 extends ms{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class ih extends ms{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Dl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),R0=` 	
\r=`.split(""),ES=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<R0.length;e+=1)t[R0[e].charCodeAt(0)]=-2;for(let e=0;e<Dl.length;e+=1)t[Dl[e].charCodeAt(0)]=e;return t})();function C0(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Dl[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Dl[r]),e.queuedBits-=6}}function Iw(t,e,n){const r=ES[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function I0(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{RS(o,r,n)};for(let o=0;o<t.length;o+=1)Iw(t.charCodeAt(o),s,i);return e.join("")}function kS(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function AS(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}kS(r,e)}}function RS(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Pi(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)Iw(t.charCodeAt(s),n,r);return new Uint8Array(e)}function CS(t){const e=[];return AS(t,n=>e.push(n)),new Uint8Array(e)}function Ts(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>C0(s,n,r)),C0(null,n,r),e.join("")}function IS(t){return Math.round(Date.now()/1e3)+t}function TS(){return Symbol("auth-callback")}const Ut=()=>typeof window<"u"&&typeof document<"u",ys={tested:!1,writable:!1},Tw=()=>{if(!Ut())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ys.tested)return ys.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ys.tested=!0,ys.writable=!0}catch{ys.tested=!0,ys.writable=!1}return ys.writable};function BS(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const Bw=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),jS=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",di=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},ws=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Dr=async(t,e)=>{await t.removeItem(e)};class bc{constructor(){this.promise=new bc.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}bc.promiseConstructor=Promise;function Iu(t){const e=t.split(".");if(e.length!==3)throw new ih("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!wS.test(e[r]))throw new ih("JWT not in base64url format");return{header:JSON.parse(I0(e[0])),payload:JSON.parse(I0(e[1])),signature:Pi(e[2]),raw:{header:e[0],payload:e[1]}}}async function NS(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function PS(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function OS(t){return("0"+t.toString(16)).substr(-2)}function MS(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,OS).join("")}async function LS(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function US(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await LS(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ei(t,e,n=!1){const r=MS();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await di(t,`${e}-code-verifier`,s);const i=await US(r);return[i,r===i?"plain":"s256"]}const DS=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function FS(t){const e=t.headers.get(rh);if(!e||!e.match(DS))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function $S(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function zS(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const qS=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ti(t){if(!qS.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Tu(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function WS(t,e){return new Proxy(t,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,s)}})}function T0(t){return JSON.parse(JSON.stringify(t))}const _s=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),VS=[502,503,504];async function B0(t){var e;if(!jS(t))throw new sh(_s(t),0);if(VS.includes(t.status))throw new sh(_s(t),t.status);let n;try{n=await t.json()}catch(i){throw new Es(_s(i),i)}let r;const s=FS(t);if(s&&s.getTime()>=Cw["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new A0(_s(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new vn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new A0(_s(n),t.status,n.weak_password.reasons);throw new bS(_s(n),t.status||500,r)}const HS=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function ge(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[rh]||(i[rh]=Cw["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await KS(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function KS(t,e,n,r,s,i){const o=HS(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new sh(_s(l),0)}if(a.ok||await B0(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await B0(l)}}function Yn(t){var e;let n=null;YS(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=IS(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function j0(t){const e=Yn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Yr(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function GS(t){return{data:t,error:null}}function JS(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=Qi(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function N0(t){return t}function YS(t){return t.access_token&&t.refresh_token&&t.expires_in}const Bu=["global","local","others"];class ZS{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Bw(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Bu[0]){if(Bu.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Bu.join(", ")}`);try{return await ge(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Yr})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Qi(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:JS,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(de(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ge(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Yr})}catch(n){if(de(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},f=await ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:N0});if(f.error)throw f.error;const v=await f.json(),w=(o=f.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(l=(a=f.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(_=>{const E=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(_.split(";")[1].split("=")[1]);c[`${C}Page`]=E}),c.total=parseInt(w)),{data:Object.assign(Object.assign({},v),c),error:null}}catch(c){if(de(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){ti(e);try{return await ge(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Yr})}catch(n){if(de(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){ti(e);try{return await ge(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Yr})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){ti(e);try{return await ge(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Yr})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){ti(e.userId);try{const{data:n,error:r}=await ge(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(de(n))return{data:null,error:n};throw n}}async _deleteFactor(e){ti(e.userId),ti(e.id);try{return{data:await ge(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(de(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},f=await ge(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:N0});if(f.error)throw f.error;const v=await f.json(),w=(o=f.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(l=(a=f.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(_=>{const E=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(_.split(";")[1].split("=")[1]);c[`${C}Page`]=E}),c.total=parseInt(w)),{data:Object.assign(Object.assign({},v),c),error:null}}catch(c){if(de(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await ge(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(de(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await ge(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(de(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await ge(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(de(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await ge(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(de(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await ge(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(de(n))return{data:null,error:n};throw n}}}function P0(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const ni={debug:!!(globalThis&&Tw()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class jw extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class XS extends jw{}async function QS(t,e,n){ni.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),ni.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){ni.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{ni.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw ni.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new XS(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ni.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function eE(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Nw(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function tE(t){return parseInt(t,16)}function nE(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function rE(t){var e;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:f,uri:v,version:w}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(w!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${w}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const g=Nw(t.address),_=f?`${f}://${r}`:r,E=t.statement?`${t.statement}
`:"",C=`${_} wants you to sign in with your Ethereum account:
${g}

${E}`;let b=`URI: ${v}
Version: ${w}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(b+=`
Expiration Time: ${s.toISOString()}`),a&&(b+=`
Not Before: ${a.toISOString()}`),l&&(b+=`
Request ID: ${l}`),c){let S=`
Resources:`;for(const x of c){if(!x||typeof x!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${x}`);S+=`
- ${x}`}b+=S}return`${C}
${b}`}class Rt extends Error{constructor({message:e,code:n,cause:r,name:s}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class Fl extends Rt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function sE({error:t,options:e}){var n,r,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Rt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Rt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Rt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Rt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Rt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Rt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new Rt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Rt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(Pw(o)){if(i.rp.id!==o)return new Rt({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Rt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Rt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Rt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Rt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function iE({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Rt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Rt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(Pw(r)){if(n.rpId!==r)return new Rt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Rt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Rt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Rt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class oE{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const aE=new oE;function lE(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,s=Qi(t,["challenge","user","excludeCredentials"]),i=Pi(e).buffer,o=Object.assign(Object.assign({},n),{id:Pi(n.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:i,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Pi(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function cE(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=Qi(t,["challenge","allowCredentials"]),s=Pi(e).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:Pi(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function uE(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Ts(new Uint8Array(t.response.attestationObject)),clientDataJSON:Ts(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function dE(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Ts(new Uint8Array(s.authenticatorData)),clientDataJSON:Ts(new Uint8Array(s.clientDataJSON)),signature:Ts(new Uint8Array(s.signature)),userHandle:s.userHandle?Ts(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Pw(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function O0(){var t,e;return!!(Ut()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function hE(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Fl("Browser returned unexpected credential type",e)}:{data:null,error:new Fl("Empty credential response",e)}}catch(e){return{data:null,error:sE({error:e,options:t})}}}async function fE(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Fl("Browser returned unexpected credential type",e)}:{data:null,error:new Fl("Empty credential response",e)}}catch(e){return{data:null,error:iE({error:e,options:t})}}}const pE={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},gE={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function $l(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of t)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))r[i]=o;else if(n(o))r[i]=o;else if(e(o)){const a=r[i];e(a)?r[i]=$l(a,o):r[i]=$l(o)}else r[i]=o}return r}function mE(t,e){return $l(pE,t,e||{})}function yE(t,e){return $l(gE,t,e||{})}class wE{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:s},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!o)return{data:null,error:a};const l=s??aE.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${r}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=mE(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:f,error:v}=await hE({publicKey:c,signal:l});return f?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:f}},error:null}:{data:null,error:v}}case"request":{const c=yE(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:f,error:v}=await fE(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:l}));return f?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:f}},error:null}:{data:null,error:v}}}}catch(o){return de(o)?{data:null,error:o}:{data:null,error:new Es("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new Zo("rpId is required for WebAuthn authentication")};try{if(!O0())return{data:null,error:new Es("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return de(o)?{data:null,error:o}:{data:null,error:new Es("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new Zo("rpId is required for WebAuthn registration")};try{if(!O0())return{data:null,error:new Es("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(f=>{var v;return(v=f.data)===null||v===void 0?void 0:v.all.find(w=>w.factor_type==="webauthn"&&w.friendly_name===e&&w.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f==null?void 0:f.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return de(o)?{data:null,error:o}:{data:null,error:new Es("Unexpected error in register",o)}}}}eE();const vE={url:gS,storageKey:mS,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:yS,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function M0(t,e,n){return await n()}const ri={};class Xo{get jwks(){var e,n;return(n=(e=ri[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){ri[this.storageKey]=Object.assign(Object.assign({},ri[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=ri[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ri[this.storageKey]=Object.assign(Object.assign({},ri[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},vE),e);if(this.storageKey=i.storageKey,this.instanceID=(n=Xo.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Xo.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Ut()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new ZS({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Bw(i.fetch),this.lock=i.lock||M0,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:Ut()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=QS:this.lock=M0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new wE(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Tw()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=P0(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=P0(this.memoryStorage)),Ut()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Rw}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(Ut()&&(n=BS(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Ut()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),SS(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return de(n)?this._returnResult({error:n}):this._returnResult({error:new Es("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Yn}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(de(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:f,password:v,options:w}=e;let g=null,_=null;this.flowType==="pkce"&&([g,_]=await ei(this.storage,this.storageKey)),i=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w==null?void 0:w.emailRedirectTo,body:{email:f,password:v,data:(n=w==null?void 0:w.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken},code_challenge:g,code_challenge_method:_},xform:Yn})}else if("phone"in e){const{phone:f,password:v,options:w}=e;i=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:v,data:(r=w==null?void 0:w.data)!==null&&r!==void 0?r:{},channel:(s=w==null?void 0:w.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken}},xform:Yn})}else throw new Wa("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(de(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:j0})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:j0})}else throw new Wa("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const i=new Qs;return this._returnResult({data:{user:null,session:null},error:i})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(de(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,s,i,o,a,l,c,f,v,w;let g,_;if("message"in e)g=e.message,_=e.signature;else{const{chain:E,wallet:C,statement:b,options:S}=e;let x;if(Ut())if(typeof C=="object")x=C;else{const F=window;if("ethereum"in F&&typeof F.ethereum=="object"&&"request"in F.ethereum&&typeof F.ethereum.request=="function")x=F.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=C}const O=new URL((n=S==null?void 0:S.url)!==null&&n!==void 0?n:window.location.href),L=await x.request({method:"eth_requestAccounts"}).then(F=>F).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!L||L.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const D=Nw(L[0]);let W=(r=S==null?void 0:S.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!W){const F=await x.request({method:"eth_chainId"});W=tE(F)}const q={domain:O.host,address:D,statement:b,uri:O.href,version:"1",chainId:W,nonce:(s=S==null?void 0:S.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=S==null?void 0:S.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=S==null?void 0:S.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=S==null?void 0:S.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=S==null?void 0:S.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(f=S==null?void 0:S.signInWithEthereum)===null||f===void 0?void 0:f.resources};g=rE(q),_=await x.request({method:"personal_sign",params:[nE(g),D]})}try{const{data:E,error:C}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:_},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:Yn});if(C)throw C;if(!E||!E.session||!E.user){const b=new Qs;return this._returnResult({data:{user:null,session:null},error:b})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:C})}catch(E){if(de(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async signInWithSolana(e){var n,r,s,i,o,a,l,c,f,v,w,g;let _,E;if("message"in e)_=e.message,E=e.signature;else{const{chain:C,wallet:b,statement:S,options:x}=e;let O;if(Ut())if(typeof b=="object")O=b;else{const D=window;if("solana"in D&&typeof D.solana=="object"&&("signIn"in D.solana&&typeof D.solana.signIn=="function"||"signMessage"in D.solana&&typeof D.solana.signMessage=="function"))O=D.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=b}const L=new URL((n=x==null?void 0:x.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in O&&O.signIn){const D=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:L.host,uri:L.href}),S?{statement:S}:null));let W;if(Array.isArray(D)&&D[0]&&typeof D[0]=="object")W=D[0];else if(D&&typeof D=="object"&&"signedMessage"in D&&"signature"in D)W=D;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in W&&"signature"in W&&(typeof W.signedMessage=="string"||W.signedMessage instanceof Uint8Array)&&W.signature instanceof Uint8Array)_=typeof W.signedMessage=="string"?W.signedMessage:new TextDecoder().decode(W.signedMessage),E=W.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${L.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...S?["",S,""]:[""],"Version: 1",`URI: ${L.href}`,`Issued At: ${(s=(r=x==null?void 0:x.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=x==null?void 0:x.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((o=x==null?void 0:x.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((a=x==null?void 0:x.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((c=x==null?void 0:x.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((v=(f=x==null?void 0:x.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||v===void 0)&&v.length?["Resources",...x.signInWithSolana.resources.map(W=>`- ${W}`)]:[]].join(`
`);const D=await O.signMessage(new TextEncoder().encode(_),"utf8");if(!D||!(D instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=D}}try{const{data:C,error:b}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:Ts(E)},!((w=e.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Yn});if(b)throw b;if(!C||!C.session||!C.user){const S=new Qs;return this._returnResult({data:{user:null,session:null},error:S})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:b})}catch(C){if(de(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async _exchangeCodeForSession(e){const n=await ws(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Yn});if(await Dr(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const a=new Qs;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(de(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,a=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Yn}),{data:l,error:c}=a;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const f=new Qs;return this._returnResult({data:{user:null,session:null},error:f})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(n){if(de(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,f=null;this.flowType==="pkce"&&([c,f]=await ei(this.storage,this.storageKey));const{error:v}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:f},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:v})}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:f}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:f})}throw new Wa("You must provide either an email or phone number.")}catch(a){if(de(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Yn});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(de(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var n,r,s,i,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await ei(this.storage,this.storageKey));const c=await ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:GS});return!((i=c.data)===null||i===void 0)&&i.url&&Ut()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(a){if(de(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new vn;const{error:s}=await ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(de(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await ge(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await ge(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new Wa("You must provide either an email or phone number and a type")}catch(n){if(de(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await ws(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Ru:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await ws(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Tu()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=WS(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Yr}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new vn}:await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Yr})})}catch(n){if(de(n))return xS(n)&&(await this._removeSession(),await Dr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new vn;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await ei(this.storage,this.storageKey));const{data:c,error:f}=await ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Yr});if(f)throw f;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(de(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new vn;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=Iu(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(n){if(de(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new vn;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(de(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Ut())throw new Va("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Va(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new k0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Va("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new k0("No code detected.");const{data:S,error:x}=await this._exchangeCodeForSession(e.code);if(x)throw x;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:S.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!i||!a||!o||!c)throw new Va("No session defined in URL");const f=Math.round(Date.now()/1e3),v=parseInt(a);let w=f+v;l&&(w=parseInt(l));const g=w-f;g*1e3<=ui&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${v}s`);const _=w-v;f-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,w,f):f-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,w,f);const{data:E,error:C}=await this._getUser(i);if(C)throw C;const b={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:v,expires_at:w,refresh_token:o,token_type:c,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:b,redirectType:e.type},error:null})}catch(r){if(de(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await ws(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({error:i});const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(_S(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await Dr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=TS(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await ei(this.storage,this.storageKey,!0));try{return await ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(de(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(de(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,c,f;const{data:v,error:w}=i;if(w)throw w;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ge(this.fetch,"GET",g,{headers:this.headers,jwt:(f=(c=v.session)===null||c===void 0?void 0:c.access_token)!==null&&f!==void 0?f:void 0})});if(s)throw s;return Ut()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(de(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:i}}=n;if(s)throw s;const{options:o,provider:a,token:l,access_token:c,nonce:f}=e,v=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:c,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Yn}),{data:w,error:g}=v;return g?this._returnResult({data:{user:null,session:null},error:g}):!w||!w.session||!w.user?this._returnResult({data:{user:null,session:null},error:new Qs}):(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("USER_UPDATED",w.session)),this._returnResult({data:w,error:g}))}catch(s){if(de(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await ge(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(de(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await PS(async s=>(s>0&&await NS(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Yn})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Cu(i)&&Date.now()+o-r<ui})}catch(r){if(this._debug(n,"error",r),de(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Ut()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await ws(this.storage,this.storageKey);if(s&&this.userStorage){let o=await ws(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await di(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Tu()}else if(s&&!s.user&&!s.user){const o=await ws(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Dr(this.storage,this.storageKey+"-user"),await di(this.storage,this.storageKey,s)):s.user=Tu()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Ru;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Ru}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Cu(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new vn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new bc;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new vn;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),de(i)){const o={data:null,error:i};return Cu(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await di(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=T0(s);await di(this.storage,this.storageKey,i)}else{const s=T0(n);await di(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Dr(this.storage,this.storageKey),await Dr(this.storage,this.storageKey+"-code-verifier"),await Dr(this.storage,this.storageKey+"-user"),this.userStorage&&await Dr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ut()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ui);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/ui);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${ui}ms, refresh threshold is ${nh} ticks`),s<=nh&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof jw)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ut()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await ei(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?this._returnResult({data:null,error:i}):await ge(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(de(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await ge(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(de(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?uE(e.webauthn.credential_response):dE(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await ge(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(n){if(de(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=await ge(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:lE(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:cE(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(de(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Iu(r.access_token);let o=null;i.aal&&(o=i.aal);let a=o;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(a="aal2");const c=i.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await ge(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new vn})})}catch(n){if(de(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new vn});const o=await ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Ut()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(de(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new vn});const o=await ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Ut()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(de(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await ge(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new vn})})}catch(e){if(de(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await ge(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new vn})})}catch(n){if(de(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(a=>a.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+vS>s)return r;const{data:i,error:o}=await ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:g,error:_}=await this.getSession();if(_||!g.session)return this._returnResult({data:null,error:_});r=g.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=Iu(r);n!=null&&n.allowExpired||$S(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:i,header:s,signature:o},error:null}}const f=zS(s.alg),v=await crypto.subtle.importKey("jwk",c,f,!0,["verify"]);if(!await crypto.subtle.verify(f,v,o,CS(`${a}.${l}`)))throw new ih("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(de(r))return this._returnResult({data:null,error:r});throw r}}}Xo.nextInstanceID={};const bE=Xo;class _E extends bE{constructor(e){super(e)}}class xE{constructor(e,n,r){var s,i,o;this.supabaseUrl=e,this.supabaseKey=n;const a=pS(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,c={db:oS,realtime:lS,auth:Object.assign(Object.assign({},aS),{storageKey:l}),global:iS},f=fS(r??{},c);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(v,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=f.auth)!==null&&o!==void 0?o:{},this.headers,f.global.fetch),this.fetch=dS(n,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.accessToken&&this.accessToken().then(v=>this.realtime.setAuth(v)).catch(v=>console.warn("Failed to set initial Realtime auth token:",v)),this.rest=new gx(new URL("rest/v1",a).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new nS(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new hx(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,storageKey:o,flowType:a,lock:l,debug:c,throwOnError:f},v,w){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new _E({url:this.authUrl.href,headers:Object.assign(Object.assign({},g),v),storageKey:o,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,flowType:a,lock:l,debug:c,throwOnError:f,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(_=>_.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new jx(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const SE=(t,e,n)=>new xE(t,e,n);function EE(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}EE()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const kE="https://oiprgbmrbffoqvdidnrg.supabase.co",AE="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9pcHJnYm1yYmZmb3F2ZGlkbnJnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ3OTA2MDcsImV4cCI6MjA4MDM2NjYwN30.WmPh8IR_2VfPnREx2ZxeBrSD1orWMJqqdBYUitwkwxc",Be=SE(kE,AE,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"}});function RE(){const{t}=Kn(),[e,n]=G.useState(!0),[r,s]=G.useState(""),[i,o]=G.useState(""),[a,l]=G.useState(""),[c,f]=G.useState(!1),[v,w]=G.useState(null),g=async _=>{if(_.preventDefault(),w(null),e&&i!==a){w({type:"error",text:t("auth.passwordsDoNotMatch")});return}f(!0);try{if(e){const{data:E,error:C}=await Be.auth.signUp({email:r,password:i,options:{emailRedirectTo:window.location.origin}});C?w({type:"error",text:C.message||"Signup failed. Please try again."}):E.user&&w({type:"success",text:t("auth.accountCreated")})}else{const{data:E,error:C}=await Be.auth.signInWithPassword({email:r,password:i});C?w({type:"error",text:C.message||"Sign in failed. Please check your credentials."}):E.session&&w({type:"success",text:"Successfully signed in!"})}}catch{w({type:"error",text:"An error occurred. Please try again."})}finally{f(!1)}};return p.jsx("div",{className:"auth-page",children:p.jsxs("div",{className:"auth-container glass-card",children:[p.jsxs("div",{className:"auth-header",children:[p.jsx("h1",{className:"auth-title",children:t(e?"auth.createAccount":"auth.welcomeBack")}),p.jsx("p",{className:"auth-description",children:t(e?"auth.signUpDescription":"auth.signInDescription")})]}),p.jsxs("form",{onSubmit:g,className:"auth-form",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"email",children:t("auth.email")}),p.jsx("input",{type:"email",id:"email",value:r,onChange:_=>s(_.target.value),required:!0,placeholder:t("auth.emailPlaceholder")})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"password",children:t("auth.password")}),p.jsx("input",{type:"password",id:"password",value:i,onChange:_=>o(_.target.value),required:!0,placeholder:t("auth.passwordPlaceholder"),minLength:6})]}),e&&p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"confirmPassword",children:t("auth.confirmPassword")}),p.jsx("input",{type:"password",id:"confirmPassword",value:a,onChange:_=>l(_.target.value),required:!0,placeholder:t("auth.passwordPlaceholder"),minLength:6})]}),v&&p.jsx("div",{className:`auth-message ${v.type}`,children:v.text}),p.jsx("button",{type:"submit",className:"auth-submit-button",disabled:c,children:t(c?"auth.processing":e?"auth.createAccount":"auth.signIn")})]}),p.jsx("div",{className:"auth-toggle",children:p.jsxs("p",{children:[t(e?"auth.alreadyHaveAccount":"auth.dontHaveAccount"),p.jsx("button",{type:"button",onClick:()=>{n(!e),w(null),s(""),o(""),l("")},className:"toggle-button",children:t(e?"auth.signIn":"auth.signUp")})]})}),p.jsx("a",{href:"/",className:"back-home",children:t("auth.backHome")})]})})}function CE(){const[t,e]=G.useState([]),[n,r]=G.useState(!0),[s,i]=G.useState(new Date);G.useEffect(()=>{a();const c=setInterval(a,6e4);return()=>clearInterval(c)},[]);const o=(c,f)=>{const w=[],g=Math.abs(f)/100;for(let _=0;_<20;_++){const E=_/20,C=c*(1-f/100*(1-E)),b=(Math.random()-.5)*c*g*.5;w.push(C+b)}return w},a=async()=>{try{const f=await(await fetch("https://api.exchangerate-api.com/v4/latest/USD")).json(),w=[{code:"USD",name:"US Dollar",rate:1},{code:"EUR",name:"Euro",rate:f.rates.EUR},{code:"THB",name:"Thai Baht",rate:f.rates.THB}].map(g=>{const _=(Math.random()-.5)*2;return{...g,change:_,history:o(g.rate,_)}});e(w),i(new Date),r(!1)}catch{r(!1)}},l=(c,f)=>{if(c.length<2)return null;const v=120,w=40,g=2,_=Math.min(...c),C=Math.max(...c)-_||1,S=`M ${c.map((O,L)=>{const D=L/(c.length-1)*v,W=w-(O-_)/C*(w-g*2)-g;return`${D},${W}`}).join(" L ")}`,x=`gradient-${Math.random().toString(36).substr(2,9)}`;return p.jsxs("svg",{width:v,height:w,className:"sparkline",children:[p.jsx("defs",{children:p.jsxs("linearGradient",{id:x,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[p.jsx("stop",{offset:"0%",stopColor:f?"#34d399":"#f87171",stopOpacity:"0.3"}),p.jsx("stop",{offset:"100%",stopColor:f?"#34d399":"#f87171",stopOpacity:"0"})]})}),p.jsx("path",{d:`${S} L ${v},${w} L 0,${w} Z`,fill:`url(#${x})`}),p.jsx("path",{d:S,fill:"none",stroke:f?"#34d399":"#f87171",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})};return n?p.jsxs("div",{className:"rates-loading",children:[p.jsx("div",{className:"spinner"}),p.jsx("p",{children:"Loading exchange rates..."})]}):p.jsxs("div",{className:"exchange-rates",children:[p.jsx("div",{className:"rates-header",children:p.jsxs("span",{className:"rates-update",children:["Last updated: ",s.toLocaleTimeString()]})}),p.jsx("div",{className:"rates-grid",children:t.map(c=>p.jsxs("div",{className:"rate-card",children:[p.jsxs("div",{className:"rate-header",children:[p.jsx("div",{className:"rate-icon",children:c.code==="USD"?"$":c.code==="EUR"?"":""}),p.jsxs("div",{className:"rate-info",children:[p.jsx("h3",{children:c.code}),p.jsx("p",{children:c.name})]})]}),p.jsx("div",{className:"rate-chart",children:l(c.history,c.change>=0)}),p.jsxs("div",{className:"rate-value",children:[p.jsx("span",{className:"rate-price",children:c.rate.toFixed(4)}),p.jsxs("span",{className:`rate-change ${c.change>=0?"positive":"negative"}`,children:[c.change>=0?"+":"",c.change.toFixed(2),"%"]})]})]},c.code))})]})}var _e={},_c={};_c.byteLength=BE;_c.toByteArray=NE;_c.fromByteArray=ME;var fr=[],Nn=[],IE=typeof Uint8Array<"u"?Uint8Array:Array,ju="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var si=0,TE=ju.length;si<TE;++si)fr[si]=ju[si],Nn[ju.charCodeAt(si)]=si;Nn[45]=62;Nn[95]=63;function Ow(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function BE(t){var e=Ow(t),n=e[0],r=e[1];return(n+r)*3/4-r}function jE(t,e,n){return(e+n)*3/4-n}function NE(t){var e,n=Ow(t),r=n[0],s=n[1],i=new IE(jE(t,r,s)),o=0,a=s>0?r-4:r,l;for(l=0;l<a;l+=4)e=Nn[t.charCodeAt(l)]<<18|Nn[t.charCodeAt(l+1)]<<12|Nn[t.charCodeAt(l+2)]<<6|Nn[t.charCodeAt(l+3)],i[o++]=e>>16&255,i[o++]=e>>8&255,i[o++]=e&255;return s===2&&(e=Nn[t.charCodeAt(l)]<<2|Nn[t.charCodeAt(l+1)]>>4,i[o++]=e&255),s===1&&(e=Nn[t.charCodeAt(l)]<<10|Nn[t.charCodeAt(l+1)]<<4|Nn[t.charCodeAt(l+2)]>>2,i[o++]=e>>8&255,i[o++]=e&255),i}function PE(t){return fr[t>>18&63]+fr[t>>12&63]+fr[t>>6&63]+fr[t&63]}function OE(t,e,n){for(var r,s=[],i=e;i<n;i+=3)r=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),s.push(PE(r));return s.join("")}function ME(t){for(var e,n=t.length,r=n%3,s=[],i=16383,o=0,a=n-r;o<a;o+=i)s.push(OE(t,o,o+i>a?a:o+i));return r===1?(e=t[n-1],s.push(fr[e>>2]+fr[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],s.push(fr[e>>10]+fr[e>>4&63]+fr[e<<2&63]+"=")),s.join("")}var _f={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */_f.read=function(t,e,n,r,s){var i,o,a=s*8-r-1,l=(1<<a)-1,c=l>>1,f=-7,v=n?s-1:0,w=n?-1:1,g=t[e+v];for(v+=w,i=g&(1<<-f)-1,g>>=-f,f+=a;f>0;i=i*256+t[e+v],v+=w,f-=8);for(o=i&(1<<-f)-1,i>>=-f,f+=r;f>0;o=o*256+t[e+v],v+=w,f-=8);if(i===0)i=1-c;else{if(i===l)return o?NaN:(g?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-c}return(g?-1:1)*o*Math.pow(2,i-r)};_f.write=function(t,e,n,r,s,i){var o,a,l,c=i*8-s-1,f=(1<<c)-1,v=f>>1,w=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:i-1,_=r?1:-1,E=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=f):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+v>=1?e+=w/l:e+=w*Math.pow(2,1-v),e*l>=2&&(o++,l/=2),o+v>=f?(a=0,o=f):o+v>=1?(a=(e*l-1)*Math.pow(2,s),o=o+v):(a=e*Math.pow(2,v-1)*Math.pow(2,s),o=0));s>=8;t[n+g]=a&255,g+=_,a/=256,s-=8);for(o=o<<s|a,c+=s;c>0;t[n+g]=o&255,g+=_,o/=256,c-=8);t[n+g-_]|=E*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=_c,n=_f,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=S,t.INSPECT_MAX_BYTES=50;const s=2147483647;t.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const A=new Uint8Array(1),d={foo:function(){return 42}};return Object.setPrototypeOf(d,Uint8Array.prototype),Object.setPrototypeOf(A,d),A.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(A){if(A>s)throw new RangeError('The value "'+A+'" is invalid for option "size"');const d=new Uint8Array(A);return Object.setPrototypeOf(d,a.prototype),d}function a(A,d,y){if(typeof A=="number"){if(typeof d=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(A)}return l(A,d,y)}a.poolSize=8192;function l(A,d,y){if(typeof A=="string")return w(A,d);if(ArrayBuffer.isView(A))return _(A);if(A==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof A);if(wn(A,ArrayBuffer)||A&&wn(A.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(wn(A,SharedArrayBuffer)||A&&wn(A.buffer,SharedArrayBuffer)))return E(A,d,y);if(typeof A=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const j=A.valueOf&&A.valueOf();if(j!=null&&j!==A)return a.from(j,d,y);const U=C(A);if(U)return U;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof A[Symbol.toPrimitive]=="function")return a.from(A[Symbol.toPrimitive]("string"),d,y);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof A)}a.from=function(A,d,y){return l(A,d,y)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function c(A){if(typeof A!="number")throw new TypeError('"size" argument must be of type number');if(A<0)throw new RangeError('The value "'+A+'" is invalid for option "size"')}function f(A,d,y){return c(A),A<=0?o(A):d!==void 0?typeof y=="string"?o(A).fill(d,y):o(A).fill(d):o(A)}a.alloc=function(A,d,y){return f(A,d,y)};function v(A){return c(A),o(A<0?0:b(A)|0)}a.allocUnsafe=function(A){return v(A)},a.allocUnsafeSlow=function(A){return v(A)};function w(A,d){if((typeof d!="string"||d==="")&&(d="utf8"),!a.isEncoding(d))throw new TypeError("Unknown encoding: "+d);const y=x(A,d)|0;let j=o(y);const U=j.write(A,d);return U!==y&&(j=j.slice(0,U)),j}function g(A){const d=A.length<0?0:b(A.length)|0,y=o(d);for(let j=0;j<d;j+=1)y[j]=A[j]&255;return y}function _(A){if(wn(A,Uint8Array)){const d=new Uint8Array(A);return E(d.buffer,d.byteOffset,d.byteLength)}return g(A)}function E(A,d,y){if(d<0||A.byteLength<d)throw new RangeError('"offset" is outside of buffer bounds');if(A.byteLength<d+(y||0))throw new RangeError('"length" is outside of buffer bounds');let j;return d===void 0&&y===void 0?j=new Uint8Array(A):y===void 0?j=new Uint8Array(A,d):j=new Uint8Array(A,d,y),Object.setPrototypeOf(j,a.prototype),j}function C(A){if(a.isBuffer(A)){const d=b(A.length)|0,y=o(d);return y.length===0||A.copy(y,0,0,d),y}if(A.length!==void 0)return typeof A.length!="number"||qe(A.length)?o(0):g(A);if(A.type==="Buffer"&&Array.isArray(A.data))return g(A.data)}function b(A){if(A>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return A|0}function S(A){return+A!=A&&(A=0),a.alloc(+A)}a.isBuffer=function(d){return d!=null&&d._isBuffer===!0&&d!==a.prototype},a.compare=function(d,y){if(wn(d,Uint8Array)&&(d=a.from(d,d.offset,d.byteLength)),wn(y,Uint8Array)&&(y=a.from(y,y.offset,y.byteLength)),!a.isBuffer(d)||!a.isBuffer(y))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(d===y)return 0;let j=d.length,U=y.length;for(let $=0,H=Math.min(j,U);$<H;++$)if(d[$]!==y[$]){j=d[$],U=y[$];break}return j<U?-1:U<j?1:0},a.isEncoding=function(d){switch(String(d).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(d,y){if(!Array.isArray(d))throw new TypeError('"list" argument must be an Array of Buffers');if(d.length===0)return a.alloc(0);let j;if(y===void 0)for(y=0,j=0;j<d.length;++j)y+=d[j].length;const U=a.allocUnsafe(y);let $=0;for(j=0;j<d.length;++j){let H=d[j];if(wn(H,Uint8Array))$+H.length>U.length?(a.isBuffer(H)||(H=a.from(H)),H.copy(U,$)):Uint8Array.prototype.set.call(U,H,$);else if(a.isBuffer(H))H.copy(U,$);else throw new TypeError('"list" argument must be an Array of Buffers');$+=H.length}return U};function x(A,d){if(a.isBuffer(A))return A.length;if(ArrayBuffer.isView(A)||wn(A,ArrayBuffer))return A.byteLength;if(typeof A!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof A);const y=A.length,j=arguments.length>2&&arguments[2]===!0;if(!j&&y===0)return 0;let U=!1;for(;;)switch(d){case"ascii":case"latin1":case"binary":return y;case"utf8":case"utf-8":return ze(A).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y*2;case"hex":return y>>>1;case"base64":return He(A).length;default:if(U)return j?-1:ze(A).length;d=(""+d).toLowerCase(),U=!0}}a.byteLength=x;function O(A,d,y){let j=!1;if((d===void 0||d<0)&&(d=0),d>this.length||((y===void 0||y>this.length)&&(y=this.length),y<=0)||(y>>>=0,d>>>=0,y<=d))return"";for(A||(A="utf8");;)switch(A){case"hex":return P(this,d,y);case"utf8":case"utf-8":return u(this,d,y);case"ascii":return B(this,d,y);case"latin1":case"binary":return I(this,d,y);case"base64":return T(this,d,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,d,y);default:if(j)throw new TypeError("Unknown encoding: "+A);A=(A+"").toLowerCase(),j=!0}}a.prototype._isBuffer=!0;function L(A,d,y){const j=A[d];A[d]=A[y],A[y]=j}a.prototype.swap16=function(){const d=this.length;if(d%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let y=0;y<d;y+=2)L(this,y,y+1);return this},a.prototype.swap32=function(){const d=this.length;if(d%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let y=0;y<d;y+=4)L(this,y,y+3),L(this,y+1,y+2);return this},a.prototype.swap64=function(){const d=this.length;if(d%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let y=0;y<d;y+=8)L(this,y,y+7),L(this,y+1,y+6),L(this,y+2,y+5),L(this,y+3,y+4);return this},a.prototype.toString=function(){const d=this.length;return d===0?"":arguments.length===0?u(this,0,d):O.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(d){if(!a.isBuffer(d))throw new TypeError("Argument must be a Buffer");return this===d?!0:a.compare(this,d)===0},a.prototype.inspect=function(){let d="";const y=t.INSPECT_MAX_BYTES;return d=this.toString("hex",0,y).replace(/(.{2})/g,"$1 ").trim(),this.length>y&&(d+=" ... "),"<Buffer "+d+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(d,y,j,U,$){if(wn(d,Uint8Array)&&(d=a.from(d,d.offset,d.byteLength)),!a.isBuffer(d))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof d);if(y===void 0&&(y=0),j===void 0&&(j=d?d.length:0),U===void 0&&(U=0),$===void 0&&($=this.length),y<0||j>d.length||U<0||$>this.length)throw new RangeError("out of range index");if(U>=$&&y>=j)return 0;if(U>=$)return-1;if(y>=j)return 1;if(y>>>=0,j>>>=0,U>>>=0,$>>>=0,this===d)return 0;let H=$-U,xe=j-y;const be=Math.min(H,xe),we=this.slice(U,$),De=d.slice(y,j);for(let me=0;me<be;++me)if(we[me]!==De[me]){H=we[me],xe=De[me];break}return H<xe?-1:xe<H?1:0};function D(A,d,y,j,U){if(A.length===0)return-1;if(typeof y=="string"?(j=y,y=0):y>2147483647?y=2147483647:y<-2147483648&&(y=-2147483648),y=+y,qe(y)&&(y=U?0:A.length-1),y<0&&(y=A.length+y),y>=A.length){if(U)return-1;y=A.length-1}else if(y<0)if(U)y=0;else return-1;if(typeof d=="string"&&(d=a.from(d,j)),a.isBuffer(d))return d.length===0?-1:W(A,d,y,j,U);if(typeof d=="number")return d=d&255,typeof Uint8Array.prototype.indexOf=="function"?U?Uint8Array.prototype.indexOf.call(A,d,y):Uint8Array.prototype.lastIndexOf.call(A,d,y):W(A,[d],y,j,U);throw new TypeError("val must be string, number or Buffer")}function W(A,d,y,j,U){let $=1,H=A.length,xe=d.length;if(j!==void 0&&(j=String(j).toLowerCase(),j==="ucs2"||j==="ucs-2"||j==="utf16le"||j==="utf-16le")){if(A.length<2||d.length<2)return-1;$=2,H/=2,xe/=2,y/=2}function be(De,me){return $===1?De[me]:De.readUInt16BE(me*$)}let we;if(U){let De=-1;for(we=y;we<H;we++)if(be(A,we)===be(d,De===-1?0:we-De)){if(De===-1&&(De=we),we-De+1===xe)return De*$}else De!==-1&&(we-=we-De),De=-1}else for(y+xe>H&&(y=H-xe),we=y;we>=0;we--){let De=!0;for(let me=0;me<xe;me++)if(be(A,we+me)!==be(d,me)){De=!1;break}if(De)return we}return-1}a.prototype.includes=function(d,y,j){return this.indexOf(d,y,j)!==-1},a.prototype.indexOf=function(d,y,j){return D(this,d,y,j,!0)},a.prototype.lastIndexOf=function(d,y,j){return D(this,d,y,j,!1)};function q(A,d,y,j){y=Number(y)||0;const U=A.length-y;j?(j=Number(j),j>U&&(j=U)):j=U;const $=d.length;j>$/2&&(j=$/2);let H;for(H=0;H<j;++H){const xe=parseInt(d.substr(H*2,2),16);if(qe(xe))return H;A[y+H]=xe}return H}function F(A,d,y,j){return Ue(ze(d,A.length-y),A,y,j)}function K(A,d,y,j){return Ue(tt(d),A,y,j)}function Y(A,d,y,j){return Ue(He(d),A,y,j)}function te(A,d,y,j){return Ue(va(d,A.length-y),A,y,j)}a.prototype.write=function(d,y,j,U){if(y===void 0)U="utf8",j=this.length,y=0;else if(j===void 0&&typeof y=="string")U=y,j=this.length,y=0;else if(isFinite(y))y=y>>>0,isFinite(j)?(j=j>>>0,U===void 0&&(U="utf8")):(U=j,j=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const $=this.length-y;if((j===void 0||j>$)&&(j=$),d.length>0&&(j<0||y<0)||y>this.length)throw new RangeError("Attempt to write outside buffer bounds");U||(U="utf8");let H=!1;for(;;)switch(U){case"hex":return q(this,d,y,j);case"utf8":case"utf-8":return F(this,d,y,j);case"ascii":case"latin1":case"binary":return K(this,d,y,j);case"base64":return Y(this,d,y,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return te(this,d,y,j);default:if(H)throw new TypeError("Unknown encoding: "+U);U=(""+U).toLowerCase(),H=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function T(A,d,y){return d===0&&y===A.length?e.fromByteArray(A):e.fromByteArray(A.slice(d,y))}function u(A,d,y){y=Math.min(A.length,y);const j=[];let U=d;for(;U<y;){const $=A[U];let H=null,xe=$>239?4:$>223?3:$>191?2:1;if(U+xe<=y){let be,we,De,me;switch(xe){case 1:$<128&&(H=$);break;case 2:be=A[U+1],(be&192)===128&&(me=($&31)<<6|be&63,me>127&&(H=me));break;case 3:be=A[U+1],we=A[U+2],(be&192)===128&&(we&192)===128&&(me=($&15)<<12|(be&63)<<6|we&63,me>2047&&(me<55296||me>57343)&&(H=me));break;case 4:be=A[U+1],we=A[U+2],De=A[U+3],(be&192)===128&&(we&192)===128&&(De&192)===128&&(me=($&15)<<18|(be&63)<<12|(we&63)<<6|De&63,me>65535&&me<1114112&&(H=me))}}H===null?(H=65533,xe=1):H>65535&&(H-=65536,j.push(H>>>10&1023|55296),H=56320|H&1023),j.push(H),U+=xe}return k(j)}const m=4096;function k(A){const d=A.length;if(d<=m)return String.fromCharCode.apply(String,A);let y="",j=0;for(;j<d;)y+=String.fromCharCode.apply(String,A.slice(j,j+=m));return y}function B(A,d,y){let j="";y=Math.min(A.length,y);for(let U=d;U<y;++U)j+=String.fromCharCode(A[U]&127);return j}function I(A,d,y){let j="";y=Math.min(A.length,y);for(let U=d;U<y;++U)j+=String.fromCharCode(A[U]);return j}function P(A,d,y){const j=A.length;(!d||d<0)&&(d=0),(!y||y<0||y>j)&&(y=j);let U="";for(let $=d;$<y;++$)U+=nt[A[$]];return U}function N(A,d,y){const j=A.slice(d,y);let U="";for(let $=0;$<j.length-1;$+=2)U+=String.fromCharCode(j[$]+j[$+1]*256);return U}a.prototype.slice=function(d,y){const j=this.length;d=~~d,y=y===void 0?j:~~y,d<0?(d+=j,d<0&&(d=0)):d>j&&(d=j),y<0?(y+=j,y<0&&(y=0)):y>j&&(y=j),y<d&&(y=d);const U=this.subarray(d,y);return Object.setPrototypeOf(U,a.prototype),U};function R(A,d,y){if(A%1!==0||A<0)throw new RangeError("offset is not uint");if(A+d>y)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(d,y,j){d=d>>>0,y=y>>>0,j||R(d,y,this.length);let U=this[d],$=1,H=0;for(;++H<y&&($*=256);)U+=this[d+H]*$;return U},a.prototype.readUintBE=a.prototype.readUIntBE=function(d,y,j){d=d>>>0,y=y>>>0,j||R(d,y,this.length);let U=this[d+--y],$=1;for(;y>0&&($*=256);)U+=this[d+--y]*$;return U},a.prototype.readUint8=a.prototype.readUInt8=function(d,y){return d=d>>>0,y||R(d,1,this.length),this[d]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(d,y){return d=d>>>0,y||R(d,2,this.length),this[d]|this[d+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(d,y){return d=d>>>0,y||R(d,2,this.length),this[d]<<8|this[d+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(d,y){return d=d>>>0,y||R(d,4,this.length),(this[d]|this[d+1]<<8|this[d+2]<<16)+this[d+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(d,y){return d=d>>>0,y||R(d,4,this.length),this[d]*16777216+(this[d+1]<<16|this[d+2]<<8|this[d+3])},a.prototype.readBigUInt64LE=Gn(function(d){d=d>>>0,Tn(d,"offset");const y=this[d],j=this[d+7];(y===void 0||j===void 0)&&Pe(d,this.length-8);const U=y+this[++d]*2**8+this[++d]*2**16+this[++d]*2**24,$=this[++d]+this[++d]*2**8+this[++d]*2**16+j*2**24;return BigInt(U)+(BigInt($)<<BigInt(32))}),a.prototype.readBigUInt64BE=Gn(function(d){d=d>>>0,Tn(d,"offset");const y=this[d],j=this[d+7];(y===void 0||j===void 0)&&Pe(d,this.length-8);const U=y*2**24+this[++d]*2**16+this[++d]*2**8+this[++d],$=this[++d]*2**24+this[++d]*2**16+this[++d]*2**8+j;return(BigInt(U)<<BigInt(32))+BigInt($)}),a.prototype.readIntLE=function(d,y,j){d=d>>>0,y=y>>>0,j||R(d,y,this.length);let U=this[d],$=1,H=0;for(;++H<y&&($*=256);)U+=this[d+H]*$;return $*=128,U>=$&&(U-=Math.pow(2,8*y)),U},a.prototype.readIntBE=function(d,y,j){d=d>>>0,y=y>>>0,j||R(d,y,this.length);let U=y,$=1,H=this[d+--U];for(;U>0&&($*=256);)H+=this[d+--U]*$;return $*=128,H>=$&&(H-=Math.pow(2,8*y)),H},a.prototype.readInt8=function(d,y){return d=d>>>0,y||R(d,1,this.length),this[d]&128?(255-this[d]+1)*-1:this[d]},a.prototype.readInt16LE=function(d,y){d=d>>>0,y||R(d,2,this.length);const j=this[d]|this[d+1]<<8;return j&32768?j|4294901760:j},a.prototype.readInt16BE=function(d,y){d=d>>>0,y||R(d,2,this.length);const j=this[d+1]|this[d]<<8;return j&32768?j|4294901760:j},a.prototype.readInt32LE=function(d,y){return d=d>>>0,y||R(d,4,this.length),this[d]|this[d+1]<<8|this[d+2]<<16|this[d+3]<<24},a.prototype.readInt32BE=function(d,y){return d=d>>>0,y||R(d,4,this.length),this[d]<<24|this[d+1]<<16|this[d+2]<<8|this[d+3]},a.prototype.readBigInt64LE=Gn(function(d){d=d>>>0,Tn(d,"offset");const y=this[d],j=this[d+7];(y===void 0||j===void 0)&&Pe(d,this.length-8);const U=this[d+4]+this[d+5]*2**8+this[d+6]*2**16+(j<<24);return(BigInt(U)<<BigInt(32))+BigInt(y+this[++d]*2**8+this[++d]*2**16+this[++d]*2**24)}),a.prototype.readBigInt64BE=Gn(function(d){d=d>>>0,Tn(d,"offset");const y=this[d],j=this[d+7];(y===void 0||j===void 0)&&Pe(d,this.length-8);const U=(y<<24)+this[++d]*2**16+this[++d]*2**8+this[++d];return(BigInt(U)<<BigInt(32))+BigInt(this[++d]*2**24+this[++d]*2**16+this[++d]*2**8+j)}),a.prototype.readFloatLE=function(d,y){return d=d>>>0,y||R(d,4,this.length),n.read(this,d,!0,23,4)},a.prototype.readFloatBE=function(d,y){return d=d>>>0,y||R(d,4,this.length),n.read(this,d,!1,23,4)},a.prototype.readDoubleLE=function(d,y){return d=d>>>0,y||R(d,8,this.length),n.read(this,d,!0,52,8)},a.prototype.readDoubleBE=function(d,y){return d=d>>>0,y||R(d,8,this.length),n.read(this,d,!1,52,8)};function h(A,d,y,j,U,$){if(!a.isBuffer(A))throw new TypeError('"buffer" argument must be a Buffer instance');if(d>U||d<$)throw new RangeError('"value" argument is out of bounds');if(y+j>A.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(d,y,j,U){if(d=+d,y=y>>>0,j=j>>>0,!U){const xe=Math.pow(2,8*j)-1;h(this,d,y,j,xe,0)}let $=1,H=0;for(this[y]=d&255;++H<j&&($*=256);)this[y+H]=d/$&255;return y+j},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(d,y,j,U){if(d=+d,y=y>>>0,j=j>>>0,!U){const xe=Math.pow(2,8*j)-1;h(this,d,y,j,xe,0)}let $=j-1,H=1;for(this[y+$]=d&255;--$>=0&&(H*=256);)this[y+$]=d/H&255;return y+j},a.prototype.writeUint8=a.prototype.writeUInt8=function(d,y,j){return d=+d,y=y>>>0,j||h(this,d,y,1,255,0),this[y]=d&255,y+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(d,y,j){return d=+d,y=y>>>0,j||h(this,d,y,2,65535,0),this[y]=d&255,this[y+1]=d>>>8,y+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(d,y,j){return d=+d,y=y>>>0,j||h(this,d,y,2,65535,0),this[y]=d>>>8,this[y+1]=d&255,y+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(d,y,j){return d=+d,y=y>>>0,j||h(this,d,y,4,4294967295,0),this[y+3]=d>>>24,this[y+2]=d>>>16,this[y+1]=d>>>8,this[y]=d&255,y+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(d,y,j){return d=+d,y=y>>>0,j||h(this,d,y,4,4294967295,0),this[y]=d>>>24,this[y+1]=d>>>16,this[y+2]=d>>>8,this[y+3]=d&255,y+4};function M(A,d,y,j,U){Ne(d,j,U,A,y,7);let $=Number(d&BigInt(4294967295));A[y++]=$,$=$>>8,A[y++]=$,$=$>>8,A[y++]=$,$=$>>8,A[y++]=$;let H=Number(d>>BigInt(32)&BigInt(4294967295));return A[y++]=H,H=H>>8,A[y++]=H,H=H>>8,A[y++]=H,H=H>>8,A[y++]=H,y}function ee(A,d,y,j,U){Ne(d,j,U,A,y,7);let $=Number(d&BigInt(4294967295));A[y+7]=$,$=$>>8,A[y+6]=$,$=$>>8,A[y+5]=$,$=$>>8,A[y+4]=$;let H=Number(d>>BigInt(32)&BigInt(4294967295));return A[y+3]=H,H=H>>8,A[y+2]=H,H=H>>8,A[y+1]=H,H=H>>8,A[y]=H,y+8}a.prototype.writeBigUInt64LE=Gn(function(d,y=0){return M(this,d,y,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Gn(function(d,y=0){return ee(this,d,y,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(d,y,j,U){if(d=+d,y=y>>>0,!U){const be=Math.pow(2,8*j-1);h(this,d,y,j,be-1,-be)}let $=0,H=1,xe=0;for(this[y]=d&255;++$<j&&(H*=256);)d<0&&xe===0&&this[y+$-1]!==0&&(xe=1),this[y+$]=(d/H>>0)-xe&255;return y+j},a.prototype.writeIntBE=function(d,y,j,U){if(d=+d,y=y>>>0,!U){const be=Math.pow(2,8*j-1);h(this,d,y,j,be-1,-be)}let $=j-1,H=1,xe=0;for(this[y+$]=d&255;--$>=0&&(H*=256);)d<0&&xe===0&&this[y+$+1]!==0&&(xe=1),this[y+$]=(d/H>>0)-xe&255;return y+j},a.prototype.writeInt8=function(d,y,j){return d=+d,y=y>>>0,j||h(this,d,y,1,127,-128),d<0&&(d=255+d+1),this[y]=d&255,y+1},a.prototype.writeInt16LE=function(d,y,j){return d=+d,y=y>>>0,j||h(this,d,y,2,32767,-32768),this[y]=d&255,this[y+1]=d>>>8,y+2},a.prototype.writeInt16BE=function(d,y,j){return d=+d,y=y>>>0,j||h(this,d,y,2,32767,-32768),this[y]=d>>>8,this[y+1]=d&255,y+2},a.prototype.writeInt32LE=function(d,y,j){return d=+d,y=y>>>0,j||h(this,d,y,4,2147483647,-2147483648),this[y]=d&255,this[y+1]=d>>>8,this[y+2]=d>>>16,this[y+3]=d>>>24,y+4},a.prototype.writeInt32BE=function(d,y,j){return d=+d,y=y>>>0,j||h(this,d,y,4,2147483647,-2147483648),d<0&&(d=4294967295+d+1),this[y]=d>>>24,this[y+1]=d>>>16,this[y+2]=d>>>8,this[y+3]=d&255,y+4},a.prototype.writeBigInt64LE=Gn(function(d,y=0){return M(this,d,y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Gn(function(d,y=0){return ee(this,d,y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function X(A,d,y,j,U,$){if(y+j>A.length)throw new RangeError("Index out of range");if(y<0)throw new RangeError("Index out of range")}function re(A,d,y,j,U){return d=+d,y=y>>>0,U||X(A,d,y,4),n.write(A,d,y,j,23,4),y+4}a.prototype.writeFloatLE=function(d,y,j){return re(this,d,y,!0,j)},a.prototype.writeFloatBE=function(d,y,j){return re(this,d,y,!1,j)};function ve(A,d,y,j,U){return d=+d,y=y>>>0,U||X(A,d,y,8),n.write(A,d,y,j,52,8),y+8}a.prototype.writeDoubleLE=function(d,y,j){return ve(this,d,y,!0,j)},a.prototype.writeDoubleBE=function(d,y,j){return ve(this,d,y,!1,j)},a.prototype.copy=function(d,y,j,U){if(!a.isBuffer(d))throw new TypeError("argument should be a Buffer");if(j||(j=0),!U&&U!==0&&(U=this.length),y>=d.length&&(y=d.length),y||(y=0),U>0&&U<j&&(U=j),U===j||d.length===0||this.length===0)return 0;if(y<0)throw new RangeError("targetStart out of bounds");if(j<0||j>=this.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("sourceEnd out of bounds");U>this.length&&(U=this.length),d.length-y<U-j&&(U=d.length-y+j);const $=U-j;return this===d&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(y,j,U):Uint8Array.prototype.set.call(d,this.subarray(j,U),y),$},a.prototype.fill=function(d,y,j,U){if(typeof d=="string"){if(typeof y=="string"?(U=y,y=0,j=this.length):typeof j=="string"&&(U=j,j=this.length),U!==void 0&&typeof U!="string")throw new TypeError("encoding must be a string");if(typeof U=="string"&&!a.isEncoding(U))throw new TypeError("Unknown encoding: "+U);if(d.length===1){const H=d.charCodeAt(0);(U==="utf8"&&H<128||U==="latin1")&&(d=H)}}else typeof d=="number"?d=d&255:typeof d=="boolean"&&(d=Number(d));if(y<0||this.length<y||this.length<j)throw new RangeError("Out of range index");if(j<=y)return this;y=y>>>0,j=j===void 0?this.length:j>>>0,d||(d=0);let $;if(typeof d=="number")for($=y;$<j;++$)this[$]=d;else{const H=a.isBuffer(d)?d:a.from(d,U),xe=H.length;if(xe===0)throw new TypeError('The value "'+d+'" is invalid for argument "value"');for($=0;$<j-y;++$)this[$+y]=H[$%xe]}return this};const ye={};function pe(A,d,y){ye[A]=class extends y{constructor(){super(),Object.defineProperty(this,"message",{value:d.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${A}]`,this.stack,delete this.name}get code(){return A}set code(U){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:U,writable:!0})}toString(){return`${this.name} [${A}]: ${this.message}`}}}pe("ERR_BUFFER_OUT_OF_BOUNDS",function(A){return A?`${A} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),pe("ERR_INVALID_ARG_TYPE",function(A,d){return`The "${A}" argument must be of type number. Received type ${typeof d}`},TypeError),pe("ERR_OUT_OF_RANGE",function(A,d,y){let j=`The value of "${A}" is out of range.`,U=y;return Number.isInteger(y)&&Math.abs(y)>2**32?U=Qe(String(y)):typeof y=="bigint"&&(U=String(y),(y>BigInt(2)**BigInt(32)||y<-(BigInt(2)**BigInt(32)))&&(U=Qe(U)),U+="n"),j+=` It must be ${d}. Received ${U}`,j},RangeError);function Qe(A){let d="",y=A.length;const j=A[0]==="-"?1:0;for(;y>=j+4;y-=3)d=`_${A.slice(y-3,y)}${d}`;return`${A.slice(0,y)}${d}`}function je(A,d,y){Tn(d,"offset"),(A[d]===void 0||A[d+y]===void 0)&&Pe(d,A.length-(y+1))}function Ne(A,d,y,j,U,$){if(A>y||A<d){const H=typeof d=="bigint"?"n":"";let xe;throw d===0||d===BigInt(0)?xe=`>= 0${H} and < 2${H} ** ${($+1)*8}${H}`:xe=`>= -(2${H} ** ${($+1)*8-1}${H}) and < 2 ** ${($+1)*8-1}${H}`,new ye.ERR_OUT_OF_RANGE("value",xe,A)}je(j,U,$)}function Tn(A,d){if(typeof A!="number")throw new ye.ERR_INVALID_ARG_TYPE(d,"number",A)}function Pe(A,d,y){throw Math.floor(A)!==A?(Tn(A,y),new ye.ERR_OUT_OF_RANGE("offset","an integer",A)):d<0?new ye.ERR_BUFFER_OUT_OF_BOUNDS:new ye.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${d}`,A)}const et=/[^+/0-9A-Za-z-_]/g;function wa(A){if(A=A.split("=")[0],A=A.trim().replace(et,""),A.length<2)return"";for(;A.length%4!==0;)A=A+"=";return A}function ze(A,d){d=d||1/0;let y;const j=A.length;let U=null;const $=[];for(let H=0;H<j;++H){if(y=A.charCodeAt(H),y>55295&&y<57344){if(!U){if(y>56319){(d-=3)>-1&&$.push(239,191,189);continue}else if(H+1===j){(d-=3)>-1&&$.push(239,191,189);continue}U=y;continue}if(y<56320){(d-=3)>-1&&$.push(239,191,189),U=y;continue}y=(U-55296<<10|y-56320)+65536}else U&&(d-=3)>-1&&$.push(239,191,189);if(U=null,y<128){if((d-=1)<0)break;$.push(y)}else if(y<2048){if((d-=2)<0)break;$.push(y>>6|192,y&63|128)}else if(y<65536){if((d-=3)<0)break;$.push(y>>12|224,y>>6&63|128,y&63|128)}else if(y<1114112){if((d-=4)<0)break;$.push(y>>18|240,y>>12&63|128,y>>6&63|128,y&63|128)}else throw new Error("Invalid code point")}return $}function tt(A){const d=[];for(let y=0;y<A.length;++y)d.push(A.charCodeAt(y)&255);return d}function va(A,d){let y,j,U;const $=[];for(let H=0;H<A.length&&!((d-=2)<0);++H)y=A.charCodeAt(H),j=y>>8,U=y%256,$.push(U),$.push(j);return $}function He(A){return e.toByteArray(wa(A))}function Ue(A,d,y,j){let U;for(U=0;U<j&&!(U+y>=d.length||U>=A.length);++U)d[U+y]=A[U];return U}function wn(A,d){return A instanceof d||A!=null&&A.constructor!=null&&A.constructor.name!=null&&A.constructor.name===d.name}function qe(A){return A!==A}const nt=function(){const A="0123456789abcdef",d=new Array(256);for(let y=0;y<16;++y){const j=y*16;for(let U=0;U<16;++U)d[j+U]=A[y]+A[U]}return d}();function Gn(A){return typeof BigInt>"u"?rt:A}function rt(){throw new Error("BigInt not supported")}})(_e);const ii=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ua(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function oh(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Hs(t,...e){if(!ua(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Mw(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");oh(t.outputLen),oh(t.blockLen)}function zl(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function LE(t,e){Hs(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Hi(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Nu(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ur(t,e){return t<<32-e|t>>>e}const Lw=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",UE=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ms(t){if(Hs(t),Lw)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=UE[t[n]];return e}const _r={_0:48,_9:57,A:65,F:70,a:97,f:102};function L0(t){if(t>=_r._0&&t<=_r._9)return t-_r._0;if(t>=_r.A&&t<=_r.F)return t-(_r.A-10);if(t>=_r.a&&t<=_r.f)return t-(_r.a-10)}function ql(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(Lw)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=L0(t.charCodeAt(i)),a=L0(t.charCodeAt(i+1));if(o===void 0||a===void 0){const l=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+i)}r[s]=o*16+a}return r}function DE(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function xf(t){return typeof t=="string"&&(t=DE(t)),Hs(t),t}function pr(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Hs(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}class Uw{}function Dw(t){const e=r=>t().update(xf(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Sf(t=32){if(ii&&typeof ii.getRandomValues=="function")return ii.getRandomValues(new Uint8Array(t));if(ii&&typeof ii.randomBytes=="function")return Uint8Array.from(ii.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function FE(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),l=r?4:0,c=r?0:4;t.setUint32(e+l,o,r),t.setUint32(e+c,a,r)}function $E(t,e,n){return t&e^~t&n}function zE(t,e,n){return t&e^t&n^e&n}class Fw extends Uw{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=Nu(this.buffer)}update(e){zl(this),e=xf(e),Hs(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const l=Nu(e);for(;s<=i-o;o+=s)this.process(l,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){zl(this),LE(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,Hi(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let v=o;v<s;v++)n[v]=0;FE(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Nu(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,f=this.get();if(c>f.length)throw new Error("_sha2: outputLen bigger than state");for(let v=0;v<c;v++)a.setUint32(4*v,f[v],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const Fr=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Jt=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Ha=BigInt(2**32-1),U0=BigInt(32);function qE(t,e=!1){return e?{h:Number(t&Ha),l:Number(t>>U0&Ha)}:{h:Number(t>>U0&Ha)|0,l:Number(t&Ha)|0}}function WE(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=qE(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const D0=(t,e,n)=>t>>>n,F0=(t,e,n)=>t<<32-n|e>>>n,oi=(t,e,n)=>t>>>n|e<<32-n,ai=(t,e,n)=>t<<32-n|e>>>n,Ka=(t,e,n)=>t<<64-n|e>>>n-32,Ga=(t,e,n)=>t>>>n-32|e<<64-n;function xr(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const VE=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),HE=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,KE=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),GE=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,JE=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),YE=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,ZE=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),$r=new Uint32Array(64);class XE extends Fw{constructor(e=32){super(64,e,8,!1),this.A=Fr[0]|0,this.B=Fr[1]|0,this.C=Fr[2]|0,this.D=Fr[3]|0,this.E=Fr[4]|0,this.F=Fr[5]|0,this.G=Fr[6]|0,this.H=Fr[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:l}=this;return[e,n,r,s,i,o,a,l]}set(e,n,r,s,i,o,a,l){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,n){for(let v=0;v<16;v++,n+=4)$r[v]=e.getUint32(n,!1);for(let v=16;v<64;v++){const w=$r[v-15],g=$r[v-2],_=ur(w,7)^ur(w,18)^w>>>3,E=ur(g,17)^ur(g,19)^g>>>10;$r[v]=E+$r[v-7]+_+$r[v-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:l,G:c,H:f}=this;for(let v=0;v<64;v++){const w=ur(a,6)^ur(a,11)^ur(a,25),g=f+w+$E(a,l,c)+ZE[v]+$r[v]|0,E=(ur(r,2)^ur(r,13)^ur(r,22))+zE(r,s,i)|0;f=c,c=l,l=a,a=o+g|0,o=i,i=s,s=r,r=g+E|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,f=f+this.H|0,this.set(r,s,i,o,a,l,c,f)}roundClean(){Hi($r)}destroy(){this.set(0,0,0,0,0,0,0,0),Hi(this.buffer)}}const $w=WE(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),QE=$w[0],ek=$w[1],zr=new Uint32Array(80),qr=new Uint32Array(80);class tk extends Fw{constructor(e=64){super(128,e,16,!1),this.Ah=Jt[0]|0,this.Al=Jt[1]|0,this.Bh=Jt[2]|0,this.Bl=Jt[3]|0,this.Ch=Jt[4]|0,this.Cl=Jt[5]|0,this.Dh=Jt[6]|0,this.Dl=Jt[7]|0,this.Eh=Jt[8]|0,this.El=Jt[9]|0,this.Fh=Jt[10]|0,this.Fl=Jt[11]|0,this.Gh=Jt[12]|0,this.Gl=Jt[13]|0,this.Hh=Jt[14]|0,this.Hl=Jt[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:l,Eh:c,El:f,Fh:v,Fl:w,Gh:g,Gl:_,Hh:E,Hl:C}=this;return[e,n,r,s,i,o,a,l,c,f,v,w,g,_,E,C]}set(e,n,r,s,i,o,a,l,c,f,v,w,g,_,E,C){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=c|0,this.El=f|0,this.Fh=v|0,this.Fl=w|0,this.Gh=g|0,this.Gl=_|0,this.Hh=E|0,this.Hl=C|0}process(e,n){for(let x=0;x<16;x++,n+=4)zr[x]=e.getUint32(n),qr[x]=e.getUint32(n+=4);for(let x=16;x<80;x++){const O=zr[x-15]|0,L=qr[x-15]|0,D=oi(O,L,1)^oi(O,L,8)^D0(O,L,7),W=ai(O,L,1)^ai(O,L,8)^F0(O,L,7),q=zr[x-2]|0,F=qr[x-2]|0,K=oi(q,F,19)^Ka(q,F,61)^D0(q,F,6),Y=ai(q,F,19)^Ga(q,F,61)^F0(q,F,6),te=KE(W,Y,qr[x-7],qr[x-16]),T=GE(te,D,K,zr[x-7],zr[x-16]);zr[x]=T|0,qr[x]=te|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:l,Dh:c,Dl:f,Eh:v,El:w,Fh:g,Fl:_,Gh:E,Gl:C,Hh:b,Hl:S}=this;for(let x=0;x<80;x++){const O=oi(v,w,14)^oi(v,w,18)^Ka(v,w,41),L=ai(v,w,14)^ai(v,w,18)^Ga(v,w,41),D=v&g^~v&E,W=w&_^~w&C,q=JE(S,L,W,ek[x],qr[x]),F=YE(q,b,O,D,QE[x],zr[x]),K=q|0,Y=oi(r,s,28)^Ka(r,s,34)^Ka(r,s,39),te=ai(r,s,28)^Ga(r,s,34)^Ga(r,s,39),T=r&i^r&a^i&a,u=s&o^s&l^o&l;b=E|0,S=C|0,E=g|0,C=_|0,g=v|0,_=w|0,{h:v,l:w}=xr(c|0,f|0,F|0,K|0),c=a|0,f=l|0,a=i|0,l=o|0,i=r|0,o=s|0;const m=VE(K,te,u);r=HE(m,F,Y,T),s=m|0}({h:r,l:s}=xr(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=xr(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l}=xr(this.Ch|0,this.Cl|0,a|0,l|0),{h:c,l:f}=xr(this.Dh|0,this.Dl|0,c|0,f|0),{h:v,l:w}=xr(this.Eh|0,this.El|0,v|0,w|0),{h:g,l:_}=xr(this.Fh|0,this.Fl|0,g|0,_|0),{h:E,l:C}=xr(this.Gh|0,this.Gl|0,E|0,C|0),{h:b,l:S}=xr(this.Hh|0,this.Hl|0,b|0,S|0),this.set(r,s,i,o,a,l,c,f,v,w,g,_,E,C,b,S)}roundClean(){Hi(zr,qr)}destroy(){Hi(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const zw=Dw(()=>new XE),nk=Dw(()=>new tk);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ef=BigInt(0),ah=BigInt(1);function qs(t,e=""){if(typeof t!="boolean"){const n=e&&`"${e}"`;throw new Error(n+"expected boolean, got type="+typeof t)}return t}function nr(t,e,n=""){const r=ua(t),s=t==null?void 0:t.length,i=e!==void 0;if(!r||i&&s!==e){const o=n&&`"${n}" `,a=i?` of length ${e}`:"",l=r?`length=${s}`:`type=${typeof t}`;throw new Error(o+"expected Uint8Array"+a+", got "+l)}return t}function Ja(t){const e=t.toString(16);return e.length&1?"0"+e:e}function qw(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Ef:BigInt("0x"+t)}function xc(t){return qw(Ms(t))}function Qo(t){return Hs(t),qw(Ms(Uint8Array.from(t).reverse()))}function kf(t,e){return ql(t.toString(16).padStart(e*2,"0"))}function Ww(t,e){return kf(t,e).reverse()}function it(t,e,n){let r;if(typeof e=="string")try{r=ql(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(ua(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function $0(t){return Uint8Array.from(t)}const Pu=t=>typeof t=="bigint"&&Ef<=t;function rk(t,e,n){return Pu(t)&&Pu(e)&&Pu(n)&&e<=t&&t<n}function lh(t,e,n,r){if(!rk(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Vw(t){let e;for(e=0;t>Ef;t>>=ah,e+=1);return e}const da=t=>(ah<<BigInt(t))-ah;function sk(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=g=>new Uint8Array(g),s=g=>Uint8Array.of(g);let i=r(t),o=r(t),a=0;const l=()=>{i.fill(1),o.fill(0),a=0},c=(...g)=>n(o,i,...g),f=(g=r(0))=>{o=c(s(0),g),i=c(),g.length!==0&&(o=c(s(1),g),i=c())},v=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let g=0;const _=[];for(;g<e;){i=c();const E=i.slice();_.push(E),g+=i.length}return pr(..._)};return(g,_)=>{l(),f(g);let E;for(;!(E=_(v()));)f();return l(),E}}function ha(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const l=typeof a;if(l!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${l}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function Wl(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pn=BigInt(0),Vt=BigInt(1),Bs=BigInt(2),Hw=BigInt(3),Kw=BigInt(4),Gw=BigInt(5),ik=BigInt(7),Jw=BigInt(8),ok=BigInt(9),Yw=BigInt(16);function It(t,e){const n=t%e;return n>=pn?n:e+n}function st(t,e,n){let r=t;for(;e-- >pn;)r*=r,r%=n;return r}function z0(t,e){if(t===pn)throw new Error("invert: expected non-zero number");if(e<=pn)throw new Error("invert: expected positive modulus, got "+e);let n=It(t,e),r=e,s=pn,i=Vt;for(;n!==pn;){const a=r/n,l=r%n,c=s-i*a;r=n,n=l,s=i,i=c}if(r!==Vt)throw new Error("invert: does not exist");return It(s,e)}function Af(t,e,n){if(!t.eql(t.sqr(e),n))throw new Error("Cannot find square root")}function Zw(t,e){const n=(t.ORDER+Vt)/Kw,r=t.pow(e,n);return Af(t,r,e),r}function ak(t,e){const n=(t.ORDER-Gw)/Jw,r=t.mul(e,Bs),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,Bs),s),a=t.mul(i,t.sub(o,t.ONE));return Af(t,a,e),a}function lk(t){const e=Ks(t),n=Xw(t),r=n(e,e.neg(e.ONE)),s=n(e,r),i=n(e,e.neg(r)),o=(t+ik)/Yw;return(a,l)=>{let c=a.pow(l,o),f=a.mul(c,r);const v=a.mul(c,s),w=a.mul(c,i),g=a.eql(a.sqr(f),l),_=a.eql(a.sqr(v),l);c=a.cmov(c,f,g),f=a.cmov(w,v,_);const E=a.eql(a.sqr(f),l),C=a.cmov(c,f,E);return Af(a,C,l),C}}function Xw(t){if(t<Hw)throw new Error("sqrt is not defined for small field");let e=t-Vt,n=0;for(;e%Bs===pn;)e/=Bs,n++;let r=Bs;const s=Ks(t);for(;q0(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Zw;let i=s.pow(r,e);const o=(e+Vt)/Bs;return function(l,c){if(l.is0(c))return c;if(q0(l,c)!==1)throw new Error("Cannot find square root");let f=n,v=l.mul(l.ONE,i),w=l.pow(c,e),g=l.pow(c,o);for(;!l.eql(w,l.ONE);){if(l.is0(w))return l.ZERO;let _=1,E=l.sqr(w);for(;!l.eql(E,l.ONE);)if(_++,E=l.sqr(E),_===f)throw new Error("Cannot find square root");const C=Vt<<BigInt(f-_-1),b=l.pow(v,C);f=_,v=l.sqr(b),w=l.mul(w,v),g=l.mul(g,b)}return g}}function ck(t){return t%Kw===Hw?Zw:t%Jw===Gw?ak:t%Yw===ok?lk(t):Xw(t)}const uk=(t,e)=>(It(t,e)&Vt)===Vt,dk=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function hk(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=dk.reduce((r,s)=>(r[s]="function",r),e);return ha(t,n),t}function fk(t,e,n){if(n<pn)throw new Error("invalid exponent, negatives unsupported");if(n===pn)return t.ONE;if(n===Vt)return e;let r=t.ONE,s=e;for(;n>pn;)n&Vt&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Vt;return r}function Qw(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,l)=>t.is0(a)?o:(r[l]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,l)=>t.is0(a)?o:(r[l]=t.mul(o,r[l]),t.mul(o,a)),i),r}function q0(t,e){const n=(t.ORDER-Vt)/Bs,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function ev(t,e){e!==void 0&&oh(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Ks(t,e,n=!1,r={}){if(t<=pn)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i,o=!1,a;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const w=e;w.BITS&&(s=w.BITS),w.sqrt&&(i=w.sqrt),typeof w.isLE=="boolean"&&(n=w.isLE),typeof w.modFromBytes=="boolean"&&(o=w.modFromBytes),a=w.allowedLengths}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:l,nByteLength:c}=ev(t,s);if(c>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let f;const v=Object.freeze({ORDER:t,isLE:n,BITS:l,BYTES:c,MASK:da(l),ZERO:pn,ONE:Vt,allowedLengths:a,create:w=>It(w,t),isValid:w=>{if(typeof w!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof w);return pn<=w&&w<t},is0:w=>w===pn,isValidNot0:w=>!v.is0(w)&&v.isValid(w),isOdd:w=>(w&Vt)===Vt,neg:w=>It(-w,t),eql:(w,g)=>w===g,sqr:w=>It(w*w,t),add:(w,g)=>It(w+g,t),sub:(w,g)=>It(w-g,t),mul:(w,g)=>It(w*g,t),pow:(w,g)=>fk(v,w,g),div:(w,g)=>It(w*z0(g,t),t),sqrN:w=>w*w,addN:(w,g)=>w+g,subN:(w,g)=>w-g,mulN:(w,g)=>w*g,inv:w=>z0(w,t),sqrt:i||(w=>(f||(f=ck(t)),f(v,w))),toBytes:w=>n?Ww(w,c):kf(w,c),fromBytes:(w,g=!0)=>{if(a){if(!a.includes(w.length)||w.length>c)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+w.length);const E=new Uint8Array(c);E.set(w,n?0:E.length-w.length),w=E}if(w.length!==c)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+w.length);let _=n?Qo(w):xc(w);if(o&&(_=It(_,t)),!g&&!v.isValid(_))throw new Error("invalid field element: outside of range 0..ORDER");return _},invertBatch:w=>Qw(v,w),cmov:(w,g,_)=>_?g:w});return Object.freeze(v)}function tv(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function nv(t){const e=tv(t);return e+Math.ceil(e/2)}function pk(t,e,n=!1){const r=t.length,s=tv(e),i=nv(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?Qo(t):xc(t),a=It(o,e-Vt)+Vt;return n?Ww(a,s):kf(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ki=BigInt(0),js=BigInt(1);function Vl(t,e){const n=e.negate();return t?n:e}function Ns(t,e){const n=Qw(t.Fp,e.map(r=>r.Z));return e.map((r,s)=>t.fromAffine(r.toAffine(n[s])))}function rv(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Ou(t,e){rv(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=da(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function W0(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),l=t>>o;a>r&&(a-=i,l+=js);const c=e*r,f=c+Math.abs(a)-1,v=a===0,w=a<0,g=e%2!==0;return{nextN:l,offset:f,isZero:v,isNeg:w,isNegF:g,offsetF:c}}function gk(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function mk(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const Mu=new WeakMap,sv=new WeakMap;function Lu(t){return sv.get(t)||1}function V0(t){if(t!==Ki)throw new Error("invalid wNAF")}class iv{constructor(e,n){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=n}_unsafeLadder(e,n,r=this.ZERO){let s=e;for(;n>Ki;)n&js&&(r=r.add(s)),s=s.double(),n>>=js;return r}precomputeWindow(e,n){const{windows:r,windowSize:s}=Ou(n,this.bits),i=[];let o=e,a=o;for(let l=0;l<r;l++){a=o,i.push(a);for(let c=1;c<s;c++)a=a.add(o),i.push(a);o=a.double()}return i}wNAF(e,n,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const o=Ou(e,this.bits);for(let a=0;a<o.windows;a++){const{nextN:l,offset:c,isZero:f,isNeg:v,isNegF:w,offsetF:g}=W0(r,a,o);r=l,f?i=i.add(Vl(w,n[g])):s=s.add(Vl(v,n[c]))}return V0(r),{p:s,f:i}}wNAFUnsafe(e,n,r,s=this.ZERO){const i=Ou(e,this.bits);for(let o=0;o<i.windows&&r!==Ki;o++){const{nextN:a,offset:l,isZero:c,isNeg:f}=W0(r,o,i);if(r=a,!c){const v=n[l];s=s.add(f?v.negate():v)}}return V0(r),s}getPrecomputes(e,n,r){let s=Mu.get(n);return s||(s=this.precomputeWindow(n,e),e!==1&&(typeof r=="function"&&(s=r(s)),Mu.set(n,s))),s}cached(e,n,r){const s=Lu(e);return this.wNAF(s,this.getPrecomputes(s,e,r),n)}unsafe(e,n,r,s){const i=Lu(e);return i===1?this._unsafeLadder(e,n,s):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),n,s)}createCache(e,n){rv(n,this.bits),sv.set(e,n),Mu.delete(e)}hasCache(e){return Lu(e)!==1}}function yk(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>Ki||r>Ki;)n&js&&(i=i.add(s)),r&js&&(o=o.add(s)),s=s.double(),n>>=js,r>>=js;return{p1:i,p2:o}}function ov(t,e,n,r){gk(n,t),mk(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=Vw(BigInt(s));let l=1;a>12?l=a-3:a>4?l=a-2:a>0&&(l=2);const c=da(l),f=new Array(Number(c)+1).fill(o),v=Math.floor((e.BITS-1)/l)*l;let w=o;for(let g=v;g>=0;g-=l){f.fill(o);for(let E=0;E<i;E++){const C=r[E],b=Number(C>>BigInt(g)&c);f[b]=f[b].add(n[E])}let _=o;for(let E=f.length-1,C=o;E>0;E--)C=C.add(f[E]),_=_.add(C);if(w=w.add(_),g!==0)for(let E=0;E<l;E++)w=w.double()}return w}function H0(t,e,n){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return hk(e),e}else return Ks(t,{isLE:n})}function av(t,e,n={},r){if(r===void 0&&(r=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const l of["p","n","h"]){const c=e[l];if(!(typeof c=="bigint"&&c>Ki))throw new Error(`CURVE.${l} must be positive bigint`)}const s=H0(e.p,n.Fp,r),i=H0(e.n,n.Fn,r),a=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(const l of a)if(!s.isValid(e[l]))throw new Error(`CURVE.${l} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:s,Fn:i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Wr=BigInt(0),Pt=BigInt(1),Uu=BigInt(2),wk=BigInt(8);function vk(t,e,n,r){const s=t.sqr(n),i=t.sqr(r),o=t.add(t.mul(e.a,s),i),a=t.add(t.ONE,t.mul(e.d,t.mul(s,i)));return t.eql(o,a)}function bk(t,e={}){const n=av("edwards",t,e,e.FpFnLE),{Fp:r,Fn:s}=n;let i=n.CURVE;const{h:o}=i;ha(e,{},{uvRatio:"function"});const a=Uu<<BigInt(s.BYTES*8)-Pt,l=C=>r.create(C),c=e.uvRatio||((C,b)=>{try{return{isValid:!0,value:r.sqrt(r.div(C,b))}}catch{return{isValid:!1,value:Wr}}});if(!vk(r,i,i.Gx,i.Gy))throw new Error("bad curve params: generator point");function f(C,b,S=!1){const x=S?Pt:Wr;return lh("coordinate "+C,b,x,a),b}function v(C){if(!(C instanceof _))throw new Error("ExtendedPoint expected")}const w=Wl((C,b)=>{const{X:S,Y:x,Z:O}=C,L=C.is0();b==null&&(b=L?wk:r.inv(O));const D=l(S*b),W=l(x*b),q=r.mul(O,b);if(L)return{x:Wr,y:Pt};if(q!==Pt)throw new Error("invZ was invalid");return{x:D,y:W}}),g=Wl(C=>{const{a:b,d:S}=i;if(C.is0())throw new Error("bad point: ZERO");const{X:x,Y:O,Z:L,T:D}=C,W=l(x*x),q=l(O*O),F=l(L*L),K=l(F*F),Y=l(W*b),te=l(F*l(Y+q)),T=l(K+l(S*l(W*q)));if(te!==T)throw new Error("bad point: equation left != right (1)");const u=l(x*O),m=l(L*D);if(u!==m)throw new Error("bad point: equation left != right (2)");return!0});class _{constructor(b,S,x,O){this.X=f("x",b),this.Y=f("y",S),this.Z=f("z",x,!0),this.T=f("t",O),Object.freeze(this)}static CURVE(){return i}static fromAffine(b){if(b instanceof _)throw new Error("extended point not allowed");const{x:S,y:x}=b||{};return f("x",S),f("y",x),new _(S,x,Pt,l(S*x))}static fromBytes(b,S=!1){const x=r.BYTES,{a:O,d:L}=i;b=$0(nr(b,x,"point")),qs(S,"zip215");const D=$0(b),W=b[x-1];D[x-1]=W&-129;const q=Qo(D),F=S?a:r.ORDER;lh("point.y",q,Wr,F);const K=l(q*q),Y=l(K-Pt),te=l(L*K-O);let{isValid:T,value:u}=c(Y,te);if(!T)throw new Error("bad point: invalid y coordinate");const m=(u&Pt)===Pt,k=(W&128)!==0;if(!S&&u===Wr&&k)throw new Error("bad point: x=0 and x_0=1");return k!==m&&(u=l(-u)),_.fromAffine({x:u,y:q})}static fromHex(b,S=!1){return _.fromBytes(it("point",b),S)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(b=8,S=!0){return E.createCache(this,b),S||this.multiply(Uu),this}assertValidity(){g(this)}equals(b){v(b);const{X:S,Y:x,Z:O}=this,{X:L,Y:D,Z:W}=b,q=l(S*W),F=l(L*O),K=l(x*W),Y=l(D*O);return q===F&&K===Y}is0(){return this.equals(_.ZERO)}negate(){return new _(l(-this.X),this.Y,this.Z,l(-this.T))}double(){const{a:b}=i,{X:S,Y:x,Z:O}=this,L=l(S*S),D=l(x*x),W=l(Uu*l(O*O)),q=l(b*L),F=S+x,K=l(l(F*F)-L-D),Y=q+D,te=Y-W,T=q-D,u=l(K*te),m=l(Y*T),k=l(K*T),B=l(te*Y);return new _(u,m,B,k)}add(b){v(b);const{a:S,d:x}=i,{X:O,Y:L,Z:D,T:W}=this,{X:q,Y:F,Z:K,T:Y}=b,te=l(O*q),T=l(L*F),u=l(W*x*Y),m=l(D*K),k=l((O+L)*(q+F)-te-T),B=m-u,I=m+u,P=l(T-S*te),N=l(k*B),R=l(I*P),h=l(k*P),M=l(B*I);return new _(N,R,M,h)}subtract(b){return this.add(b.negate())}multiply(b){if(!s.isValidNot0(b))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:S,f:x}=E.cached(this,b,O=>Ns(_,O));return Ns(_,[S,x])[0]}multiplyUnsafe(b,S=_.ZERO){if(!s.isValid(b))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return b===Wr?_.ZERO:this.is0()||b===Pt?this:E.unsafe(this,b,x=>Ns(_,x),S)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return E.unsafe(this,i.n).is0()}toAffine(b){return w(this,b)}clearCofactor(){return o===Pt?this:this.multiplyUnsafe(o)}toBytes(){const{x:b,y:S}=this.toAffine(),x=r.toBytes(S);return x[x.length-1]|=b&Pt?128:0,x}toHex(){return Ms(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(b){return Ns(_,b)}static msm(b,S){return ov(_,s,b,S)}_setWindowSize(b){this.precompute(b)}toRawBytes(){return this.toBytes()}}_.BASE=new _(i.Gx,i.Gy,Pt,l(i.Gx*i.Gy)),_.ZERO=new _(Wr,Pt,Pt,Wr),_.Fp=r,_.Fn=s;const E=new iv(_,s.BITS);return _.BASE.precompute(8),_}function _k(t,e,n={}){if(typeof e!="function")throw new Error('"hash" function param is required');ha(n,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:r}=n,{BASE:s,Fp:i,Fn:o}=t,a=n.randomBytes||Sf,l=n.adjustScalarBytes||(F=>F),c=n.domain||((F,K,Y)=>{if(qs(Y,"phflag"),K.length||Y)throw new Error("Contexts/pre-hash are not supported");return F});function f(F){return o.create(Qo(F))}function v(F){const K=x.secretKey;F=it("private key",F,K);const Y=it("hashed private key",e(F),2*K),te=l(Y.slice(0,K)),T=Y.slice(K,2*K),u=f(te);return{head:te,prefix:T,scalar:u}}function w(F){const{head:K,prefix:Y,scalar:te}=v(F),T=s.multiply(te),u=T.toBytes();return{head:K,prefix:Y,scalar:te,point:T,pointBytes:u}}function g(F){return w(F).pointBytes}function _(F=Uint8Array.of(),...K){const Y=pr(...K);return f(e(c(Y,it("context",F),!!r)))}function E(F,K,Y={}){F=it("message",F),r&&(F=r(F));const{prefix:te,scalar:T,pointBytes:u}=w(K),m=_(Y.context,te,F),k=s.multiply(m).toBytes(),B=_(Y.context,k,u,F),I=o.create(m+B*T);if(!o.isValid(I))throw new Error("sign failed: invalid s");const P=pr(k,o.toBytes(I));return nr(P,x.signature,"result")}const C={zip215:!0};function b(F,K,Y,te=C){const{context:T,zip215:u}=te,m=x.signature;F=it("signature",F,m),K=it("message",K),Y=it("publicKey",Y,x.publicKey),u!==void 0&&qs(u,"zip215"),r&&(K=r(K));const k=m/2,B=F.subarray(0,k),I=Qo(F.subarray(k,m));let P,N,R;try{P=t.fromBytes(Y,u),N=t.fromBytes(B,u),R=s.multiplyUnsafe(I)}catch{return!1}if(!u&&P.isSmallOrder())return!1;const h=_(T,N.toBytes(),P.toBytes(),K);return N.add(P.multiplyUnsafe(h)).subtract(R).clearCofactor().is0()}const S=i.BYTES,x={secretKey:S,publicKey:S,signature:2*S,seed:S};function O(F=a(x.seed)){return nr(F,x.seed,"seed")}function L(F){const K=q.randomSecretKey(F);return{secretKey:K,publicKey:g(K)}}function D(F){return ua(F)&&F.length===o.BYTES}function W(F,K){try{return!!t.fromBytes(F,K)}catch{return!1}}const q={getExtendedPublicKey:w,randomSecretKey:O,isValidSecretKey:D,isValidPublicKey:W,toMontgomery(F){const{y:K}=t.fromBytes(F),Y=x.publicKey,te=Y===32;if(!te&&Y!==57)throw new Error("only defined for 25519 and 448");const T=te?i.div(Pt+K,Pt-K):i.div(K-Pt,K+Pt);return i.toBytes(T)},toMontgomerySecret(F){const K=x.secretKey;nr(F,K);const Y=e(F.subarray(0,K));return l(Y).subarray(0,K)},randomPrivateKey:O,precompute(F=8,K=t.BASE){return K.precompute(F,!1)}};return Object.freeze({keygen:L,getPublicKey:g,sign:E,verify:b,utils:q,Point:t,lengths:x})}function xk(t){const e={a:t.a,d:t.d,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=Ks(e.n,t.nBitLength,!0),s={Fp:n,Fn:r,uvRatio:t.uvRatio},i={randomBytes:t.randomBytes,adjustScalarBytes:t.adjustScalarBytes,domain:t.domain,prehash:t.prehash,mapToCurve:t.mapToCurve};return{CURVE:e,curveOpts:s,hash:t.hash,eddsaOpts:i}}function Sk(t,e){const n=e.Point;return Object.assign({},e,{ExtendedPoint:n,CURVE:t,nBitLength:n.Fn.BITS,nByteLength:n.Fn.BYTES})}function Ek(t){const{CURVE:e,curveOpts:n,hash:r,eddsaOpts:s}=xk(t),i=bk(e,n),o=_k(i,r,s);return Sk(t,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const kk=BigInt(1),K0=BigInt(2);BigInt(3);const Ak=BigInt(5),Rk=BigInt(8),Rf=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),lv={p:Rf,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:Rk,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Ck(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=Rf,a=t*t%i*t%i,l=st(a,K0,i)*a%i,c=st(l,kk,i)*t%i,f=st(c,Ak,i)*c%i,v=st(f,e,i)*f%i,w=st(v,n,i)*v%i,g=st(w,r,i)*w%i,_=st(g,s,i)*g%i,E=st(_,s,i)*g%i,C=st(E,e,i)*f%i;return{pow_p_5_8:st(C,K0,i)*t%i,b2:a}}function Ik(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const G0=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function Tk(t,e){const n=Rf,r=It(e*e*e,n),s=It(r*r*e,n),i=Ck(t*s).pow_p_5_8;let o=It(t*r*i,n);const a=It(e*o*o,n),l=o,c=It(o*G0,n),f=a===t,v=a===It(-t,n),w=a===It(-t*G0,n);return f&&(o=l),(v||w)&&(o=c),uk(o,n)&&(o=It(-o,n)),{isValid:f||v,value:o}}const Bk=Ks(lv.p,{isLE:!0}),jk={...lv,Fp:Bk,hash:nk,adjustScalarBytes:Ik,uvRatio:Tk},fa=Ek(jk);var Cf={exports:{}};const Nk={},Pk=Object.freeze(Object.defineProperty({__proto__:null,default:Nk},Symbol.toStringTag,{value:"Module"})),Ok=nc(Pk);Cf.exports;(function(t){(function(e,n){function r(T,u){if(!T)throw new Error(u||"Assertion failed")}function s(T,u){T.super_=u;var m=function(){};m.prototype=u.prototype,T.prototype=new m,T.prototype.constructor=T}function i(T,u,m){if(i.isBN(T))return T;this.negative=0,this.words=null,this.length=0,this.red=null,T!==null&&((u==="le"||u==="be")&&(m=u,u=10),this._init(T||0,u||10,m||"be"))}typeof e=="object"?e.exports=i:n.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Ok.Buffer}catch{}i.isBN=function(u){return u instanceof i?!0:u!==null&&typeof u=="object"&&u.constructor.wordSize===i.wordSize&&Array.isArray(u.words)},i.max=function(u,m){return u.cmp(m)>0?u:m},i.min=function(u,m){return u.cmp(m)<0?u:m},i.prototype._init=function(u,m,k){if(typeof u=="number")return this._initNumber(u,m,k);if(typeof u=="object")return this._initArray(u,m,k);m==="hex"&&(m=16),r(m===(m|0)&&m>=2&&m<=36),u=u.toString().replace(/\s+/g,"");var B=0;u[0]==="-"&&(B++,this.negative=1),B<u.length&&(m===16?this._parseHex(u,B,k):(this._parseBase(u,m,B),k==="le"&&this._initArray(this.toArray(),m,k)))},i.prototype._initNumber=function(u,m,k){u<0&&(this.negative=1,u=-u),u<67108864?(this.words=[u&67108863],this.length=1):u<4503599627370496?(this.words=[u&67108863,u/67108864&67108863],this.length=2):(r(u<9007199254740992),this.words=[u&67108863,u/67108864&67108863,1],this.length=3),k==="le"&&this._initArray(this.toArray(),m,k)},i.prototype._initArray=function(u,m,k){if(r(typeof u.length=="number"),u.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(u.length/3),this.words=new Array(this.length);for(var B=0;B<this.length;B++)this.words[B]=0;var I,P,N=0;if(k==="be")for(B=u.length-1,I=0;B>=0;B-=3)P=u[B]|u[B-1]<<8|u[B-2]<<16,this.words[I]|=P<<N&67108863,this.words[I+1]=P>>>26-N&67108863,N+=24,N>=26&&(N-=26,I++);else if(k==="le")for(B=0,I=0;B<u.length;B+=3)P=u[B]|u[B+1]<<8|u[B+2]<<16,this.words[I]|=P<<N&67108863,this.words[I+1]=P>>>26-N&67108863,N+=24,N>=26&&(N-=26,I++);return this._strip()};function a(T,u){var m=T.charCodeAt(u);if(m>=48&&m<=57)return m-48;if(m>=65&&m<=70)return m-55;if(m>=97&&m<=102)return m-87;r(!1,"Invalid character in "+T)}function l(T,u,m){var k=a(T,m);return m-1>=u&&(k|=a(T,m-1)<<4),k}i.prototype._parseHex=function(u,m,k){this.length=Math.ceil((u.length-m)/6),this.words=new Array(this.length);for(var B=0;B<this.length;B++)this.words[B]=0;var I=0,P=0,N;if(k==="be")for(B=u.length-1;B>=m;B-=2)N=l(u,m,B)<<I,this.words[P]|=N&67108863,I>=18?(I-=18,P+=1,this.words[P]|=N>>>26):I+=8;else{var R=u.length-m;for(B=R%2===0?m+1:m;B<u.length;B+=2)N=l(u,m,B)<<I,this.words[P]|=N&67108863,I>=18?(I-=18,P+=1,this.words[P]|=N>>>26):I+=8}this._strip()};function c(T,u,m,k){for(var B=0,I=0,P=Math.min(T.length,m),N=u;N<P;N++){var R=T.charCodeAt(N)-48;B*=k,R>=49?I=R-49+10:R>=17?I=R-17+10:I=R,r(R>=0&&I<k,"Invalid character"),B+=I}return B}i.prototype._parseBase=function(u,m,k){this.words=[0],this.length=1;for(var B=0,I=1;I<=67108863;I*=m)B++;B--,I=I/m|0;for(var P=u.length-k,N=P%B,R=Math.min(P,P-N)+k,h=0,M=k;M<R;M+=B)h=c(u,M,M+B,m),this.imuln(I),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(N!==0){var ee=1;for(h=c(u,M,u.length,m),M=0;M<N;M++)ee*=m;this.imuln(ee),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this._strip()},i.prototype.copy=function(u){u.words=new Array(this.length);for(var m=0;m<this.length;m++)u.words[m]=this.words[m];u.length=this.length,u.negative=this.negative,u.red=this.red};function f(T,u){T.words=u.words,T.length=u.length,T.negative=u.negative,T.red=u.red}if(i.prototype._move=function(u){f(u,this)},i.prototype.clone=function(){var u=new i(null);return this.copy(u),u},i.prototype._expand=function(u){for(;this.length<u;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=v}catch{i.prototype.inspect=v}else i.prototype.inspect=v;function v(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var w=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],_=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(u,m){u=u||10,m=m|0||1;var k;if(u===16||u==="hex"){k="";for(var B=0,I=0,P=0;P<this.length;P++){var N=this.words[P],R=((N<<B|I)&16777215).toString(16);I=N>>>24-B&16777215,B+=2,B>=26&&(B-=26,P--),I!==0||P!==this.length-1?k=w[6-R.length]+R+k:k=R+k}for(I!==0&&(k=I.toString(16)+k);k.length%m!==0;)k="0"+k;return this.negative!==0&&(k="-"+k),k}if(u===(u|0)&&u>=2&&u<=36){var h=g[u],M=_[u];k="";var ee=this.clone();for(ee.negative=0;!ee.isZero();){var X=ee.modrn(M).toString(u);ee=ee.idivn(M),ee.isZero()?k=X+k:k=w[h-X.length]+X+k}for(this.isZero()&&(k="0"+k);k.length%m!==0;)k="0"+k;return this.negative!==0&&(k="-"+k),k}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var u=this.words[0];return this.length===2?u+=this.words[1]*67108864:this.length===3&&this.words[2]===1?u+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-u:u},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(u,m){return this.toArrayLike(o,u,m)}),i.prototype.toArray=function(u,m){return this.toArrayLike(Array,u,m)};var E=function(u,m){return u.allocUnsafe?u.allocUnsafe(m):new u(m)};i.prototype.toArrayLike=function(u,m,k){this._strip();var B=this.byteLength(),I=k||Math.max(1,B);r(B<=I,"byte array longer than desired length"),r(I>0,"Requested array length <= 0");var P=E(u,I),N=m==="le"?"LE":"BE";return this["_toArrayLike"+N](P,B),P},i.prototype._toArrayLikeLE=function(u,m){for(var k=0,B=0,I=0,P=0;I<this.length;I++){var N=this.words[I]<<P|B;u[k++]=N&255,k<u.length&&(u[k++]=N>>8&255),k<u.length&&(u[k++]=N>>16&255),P===6?(k<u.length&&(u[k++]=N>>24&255),B=0,P=0):(B=N>>>24,P+=2)}if(k<u.length)for(u[k++]=B;k<u.length;)u[k++]=0},i.prototype._toArrayLikeBE=function(u,m){for(var k=u.length-1,B=0,I=0,P=0;I<this.length;I++){var N=this.words[I]<<P|B;u[k--]=N&255,k>=0&&(u[k--]=N>>8&255),k>=0&&(u[k--]=N>>16&255),P===6?(k>=0&&(u[k--]=N>>24&255),B=0,P=0):(B=N>>>24,P+=2)}if(k>=0)for(u[k--]=B;k>=0;)u[k--]=0},Math.clz32?i.prototype._countBits=function(u){return 32-Math.clz32(u)}:i.prototype._countBits=function(u){var m=u,k=0;return m>=4096&&(k+=13,m>>>=13),m>=64&&(k+=7,m>>>=7),m>=8&&(k+=4,m>>>=4),m>=2&&(k+=2,m>>>=2),k+m},i.prototype._zeroBits=function(u){if(u===0)return 26;var m=u,k=0;return m&8191||(k+=13,m>>>=13),m&127||(k+=7,m>>>=7),m&15||(k+=4,m>>>=4),m&3||(k+=2,m>>>=2),m&1||k++,k},i.prototype.bitLength=function(){var u=this.words[this.length-1],m=this._countBits(u);return(this.length-1)*26+m};function C(T){for(var u=new Array(T.bitLength()),m=0;m<u.length;m++){var k=m/26|0,B=m%26;u[m]=T.words[k]>>>B&1}return u}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var u=0,m=0;m<this.length;m++){var k=this._zeroBits(this.words[m]);if(u+=k,k!==26)break}return u},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(u){return this.negative!==0?this.abs().inotn(u).iaddn(1):this.clone()},i.prototype.fromTwos=function(u){return this.testn(u-1)?this.notn(u).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(u){for(;this.length<u.length;)this.words[this.length++]=0;for(var m=0;m<u.length;m++)this.words[m]=this.words[m]|u.words[m];return this._strip()},i.prototype.ior=function(u){return r((this.negative|u.negative)===0),this.iuor(u)},i.prototype.or=function(u){return this.length>u.length?this.clone().ior(u):u.clone().ior(this)},i.prototype.uor=function(u){return this.length>u.length?this.clone().iuor(u):u.clone().iuor(this)},i.prototype.iuand=function(u){var m;this.length>u.length?m=u:m=this;for(var k=0;k<m.length;k++)this.words[k]=this.words[k]&u.words[k];return this.length=m.length,this._strip()},i.prototype.iand=function(u){return r((this.negative|u.negative)===0),this.iuand(u)},i.prototype.and=function(u){return this.length>u.length?this.clone().iand(u):u.clone().iand(this)},i.prototype.uand=function(u){return this.length>u.length?this.clone().iuand(u):u.clone().iuand(this)},i.prototype.iuxor=function(u){var m,k;this.length>u.length?(m=this,k=u):(m=u,k=this);for(var B=0;B<k.length;B++)this.words[B]=m.words[B]^k.words[B];if(this!==m)for(;B<m.length;B++)this.words[B]=m.words[B];return this.length=m.length,this._strip()},i.prototype.ixor=function(u){return r((this.negative|u.negative)===0),this.iuxor(u)},i.prototype.xor=function(u){return this.length>u.length?this.clone().ixor(u):u.clone().ixor(this)},i.prototype.uxor=function(u){return this.length>u.length?this.clone().iuxor(u):u.clone().iuxor(this)},i.prototype.inotn=function(u){r(typeof u=="number"&&u>=0);var m=Math.ceil(u/26)|0,k=u%26;this._expand(m),k>0&&m--;for(var B=0;B<m;B++)this.words[B]=~this.words[B]&67108863;return k>0&&(this.words[B]=~this.words[B]&67108863>>26-k),this._strip()},i.prototype.notn=function(u){return this.clone().inotn(u)},i.prototype.setn=function(u,m){r(typeof u=="number"&&u>=0);var k=u/26|0,B=u%26;return this._expand(k+1),m?this.words[k]=this.words[k]|1<<B:this.words[k]=this.words[k]&~(1<<B),this._strip()},i.prototype.iadd=function(u){var m;if(this.negative!==0&&u.negative===0)return this.negative=0,m=this.isub(u),this.negative^=1,this._normSign();if(this.negative===0&&u.negative!==0)return u.negative=0,m=this.isub(u),u.negative=1,m._normSign();var k,B;this.length>u.length?(k=this,B=u):(k=u,B=this);for(var I=0,P=0;P<B.length;P++)m=(k.words[P]|0)+(B.words[P]|0)+I,this.words[P]=m&67108863,I=m>>>26;for(;I!==0&&P<k.length;P++)m=(k.words[P]|0)+I,this.words[P]=m&67108863,I=m>>>26;if(this.length=k.length,I!==0)this.words[this.length]=I,this.length++;else if(k!==this)for(;P<k.length;P++)this.words[P]=k.words[P];return this},i.prototype.add=function(u){var m;return u.negative!==0&&this.negative===0?(u.negative=0,m=this.sub(u),u.negative^=1,m):u.negative===0&&this.negative!==0?(this.negative=0,m=u.sub(this),this.negative=1,m):this.length>u.length?this.clone().iadd(u):u.clone().iadd(this)},i.prototype.isub=function(u){if(u.negative!==0){u.negative=0;var m=this.iadd(u);return u.negative=1,m._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(u),this.negative=1,this._normSign();var k=this.cmp(u);if(k===0)return this.negative=0,this.length=1,this.words[0]=0,this;var B,I;k>0?(B=this,I=u):(B=u,I=this);for(var P=0,N=0;N<I.length;N++)m=(B.words[N]|0)-(I.words[N]|0)+P,P=m>>26,this.words[N]=m&67108863;for(;P!==0&&N<B.length;N++)m=(B.words[N]|0)+P,P=m>>26,this.words[N]=m&67108863;if(P===0&&N<B.length&&B!==this)for(;N<B.length;N++)this.words[N]=B.words[N];return this.length=Math.max(this.length,N),B!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(u){return this.clone().isub(u)};function b(T,u,m){m.negative=u.negative^T.negative;var k=T.length+u.length|0;m.length=k,k=k-1|0;var B=T.words[0]|0,I=u.words[0]|0,P=B*I,N=P&67108863,R=P/67108864|0;m.words[0]=N;for(var h=1;h<k;h++){for(var M=R>>>26,ee=R&67108863,X=Math.min(h,u.length-1),re=Math.max(0,h-T.length+1);re<=X;re++){var ve=h-re|0;B=T.words[ve]|0,I=u.words[re]|0,P=B*I+ee,M+=P/67108864|0,ee=P&67108863}m.words[h]=ee|0,R=M|0}return R!==0?m.words[h]=R|0:m.length--,m._strip()}var S=function(u,m,k){var B=u.words,I=m.words,P=k.words,N=0,R,h,M,ee=B[0]|0,X=ee&8191,re=ee>>>13,ve=B[1]|0,ye=ve&8191,pe=ve>>>13,Qe=B[2]|0,je=Qe&8191,Ne=Qe>>>13,Tn=B[3]|0,Pe=Tn&8191,et=Tn>>>13,wa=B[4]|0,ze=wa&8191,tt=wa>>>13,va=B[5]|0,He=va&8191,Ue=va>>>13,wn=B[6]|0,qe=wn&8191,nt=wn>>>13,Gn=B[7]|0,rt=Gn&8191,A=Gn>>>13,d=B[8]|0,y=d&8191,j=d>>>13,U=B[9]|0,$=U&8191,H=U>>>13,xe=I[0]|0,be=xe&8191,we=xe>>>13,De=I[1]|0,me=De&8191,ct=De>>>13,Kf=I[2]|0,ut=Kf&8191,dt=Kf>>>13,Gf=I[3]|0,ht=Gf&8191,ft=Gf>>>13,Jf=I[4]|0,pt=Jf&8191,gt=Jf>>>13,Yf=I[5]|0,mt=Yf&8191,yt=Yf>>>13,Zf=I[6]|0,wt=Zf&8191,vt=Zf>>>13,Xf=I[7]|0,bt=Xf&8191,_t=Xf>>>13,Qf=I[8]|0,xt=Qf&8191,St=Qf>>>13,ep=I[9]|0,Et=ep&8191,kt=ep>>>13;k.negative=u.negative^m.negative,k.length=19,R=Math.imul(X,be),h=Math.imul(X,we),h=h+Math.imul(re,be)|0,M=Math.imul(re,we);var jc=(N+R|0)+((h&8191)<<13)|0;N=(M+(h>>>13)|0)+(jc>>>26)|0,jc&=67108863,R=Math.imul(ye,be),h=Math.imul(ye,we),h=h+Math.imul(pe,be)|0,M=Math.imul(pe,we),R=R+Math.imul(X,me)|0,h=h+Math.imul(X,ct)|0,h=h+Math.imul(re,me)|0,M=M+Math.imul(re,ct)|0;var Nc=(N+R|0)+((h&8191)<<13)|0;N=(M+(h>>>13)|0)+(Nc>>>26)|0,Nc&=67108863,R=Math.imul(je,be),h=Math.imul(je,we),h=h+Math.imul(Ne,be)|0,M=Math.imul(Ne,we),R=R+Math.imul(ye,me)|0,h=h+Math.imul(ye,ct)|0,h=h+Math.imul(pe,me)|0,M=M+Math.imul(pe,ct)|0,R=R+Math.imul(X,ut)|0,h=h+Math.imul(X,dt)|0,h=h+Math.imul(re,ut)|0,M=M+Math.imul(re,dt)|0;var Pc=(N+R|0)+((h&8191)<<13)|0;N=(M+(h>>>13)|0)+(Pc>>>26)|0,Pc&=67108863,R=Math.imul(Pe,be),h=Math.imul(Pe,we),h=h+Math.imul(et,be)|0,M=Math.imul(et,we),R=R+Math.imul(je,me)|0,h=h+Math.imul(je,ct)|0,h=h+Math.imul(Ne,me)|0,M=M+Math.imul(Ne,ct)|0,R=R+Math.imul(ye,ut)|0,h=h+Math.imul(ye,dt)|0,h=h+Math.imul(pe,ut)|0,M=M+Math.imul(pe,dt)|0,R=R+Math.imul(X,ht)|0,h=h+Math.imul(X,ft)|0,h=h+Math.imul(re,ht)|0,M=M+Math.imul(re,ft)|0;var Oc=(N+R|0)+((h&8191)<<13)|0;N=(M+(h>>>13)|0)+(Oc>>>26)|0,Oc&=67108863,R=Math.imul(ze,be),h=Math.imul(ze,we),h=h+Math.imul(tt,be)|0,M=Math.imul(tt,we),R=R+Math.imul(Pe,me)|0,h=h+Math.imul(Pe,ct)|0,h=h+Math.imul(et,me)|0,M=M+Math.imul(et,ct)|0,R=R+Math.imul(je,ut)|0,h=h+Math.imul(je,dt)|0,h=h+Math.imul(Ne,ut)|0,M=M+Math.imul(Ne,dt)|0,R=R+Math.imul(ye,ht)|0,h=h+Math.imul(ye,ft)|0,h=h+Math.imul(pe,ht)|0,M=M+Math.imul(pe,ft)|0,R=R+Math.imul(X,pt)|0,h=h+Math.imul(X,gt)|0,h=h+Math.imul(re,pt)|0,M=M+Math.imul(re,gt)|0;var Mc=(N+R|0)+((h&8191)<<13)|0;N=(M+(h>>>13)|0)+(Mc>>>26)|0,Mc&=67108863,R=Math.imul(He,be),h=Math.imul(He,we),h=h+Math.imul(Ue,be)|0,M=Math.imul(Ue,we),R=R+Math.imul(ze,me)|0,h=h+Math.imul(ze,ct)|0,h=h+Math.imul(tt,me)|0,M=M+Math.imul(tt,ct)|0,R=R+Math.imul(Pe,ut)|0,h=h+Math.imul(Pe,dt)|0,h=h+Math.imul(et,ut)|0,M=M+Math.imul(et,dt)|0,R=R+Math.imul(je,ht)|0,h=h+Math.imul(je,ft)|0,h=h+Math.imul(Ne,ht)|0,M=M+Math.imul(Ne,ft)|0,R=R+Math.imul(ye,pt)|0,h=h+Math.imul(ye,gt)|0,h=h+Math.imul(pe,pt)|0,M=M+Math.imul(pe,gt)|0,R=R+Math.imul(X,mt)|0,h=h+Math.imul(X,yt)|0,h=h+Math.imul(re,mt)|0,M=M+Math.imul(re,yt)|0;var Lc=(N+R|0)+((h&8191)<<13)|0;N=(M+(h>>>13)|0)+(Lc>>>26)|0,Lc&=67108863,R=Math.imul(qe,be),h=Math.imul(qe,we),h=h+Math.imul(nt,be)|0,M=Math.imul(nt,we),R=R+Math.imul(He,me)|0,h=h+Math.imul(He,ct)|0,h=h+Math.imul(Ue,me)|0,M=M+Math.imul(Ue,ct)|0,R=R+Math.imul(ze,ut)|0,h=h+Math.imul(ze,dt)|0,h=h+Math.imul(tt,ut)|0,M=M+Math.imul(tt,dt)|0,R=R+Math.imul(Pe,ht)|0,h=h+Math.imul(Pe,ft)|0,h=h+Math.imul(et,ht)|0,M=M+Math.imul(et,ft)|0,R=R+Math.imul(je,pt)|0,h=h+Math.imul(je,gt)|0,h=h+Math.imul(Ne,pt)|0,M=M+Math.imul(Ne,gt)|0,R=R+Math.imul(ye,mt)|0,h=h+Math.imul(ye,yt)|0,h=h+Math.imul(pe,mt)|0,M=M+Math.imul(pe,yt)|0,R=R+Math.imul(X,wt)|0,h=h+Math.imul(X,vt)|0,h=h+Math.imul(re,wt)|0,M=M+Math.imul(re,vt)|0;var Uc=(N+R|0)+((h&8191)<<13)|0;N=(M+(h>>>13)|0)+(Uc>>>26)|0,Uc&=67108863,R=Math.imul(rt,be),h=Math.imul(rt,we),h=h+Math.imul(A,be)|0,M=Math.imul(A,we),R=R+Math.imul(qe,me)|0,h=h+Math.imul(qe,ct)|0,h=h+Math.imul(nt,me)|0,M=M+Math.imul(nt,ct)|0,R=R+Math.imul(He,ut)|0,h=h+Math.imul(He,dt)|0,h=h+Math.imul(Ue,ut)|0,M=M+Math.imul(Ue,dt)|0,R=R+Math.imul(ze,ht)|0,h=h+Math.imul(ze,ft)|0,h=h+Math.imul(tt,ht)|0,M=M+Math.imul(tt,ft)|0,R=R+Math.imul(Pe,pt)|0,h=h+Math.imul(Pe,gt)|0,h=h+Math.imul(et,pt)|0,M=M+Math.imul(et,gt)|0,R=R+Math.imul(je,mt)|0,h=h+Math.imul(je,yt)|0,h=h+Math.imul(Ne,mt)|0,M=M+Math.imul(Ne,yt)|0,R=R+Math.imul(ye,wt)|0,h=h+Math.imul(ye,vt)|0,h=h+Math.imul(pe,wt)|0,M=M+Math.imul(pe,vt)|0,R=R+Math.imul(X,bt)|0,h=h+Math.imul(X,_t)|0,h=h+Math.imul(re,bt)|0,M=M+Math.imul(re,_t)|0;var Dc=(N+R|0)+((h&8191)<<13)|0;N=(M+(h>>>13)|0)+(Dc>>>26)|0,Dc&=67108863,R=Math.imul(y,be),h=Math.imul(y,we),h=h+Math.imul(j,be)|0,M=Math.imul(j,we),R=R+Math.imul(rt,me)|0,h=h+Math.imul(rt,ct)|0,h=h+Math.imul(A,me)|0,M=M+Math.imul(A,ct)|0,R=R+Math.imul(qe,ut)|0,h=h+Math.imul(qe,dt)|0,h=h+Math.imul(nt,ut)|0,M=M+Math.imul(nt,dt)|0,R=R+Math.imul(He,ht)|0,h=h+Math.imul(He,ft)|0,h=h+Math.imul(Ue,ht)|0,M=M+Math.imul(Ue,ft)|0,R=R+Math.imul(ze,pt)|0,h=h+Math.imul(ze,gt)|0,h=h+Math.imul(tt,pt)|0,M=M+Math.imul(tt,gt)|0,R=R+Math.imul(Pe,mt)|0,h=h+Math.imul(Pe,yt)|0,h=h+Math.imul(et,mt)|0,M=M+Math.imul(et,yt)|0,R=R+Math.imul(je,wt)|0,h=h+Math.imul(je,vt)|0,h=h+Math.imul(Ne,wt)|0,M=M+Math.imul(Ne,vt)|0,R=R+Math.imul(ye,bt)|0,h=h+Math.imul(ye,_t)|0,h=h+Math.imul(pe,bt)|0,M=M+Math.imul(pe,_t)|0,R=R+Math.imul(X,xt)|0,h=h+Math.imul(X,St)|0,h=h+Math.imul(re,xt)|0,M=M+Math.imul(re,St)|0;var Fc=(N+R|0)+((h&8191)<<13)|0;N=(M+(h>>>13)|0)+(Fc>>>26)|0,Fc&=67108863,R=Math.imul($,be),h=Math.imul($,we),h=h+Math.imul(H,be)|0,M=Math.imul(H,we),R=R+Math.imul(y,me)|0,h=h+Math.imul(y,ct)|0,h=h+Math.imul(j,me)|0,M=M+Math.imul(j,ct)|0,R=R+Math.imul(rt,ut)|0,h=h+Math.imul(rt,dt)|0,h=h+Math.imul(A,ut)|0,M=M+Math.imul(A,dt)|0,R=R+Math.imul(qe,ht)|0,h=h+Math.imul(qe,ft)|0,h=h+Math.imul(nt,ht)|0,M=M+Math.imul(nt,ft)|0,R=R+Math.imul(He,pt)|0,h=h+Math.imul(He,gt)|0,h=h+Math.imul(Ue,pt)|0,M=M+Math.imul(Ue,gt)|0,R=R+Math.imul(ze,mt)|0,h=h+Math.imul(ze,yt)|0,h=h+Math.imul(tt,mt)|0,M=M+Math.imul(tt,yt)|0,R=R+Math.imul(Pe,wt)|0,h=h+Math.imul(Pe,vt)|0,h=h+Math.imul(et,wt)|0,M=M+Math.imul(et,vt)|0,R=R+Math.imul(je,bt)|0,h=h+Math.imul(je,_t)|0,h=h+Math.imul(Ne,bt)|0,M=M+Math.imul(Ne,_t)|0,R=R+Math.imul(ye,xt)|0,h=h+Math.imul(ye,St)|0,h=h+Math.imul(pe,xt)|0,M=M+Math.imul(pe,St)|0,R=R+Math.imul(X,Et)|0,h=h+Math.imul(X,kt)|0,h=h+Math.imul(re,Et)|0,M=M+Math.imul(re,kt)|0;var $c=(N+R|0)+((h&8191)<<13)|0;N=(M+(h>>>13)|0)+($c>>>26)|0,$c&=67108863,R=Math.imul($,me),h=Math.imul($,ct),h=h+Math.imul(H,me)|0,M=Math.imul(H,ct),R=R+Math.imul(y,ut)|0,h=h+Math.imul(y,dt)|0,h=h+Math.imul(j,ut)|0,M=M+Math.imul(j,dt)|0,R=R+Math.imul(rt,ht)|0,h=h+Math.imul(rt,ft)|0,h=h+Math.imul(A,ht)|0,M=M+Math.imul(A,ft)|0,R=R+Math.imul(qe,pt)|0,h=h+Math.imul(qe,gt)|0,h=h+Math.imul(nt,pt)|0,M=M+Math.imul(nt,gt)|0,R=R+Math.imul(He,mt)|0,h=h+Math.imul(He,yt)|0,h=h+Math.imul(Ue,mt)|0,M=M+Math.imul(Ue,yt)|0,R=R+Math.imul(ze,wt)|0,h=h+Math.imul(ze,vt)|0,h=h+Math.imul(tt,wt)|0,M=M+Math.imul(tt,vt)|0,R=R+Math.imul(Pe,bt)|0,h=h+Math.imul(Pe,_t)|0,h=h+Math.imul(et,bt)|0,M=M+Math.imul(et,_t)|0,R=R+Math.imul(je,xt)|0,h=h+Math.imul(je,St)|0,h=h+Math.imul(Ne,xt)|0,M=M+Math.imul(Ne,St)|0,R=R+Math.imul(ye,Et)|0,h=h+Math.imul(ye,kt)|0,h=h+Math.imul(pe,Et)|0,M=M+Math.imul(pe,kt)|0;var zc=(N+R|0)+((h&8191)<<13)|0;N=(M+(h>>>13)|0)+(zc>>>26)|0,zc&=67108863,R=Math.imul($,ut),h=Math.imul($,dt),h=h+Math.imul(H,ut)|0,M=Math.imul(H,dt),R=R+Math.imul(y,ht)|0,h=h+Math.imul(y,ft)|0,h=h+Math.imul(j,ht)|0,M=M+Math.imul(j,ft)|0,R=R+Math.imul(rt,pt)|0,h=h+Math.imul(rt,gt)|0,h=h+Math.imul(A,pt)|0,M=M+Math.imul(A,gt)|0,R=R+Math.imul(qe,mt)|0,h=h+Math.imul(qe,yt)|0,h=h+Math.imul(nt,mt)|0,M=M+Math.imul(nt,yt)|0,R=R+Math.imul(He,wt)|0,h=h+Math.imul(He,vt)|0,h=h+Math.imul(Ue,wt)|0,M=M+Math.imul(Ue,vt)|0,R=R+Math.imul(ze,bt)|0,h=h+Math.imul(ze,_t)|0,h=h+Math.imul(tt,bt)|0,M=M+Math.imul(tt,_t)|0,R=R+Math.imul(Pe,xt)|0,h=h+Math.imul(Pe,St)|0,h=h+Math.imul(et,xt)|0,M=M+Math.imul(et,St)|0,R=R+Math.imul(je,Et)|0,h=h+Math.imul(je,kt)|0,h=h+Math.imul(Ne,Et)|0,M=M+Math.imul(Ne,kt)|0;var qc=(N+R|0)+((h&8191)<<13)|0;N=(M+(h>>>13)|0)+(qc>>>26)|0,qc&=67108863,R=Math.imul($,ht),h=Math.imul($,ft),h=h+Math.imul(H,ht)|0,M=Math.imul(H,ft),R=R+Math.imul(y,pt)|0,h=h+Math.imul(y,gt)|0,h=h+Math.imul(j,pt)|0,M=M+Math.imul(j,gt)|0,R=R+Math.imul(rt,mt)|0,h=h+Math.imul(rt,yt)|0,h=h+Math.imul(A,mt)|0,M=M+Math.imul(A,yt)|0,R=R+Math.imul(qe,wt)|0,h=h+Math.imul(qe,vt)|0,h=h+Math.imul(nt,wt)|0,M=M+Math.imul(nt,vt)|0,R=R+Math.imul(He,bt)|0,h=h+Math.imul(He,_t)|0,h=h+Math.imul(Ue,bt)|0,M=M+Math.imul(Ue,_t)|0,R=R+Math.imul(ze,xt)|0,h=h+Math.imul(ze,St)|0,h=h+Math.imul(tt,xt)|0,M=M+Math.imul(tt,St)|0,R=R+Math.imul(Pe,Et)|0,h=h+Math.imul(Pe,kt)|0,h=h+Math.imul(et,Et)|0,M=M+Math.imul(et,kt)|0;var Wc=(N+R|0)+((h&8191)<<13)|0;N=(M+(h>>>13)|0)+(Wc>>>26)|0,Wc&=67108863,R=Math.imul($,pt),h=Math.imul($,gt),h=h+Math.imul(H,pt)|0,M=Math.imul(H,gt),R=R+Math.imul(y,mt)|0,h=h+Math.imul(y,yt)|0,h=h+Math.imul(j,mt)|0,M=M+Math.imul(j,yt)|0,R=R+Math.imul(rt,wt)|0,h=h+Math.imul(rt,vt)|0,h=h+Math.imul(A,wt)|0,M=M+Math.imul(A,vt)|0,R=R+Math.imul(qe,bt)|0,h=h+Math.imul(qe,_t)|0,h=h+Math.imul(nt,bt)|0,M=M+Math.imul(nt,_t)|0,R=R+Math.imul(He,xt)|0,h=h+Math.imul(He,St)|0,h=h+Math.imul(Ue,xt)|0,M=M+Math.imul(Ue,St)|0,R=R+Math.imul(ze,Et)|0,h=h+Math.imul(ze,kt)|0,h=h+Math.imul(tt,Et)|0,M=M+Math.imul(tt,kt)|0;var Vc=(N+R|0)+((h&8191)<<13)|0;N=(M+(h>>>13)|0)+(Vc>>>26)|0,Vc&=67108863,R=Math.imul($,mt),h=Math.imul($,yt),h=h+Math.imul(H,mt)|0,M=Math.imul(H,yt),R=R+Math.imul(y,wt)|0,h=h+Math.imul(y,vt)|0,h=h+Math.imul(j,wt)|0,M=M+Math.imul(j,vt)|0,R=R+Math.imul(rt,bt)|0,h=h+Math.imul(rt,_t)|0,h=h+Math.imul(A,bt)|0,M=M+Math.imul(A,_t)|0,R=R+Math.imul(qe,xt)|0,h=h+Math.imul(qe,St)|0,h=h+Math.imul(nt,xt)|0,M=M+Math.imul(nt,St)|0,R=R+Math.imul(He,Et)|0,h=h+Math.imul(He,kt)|0,h=h+Math.imul(Ue,Et)|0,M=M+Math.imul(Ue,kt)|0;var Hc=(N+R|0)+((h&8191)<<13)|0;N=(M+(h>>>13)|0)+(Hc>>>26)|0,Hc&=67108863,R=Math.imul($,wt),h=Math.imul($,vt),h=h+Math.imul(H,wt)|0,M=Math.imul(H,vt),R=R+Math.imul(y,bt)|0,h=h+Math.imul(y,_t)|0,h=h+Math.imul(j,bt)|0,M=M+Math.imul(j,_t)|0,R=R+Math.imul(rt,xt)|0,h=h+Math.imul(rt,St)|0,h=h+Math.imul(A,xt)|0,M=M+Math.imul(A,St)|0,R=R+Math.imul(qe,Et)|0,h=h+Math.imul(qe,kt)|0,h=h+Math.imul(nt,Et)|0,M=M+Math.imul(nt,kt)|0;var Kc=(N+R|0)+((h&8191)<<13)|0;N=(M+(h>>>13)|0)+(Kc>>>26)|0,Kc&=67108863,R=Math.imul($,bt),h=Math.imul($,_t),h=h+Math.imul(H,bt)|0,M=Math.imul(H,_t),R=R+Math.imul(y,xt)|0,h=h+Math.imul(y,St)|0,h=h+Math.imul(j,xt)|0,M=M+Math.imul(j,St)|0,R=R+Math.imul(rt,Et)|0,h=h+Math.imul(rt,kt)|0,h=h+Math.imul(A,Et)|0,M=M+Math.imul(A,kt)|0;var Gc=(N+R|0)+((h&8191)<<13)|0;N=(M+(h>>>13)|0)+(Gc>>>26)|0,Gc&=67108863,R=Math.imul($,xt),h=Math.imul($,St),h=h+Math.imul(H,xt)|0,M=Math.imul(H,St),R=R+Math.imul(y,Et)|0,h=h+Math.imul(y,kt)|0,h=h+Math.imul(j,Et)|0,M=M+Math.imul(j,kt)|0;var Jc=(N+R|0)+((h&8191)<<13)|0;N=(M+(h>>>13)|0)+(Jc>>>26)|0,Jc&=67108863,R=Math.imul($,Et),h=Math.imul($,kt),h=h+Math.imul(H,Et)|0,M=Math.imul(H,kt);var Yc=(N+R|0)+((h&8191)<<13)|0;return N=(M+(h>>>13)|0)+(Yc>>>26)|0,Yc&=67108863,P[0]=jc,P[1]=Nc,P[2]=Pc,P[3]=Oc,P[4]=Mc,P[5]=Lc,P[6]=Uc,P[7]=Dc,P[8]=Fc,P[9]=$c,P[10]=zc,P[11]=qc,P[12]=Wc,P[13]=Vc,P[14]=Hc,P[15]=Kc,P[16]=Gc,P[17]=Jc,P[18]=Yc,N!==0&&(P[19]=N,k.length++),k};Math.imul||(S=b);function x(T,u,m){m.negative=u.negative^T.negative,m.length=T.length+u.length;for(var k=0,B=0,I=0;I<m.length-1;I++){var P=B;B=0;for(var N=k&67108863,R=Math.min(I,u.length-1),h=Math.max(0,I-T.length+1);h<=R;h++){var M=I-h,ee=T.words[M]|0,X=u.words[h]|0,re=ee*X,ve=re&67108863;P=P+(re/67108864|0)|0,ve=ve+N|0,N=ve&67108863,P=P+(ve>>>26)|0,B+=P>>>26,P&=67108863}m.words[I]=N,k=P,P=B}return k!==0?m.words[I]=k:m.length--,m._strip()}function O(T,u,m){return x(T,u,m)}i.prototype.mulTo=function(u,m){var k,B=this.length+u.length;return this.length===10&&u.length===10?k=S(this,u,m):B<63?k=b(this,u,m):B<1024?k=x(this,u,m):k=O(this,u,m),k},i.prototype.mul=function(u){var m=new i(null);return m.words=new Array(this.length+u.length),this.mulTo(u,m)},i.prototype.mulf=function(u){var m=new i(null);return m.words=new Array(this.length+u.length),O(this,u,m)},i.prototype.imul=function(u){return this.clone().mulTo(u,this)},i.prototype.imuln=function(u){var m=u<0;m&&(u=-u),r(typeof u=="number"),r(u<67108864);for(var k=0,B=0;B<this.length;B++){var I=(this.words[B]|0)*u,P=(I&67108863)+(k&67108863);k>>=26,k+=I/67108864|0,k+=P>>>26,this.words[B]=P&67108863}return k!==0&&(this.words[B]=k,this.length++),this.length=u===0?1:this.length,m?this.ineg():this},i.prototype.muln=function(u){return this.clone().imuln(u)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(u){var m=C(u);if(m.length===0)return new i(1);for(var k=this,B=0;B<m.length&&m[B]===0;B++,k=k.sqr());if(++B<m.length)for(var I=k.sqr();B<m.length;B++,I=I.sqr())m[B]!==0&&(k=k.mul(I));return k},i.prototype.iushln=function(u){r(typeof u=="number"&&u>=0);var m=u%26,k=(u-m)/26,B=67108863>>>26-m<<26-m,I;if(m!==0){var P=0;for(I=0;I<this.length;I++){var N=this.words[I]&B,R=(this.words[I]|0)-N<<m;this.words[I]=R|P,P=N>>>26-m}P&&(this.words[I]=P,this.length++)}if(k!==0){for(I=this.length-1;I>=0;I--)this.words[I+k]=this.words[I];for(I=0;I<k;I++)this.words[I]=0;this.length+=k}return this._strip()},i.prototype.ishln=function(u){return r(this.negative===0),this.iushln(u)},i.prototype.iushrn=function(u,m,k){r(typeof u=="number"&&u>=0);var B;m?B=(m-m%26)/26:B=0;var I=u%26,P=Math.min((u-I)/26,this.length),N=67108863^67108863>>>I<<I,R=k;if(B-=P,B=Math.max(0,B),R){for(var h=0;h<P;h++)R.words[h]=this.words[h];R.length=P}if(P!==0)if(this.length>P)for(this.length-=P,h=0;h<this.length;h++)this.words[h]=this.words[h+P];else this.words[0]=0,this.length=1;var M=0;for(h=this.length-1;h>=0&&(M!==0||h>=B);h--){var ee=this.words[h]|0;this.words[h]=M<<26-I|ee>>>I,M=ee&N}return R&&M!==0&&(R.words[R.length++]=M),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(u,m,k){return r(this.negative===0),this.iushrn(u,m,k)},i.prototype.shln=function(u){return this.clone().ishln(u)},i.prototype.ushln=function(u){return this.clone().iushln(u)},i.prototype.shrn=function(u){return this.clone().ishrn(u)},i.prototype.ushrn=function(u){return this.clone().iushrn(u)},i.prototype.testn=function(u){r(typeof u=="number"&&u>=0);var m=u%26,k=(u-m)/26,B=1<<m;if(this.length<=k)return!1;var I=this.words[k];return!!(I&B)},i.prototype.imaskn=function(u){r(typeof u=="number"&&u>=0);var m=u%26,k=(u-m)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=k)return this;if(m!==0&&k++,this.length=Math.min(k,this.length),m!==0){var B=67108863^67108863>>>m<<m;this.words[this.length-1]&=B}return this._strip()},i.prototype.maskn=function(u){return this.clone().imaskn(u)},i.prototype.iaddn=function(u){return r(typeof u=="number"),r(u<67108864),u<0?this.isubn(-u):this.negative!==0?this.length===1&&(this.words[0]|0)<=u?(this.words[0]=u-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(u),this.negative=1,this):this._iaddn(u)},i.prototype._iaddn=function(u){this.words[0]+=u;for(var m=0;m<this.length&&this.words[m]>=67108864;m++)this.words[m]-=67108864,m===this.length-1?this.words[m+1]=1:this.words[m+1]++;return this.length=Math.max(this.length,m+1),this},i.prototype.isubn=function(u){if(r(typeof u=="number"),r(u<67108864),u<0)return this.iaddn(-u);if(this.negative!==0)return this.negative=0,this.iaddn(u),this.negative=1,this;if(this.words[0]-=u,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var m=0;m<this.length&&this.words[m]<0;m++)this.words[m]+=67108864,this.words[m+1]-=1;return this._strip()},i.prototype.addn=function(u){return this.clone().iaddn(u)},i.prototype.subn=function(u){return this.clone().isubn(u)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(u,m,k){var B=u.length+k,I;this._expand(B);var P,N=0;for(I=0;I<u.length;I++){P=(this.words[I+k]|0)+N;var R=(u.words[I]|0)*m;P-=R&67108863,N=(P>>26)-(R/67108864|0),this.words[I+k]=P&67108863}for(;I<this.length-k;I++)P=(this.words[I+k]|0)+N,N=P>>26,this.words[I+k]=P&67108863;if(N===0)return this._strip();for(r(N===-1),N=0,I=0;I<this.length;I++)P=-(this.words[I]|0)+N,N=P>>26,this.words[I]=P&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(u,m){var k=this.length-u.length,B=this.clone(),I=u,P=I.words[I.length-1]|0,N=this._countBits(P);k=26-N,k!==0&&(I=I.ushln(k),B.iushln(k),P=I.words[I.length-1]|0);var R=B.length-I.length,h;if(m!=="mod"){h=new i(null),h.length=R+1,h.words=new Array(h.length);for(var M=0;M<h.length;M++)h.words[M]=0}var ee=B.clone()._ishlnsubmul(I,1,R);ee.negative===0&&(B=ee,h&&(h.words[R]=1));for(var X=R-1;X>=0;X--){var re=(B.words[I.length+X]|0)*67108864+(B.words[I.length+X-1]|0);for(re=Math.min(re/P|0,67108863),B._ishlnsubmul(I,re,X);B.negative!==0;)re--,B.negative=0,B._ishlnsubmul(I,1,X),B.isZero()||(B.negative^=1);h&&(h.words[X]=re)}return h&&h._strip(),B._strip(),m!=="div"&&k!==0&&B.iushrn(k),{div:h||null,mod:B}},i.prototype.divmod=function(u,m,k){if(r(!u.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var B,I,P;return this.negative!==0&&u.negative===0?(P=this.neg().divmod(u,m),m!=="mod"&&(B=P.div.neg()),m!=="div"&&(I=P.mod.neg(),k&&I.negative!==0&&I.iadd(u)),{div:B,mod:I}):this.negative===0&&u.negative!==0?(P=this.divmod(u.neg(),m),m!=="mod"&&(B=P.div.neg()),{div:B,mod:P.mod}):this.negative&u.negative?(P=this.neg().divmod(u.neg(),m),m!=="div"&&(I=P.mod.neg(),k&&I.negative!==0&&I.isub(u)),{div:P.div,mod:I}):u.length>this.length||this.cmp(u)<0?{div:new i(0),mod:this}:u.length===1?m==="div"?{div:this.divn(u.words[0]),mod:null}:m==="mod"?{div:null,mod:new i(this.modrn(u.words[0]))}:{div:this.divn(u.words[0]),mod:new i(this.modrn(u.words[0]))}:this._wordDiv(u,m)},i.prototype.div=function(u){return this.divmod(u,"div",!1).div},i.prototype.mod=function(u){return this.divmod(u,"mod",!1).mod},i.prototype.umod=function(u){return this.divmod(u,"mod",!0).mod},i.prototype.divRound=function(u){var m=this.divmod(u);if(m.mod.isZero())return m.div;var k=m.div.negative!==0?m.mod.isub(u):m.mod,B=u.ushrn(1),I=u.andln(1),P=k.cmp(B);return P<0||I===1&&P===0?m.div:m.div.negative!==0?m.div.isubn(1):m.div.iaddn(1)},i.prototype.modrn=function(u){var m=u<0;m&&(u=-u),r(u<=67108863);for(var k=(1<<26)%u,B=0,I=this.length-1;I>=0;I--)B=(k*B+(this.words[I]|0))%u;return m?-B:B},i.prototype.modn=function(u){return this.modrn(u)},i.prototype.idivn=function(u){var m=u<0;m&&(u=-u),r(u<=67108863);for(var k=0,B=this.length-1;B>=0;B--){var I=(this.words[B]|0)+k*67108864;this.words[B]=I/u|0,k=I%u}return this._strip(),m?this.ineg():this},i.prototype.divn=function(u){return this.clone().idivn(u)},i.prototype.egcd=function(u){r(u.negative===0),r(!u.isZero());var m=this,k=u.clone();m.negative!==0?m=m.umod(u):m=m.clone();for(var B=new i(1),I=new i(0),P=new i(0),N=new i(1),R=0;m.isEven()&&k.isEven();)m.iushrn(1),k.iushrn(1),++R;for(var h=k.clone(),M=m.clone();!m.isZero();){for(var ee=0,X=1;!(m.words[0]&X)&&ee<26;++ee,X<<=1);if(ee>0)for(m.iushrn(ee);ee-- >0;)(B.isOdd()||I.isOdd())&&(B.iadd(h),I.isub(M)),B.iushrn(1),I.iushrn(1);for(var re=0,ve=1;!(k.words[0]&ve)&&re<26;++re,ve<<=1);if(re>0)for(k.iushrn(re);re-- >0;)(P.isOdd()||N.isOdd())&&(P.iadd(h),N.isub(M)),P.iushrn(1),N.iushrn(1);m.cmp(k)>=0?(m.isub(k),B.isub(P),I.isub(N)):(k.isub(m),P.isub(B),N.isub(I))}return{a:P,b:N,gcd:k.iushln(R)}},i.prototype._invmp=function(u){r(u.negative===0),r(!u.isZero());var m=this,k=u.clone();m.negative!==0?m=m.umod(u):m=m.clone();for(var B=new i(1),I=new i(0),P=k.clone();m.cmpn(1)>0&&k.cmpn(1)>0;){for(var N=0,R=1;!(m.words[0]&R)&&N<26;++N,R<<=1);if(N>0)for(m.iushrn(N);N-- >0;)B.isOdd()&&B.iadd(P),B.iushrn(1);for(var h=0,M=1;!(k.words[0]&M)&&h<26;++h,M<<=1);if(h>0)for(k.iushrn(h);h-- >0;)I.isOdd()&&I.iadd(P),I.iushrn(1);m.cmp(k)>=0?(m.isub(k),B.isub(I)):(k.isub(m),I.isub(B))}var ee;return m.cmpn(1)===0?ee=B:ee=I,ee.cmpn(0)<0&&ee.iadd(u),ee},i.prototype.gcd=function(u){if(this.isZero())return u.abs();if(u.isZero())return this.abs();var m=this.clone(),k=u.clone();m.negative=0,k.negative=0;for(var B=0;m.isEven()&&k.isEven();B++)m.iushrn(1),k.iushrn(1);do{for(;m.isEven();)m.iushrn(1);for(;k.isEven();)k.iushrn(1);var I=m.cmp(k);if(I<0){var P=m;m=k,k=P}else if(I===0||k.cmpn(1)===0)break;m.isub(k)}while(!0);return k.iushln(B)},i.prototype.invm=function(u){return this.egcd(u).a.umod(u)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(u){return this.words[0]&u},i.prototype.bincn=function(u){r(typeof u=="number");var m=u%26,k=(u-m)/26,B=1<<m;if(this.length<=k)return this._expand(k+1),this.words[k]|=B,this;for(var I=B,P=k;I!==0&&P<this.length;P++){var N=this.words[P]|0;N+=I,I=N>>>26,N&=67108863,this.words[P]=N}return I!==0&&(this.words[P]=I,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(u){var m=u<0;if(this.negative!==0&&!m)return-1;if(this.negative===0&&m)return 1;this._strip();var k;if(this.length>1)k=1;else{m&&(u=-u),r(u<=67108863,"Number is too big");var B=this.words[0]|0;k=B===u?0:B<u?-1:1}return this.negative!==0?-k|0:k},i.prototype.cmp=function(u){if(this.negative!==0&&u.negative===0)return-1;if(this.negative===0&&u.negative!==0)return 1;var m=this.ucmp(u);return this.negative!==0?-m|0:m},i.prototype.ucmp=function(u){if(this.length>u.length)return 1;if(this.length<u.length)return-1;for(var m=0,k=this.length-1;k>=0;k--){var B=this.words[k]|0,I=u.words[k]|0;if(B!==I){B<I?m=-1:B>I&&(m=1);break}}return m},i.prototype.gtn=function(u){return this.cmpn(u)===1},i.prototype.gt=function(u){return this.cmp(u)===1},i.prototype.gten=function(u){return this.cmpn(u)>=0},i.prototype.gte=function(u){return this.cmp(u)>=0},i.prototype.ltn=function(u){return this.cmpn(u)===-1},i.prototype.lt=function(u){return this.cmp(u)===-1},i.prototype.lten=function(u){return this.cmpn(u)<=0},i.prototype.lte=function(u){return this.cmp(u)<=0},i.prototype.eqn=function(u){return this.cmpn(u)===0},i.prototype.eq=function(u){return this.cmp(u)===0},i.red=function(u){return new Y(u)},i.prototype.toRed=function(u){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),u.convertTo(this)._forceRed(u)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(u){return this.red=u,this},i.prototype.forceRed=function(u){return r(!this.red,"Already a number in reduction context"),this._forceRed(u)},i.prototype.redAdd=function(u){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,u)},i.prototype.redIAdd=function(u){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,u)},i.prototype.redSub=function(u){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,u)},i.prototype.redISub=function(u){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,u)},i.prototype.redShl=function(u){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,u)},i.prototype.redMul=function(u){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.mul(this,u)},i.prototype.redIMul=function(u){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.imul(this,u)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(u){return r(this.red&&!u.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,u)};var L={k256:null,p224:null,p192:null,p25519:null};function D(T,u){this.name=T,this.p=new i(u,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}D.prototype._tmp=function(){var u=new i(null);return u.words=new Array(Math.ceil(this.n/13)),u},D.prototype.ireduce=function(u){var m=u,k;do this.split(m,this.tmp),m=this.imulK(m),m=m.iadd(this.tmp),k=m.bitLength();while(k>this.n);var B=k<this.n?-1:m.ucmp(this.p);return B===0?(m.words[0]=0,m.length=1):B>0?m.isub(this.p):m.strip!==void 0?m.strip():m._strip(),m},D.prototype.split=function(u,m){u.iushrn(this.n,0,m)},D.prototype.imulK=function(u){return u.imul(this.k)};function W(){D.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(W,D),W.prototype.split=function(u,m){for(var k=4194303,B=Math.min(u.length,9),I=0;I<B;I++)m.words[I]=u.words[I];if(m.length=B,u.length<=9){u.words[0]=0,u.length=1;return}var P=u.words[9];for(m.words[m.length++]=P&k,I=10;I<u.length;I++){var N=u.words[I]|0;u.words[I-10]=(N&k)<<4|P>>>22,P=N}P>>>=22,u.words[I-10]=P,P===0&&u.length>10?u.length-=10:u.length-=9},W.prototype.imulK=function(u){u.words[u.length]=0,u.words[u.length+1]=0,u.length+=2;for(var m=0,k=0;k<u.length;k++){var B=u.words[k]|0;m+=B*977,u.words[k]=m&67108863,m=B*64+(m/67108864|0)}return u.words[u.length-1]===0&&(u.length--,u.words[u.length-1]===0&&u.length--),u};function q(){D.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(q,D);function F(){D.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(F,D);function K(){D.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(K,D),K.prototype.imulK=function(u){for(var m=0,k=0;k<u.length;k++){var B=(u.words[k]|0)*19+m,I=B&67108863;B>>>=26,u.words[k]=I,m=B}return m!==0&&(u.words[u.length++]=m),u},i._prime=function(u){if(L[u])return L[u];var m;if(u==="k256")m=new W;else if(u==="p224")m=new q;else if(u==="p192")m=new F;else if(u==="p25519")m=new K;else throw new Error("Unknown prime "+u);return L[u]=m,m};function Y(T){if(typeof T=="string"){var u=i._prime(T);this.m=u.p,this.prime=u}else r(T.gtn(1),"modulus must be greater than 1"),this.m=T,this.prime=null}Y.prototype._verify1=function(u){r(u.negative===0,"red works only with positives"),r(u.red,"red works only with red numbers")},Y.prototype._verify2=function(u,m){r((u.negative|m.negative)===0,"red works only with positives"),r(u.red&&u.red===m.red,"red works only with red numbers")},Y.prototype.imod=function(u){return this.prime?this.prime.ireduce(u)._forceRed(this):(f(u,u.umod(this.m)._forceRed(this)),u)},Y.prototype.neg=function(u){return u.isZero()?u.clone():this.m.sub(u)._forceRed(this)},Y.prototype.add=function(u,m){this._verify2(u,m);var k=u.add(m);return k.cmp(this.m)>=0&&k.isub(this.m),k._forceRed(this)},Y.prototype.iadd=function(u,m){this._verify2(u,m);var k=u.iadd(m);return k.cmp(this.m)>=0&&k.isub(this.m),k},Y.prototype.sub=function(u,m){this._verify2(u,m);var k=u.sub(m);return k.cmpn(0)<0&&k.iadd(this.m),k._forceRed(this)},Y.prototype.isub=function(u,m){this._verify2(u,m);var k=u.isub(m);return k.cmpn(0)<0&&k.iadd(this.m),k},Y.prototype.shl=function(u,m){return this._verify1(u),this.imod(u.ushln(m))},Y.prototype.imul=function(u,m){return this._verify2(u,m),this.imod(u.imul(m))},Y.prototype.mul=function(u,m){return this._verify2(u,m),this.imod(u.mul(m))},Y.prototype.isqr=function(u){return this.imul(u,u.clone())},Y.prototype.sqr=function(u){return this.mul(u,u)},Y.prototype.sqrt=function(u){if(u.isZero())return u.clone();var m=this.m.andln(3);if(r(m%2===1),m===3){var k=this.m.add(new i(1)).iushrn(2);return this.pow(u,k)}for(var B=this.m.subn(1),I=0;!B.isZero()&&B.andln(1)===0;)I++,B.iushrn(1);r(!B.isZero());var P=new i(1).toRed(this),N=P.redNeg(),R=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new i(2*h*h).toRed(this);this.pow(h,R).cmp(N)!==0;)h.redIAdd(N);for(var M=this.pow(h,B),ee=this.pow(u,B.addn(1).iushrn(1)),X=this.pow(u,B),re=I;X.cmp(P)!==0;){for(var ve=X,ye=0;ve.cmp(P)!==0;ye++)ve=ve.redSqr();r(ye<re);var pe=this.pow(M,new i(1).iushln(re-ye-1));ee=ee.redMul(pe),M=pe.redSqr(),X=X.redMul(M),re=ye}return ee},Y.prototype.invm=function(u){var m=u._invmp(this.m);return m.negative!==0?(m.negative=0,this.imod(m).redNeg()):this.imod(m)},Y.prototype.pow=function(u,m){if(m.isZero())return new i(1).toRed(this);if(m.cmpn(1)===0)return u.clone();var k=4,B=new Array(1<<k);B[0]=new i(1).toRed(this),B[1]=u;for(var I=2;I<B.length;I++)B[I]=this.mul(B[I-1],u);var P=B[0],N=0,R=0,h=m.bitLength()%26;for(h===0&&(h=26),I=m.length-1;I>=0;I--){for(var M=m.words[I],ee=h-1;ee>=0;ee--){var X=M>>ee&1;if(P!==B[0]&&(P=this.sqr(P)),X===0&&N===0){R=0;continue}N<<=1,N|=X,R++,!(R!==k&&(I!==0||ee!==0))&&(P=this.mul(P,B[N]),R=0,N=0)}h=26}return P},Y.prototype.convertTo=function(u){var m=u.umod(this.m);return m===u?m.clone():m},Y.prototype.convertFrom=function(u){var m=u.clone();return m.red=null,m},i.mont=function(u){return new te(u)};function te(T){Y.call(this,T),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(te,Y),te.prototype.convertTo=function(u){return this.imod(u.ushln(this.shift))},te.prototype.convertFrom=function(u){var m=this.imod(u.mul(this.rinv));return m.red=null,m},te.prototype.imul=function(u,m){if(u.isZero()||m.isZero())return u.words[0]=0,u.length=1,u;var k=u.imul(m),B=k.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),I=k.isub(B).iushrn(this.shift),P=I;return I.cmp(this.m)>=0?P=I.isub(this.m):I.cmpn(0)<0&&(P=I.iadd(this.m)),P._forceRed(this)},te.prototype.mul=function(u,m){if(u.isZero()||m.isZero())return new i(0)._forceRed(this);var k=u.mul(m),B=k.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),I=k.isub(B).iushrn(this.shift),P=I;return I.cmp(this.m)>=0?P=I.isub(this.m):I.cmpn(0)<0&&(P=I.iadd(this.m)),P._forceRed(this)},te.prototype.invm=function(u){var m=this.imod(u._invmp(this.m).mul(this.r2));return m._forceRed(this)}})(t,or)})(Cf);var cv=Cf.exports;const J0=ra(cv);var ch={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var n=_e,r=n.Buffer;function s(o,a){for(var l in o)a[l]=o[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(s(n,e),e.Buffer=i);function i(o,a,l){return r(o,a,l)}i.prototype=Object.create(r.prototype),s(r,i),i.from=function(o,a,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,a,l)},i.alloc=function(o,a,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var c=r(o);return a!==void 0?typeof l=="string"?c.fill(a,l):c.fill(a):c.fill(0),c},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}})(ch,ch.exports);var Mk=ch.exports,Ya=Mk.Buffer;function Lk(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var r=0;r<t.length;r++){var s=t.charAt(r),i=s.charCodeAt(0);if(e[i]!==255)throw new TypeError(s+" is ambiguous");e[i]=r}var o=t.length,a=t.charAt(0),l=Math.log(o)/Math.log(256),c=Math.log(256)/Math.log(o);function f(g){if((Array.isArray(g)||g instanceof Uint8Array)&&(g=Ya.from(g)),!Ya.isBuffer(g))throw new TypeError("Expected Buffer");if(g.length===0)return"";for(var _=0,E=0,C=0,b=g.length;C!==b&&g[C]===0;)C++,_++;for(var S=(b-C)*c+1>>>0,x=new Uint8Array(S);C!==b;){for(var O=g[C],L=0,D=S-1;(O!==0||L<E)&&D!==-1;D--,L++)O+=256*x[D]>>>0,x[D]=O%o>>>0,O=O/o>>>0;if(O!==0)throw new Error("Non-zero carry");E=L,C++}for(var W=S-E;W!==S&&x[W]===0;)W++;for(var q=a.repeat(_);W<S;++W)q+=t.charAt(x[W]);return q}function v(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return Ya.alloc(0);for(var _=0,E=0,C=0;g[_]===a;)E++,_++;for(var b=(g.length-_)*l+1>>>0,S=new Uint8Array(b);_<g.length;){var x=g.charCodeAt(_);if(x>255)return;var O=e[x];if(O===255)return;for(var L=0,D=b-1;(O!==0||L<C)&&D!==-1;D--,L++)O+=o*S[D]>>>0,S[D]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");C=L,_++}for(var W=b-C;W!==b&&S[W]===0;)W++;var q=Ya.allocUnsafe(E+(b-W));q.fill(0,0,E);for(var F=E;W!==b;)q[F++]=S[W++];return q}function w(g){var _=v(g);if(_)return _;throw new Error("Non-base"+o+" character")}return{encode:f,decodeUnsafe:v,decode:w}}var Uk=Lk,Dk=Uk,Fk="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",uv=Dk(Fk);const qt=ra(uv),Y0=zw;var zt={};function Rr(t,e,n){return e<=t&&t<=n}function Sc(t){if(t===void 0)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function $k(t){for(var e=String(t),n=e.length,r=0,s=[];r<n;){var i=e.charCodeAt(r);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(r===n-1)s.push(65533);else{var o=t.charCodeAt(r+1);if(56320<=o&&o<=57343){var a=i&1023,l=o&1023;s.push(65536+(a<<10)+l),r+=1}else s.push(65533)}r+=1}return s}function zk(t){for(var e="",n=0;n<t.length;++n){var r=t[n];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return e}var Hl=-1;function If(t){this.tokens=[].slice.call(t)}If.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Hl},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var Gi=-1;function Du(t,e){if(t)throw TypeError("Decoder error");return e||65533}var Kl="utf-8";function Gl(t,e){if(!(this instanceof Gl))return new Gl(t,e);if(t=t!==void 0?String(t).toLowerCase():Kl,t!==Kl)throw new Error("Encoding not supported. Only utf-8 is supported");e=Sc(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Gl.prototype={decode:function(e,n){var r;typeof e=="object"&&e instanceof ArrayBuffer?r=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):r=new Uint8Array(0),n=Sc(n),this._streaming||(this._decoder=new qk({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!n.stream;for(var s=new If(r),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==Gi);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===Gi)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),zk(i)}};function Jl(t,e){if(!(this instanceof Jl))return new Jl(t,e);if(t=t!==void 0?String(t).toLowerCase():Kl,t!==Kl)throw new Error("Encoding not supported. Only utf-8 is supported");e=Sc(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Jl.prototype={encode:function(e,n){e=e?String(e):"",n=Sc(n),this._streaming||(this._encoder=new Wk(this._options)),this._streaming=!!n.stream;for(var r=[],s=new If($k(e)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==Gi);)Array.isArray(i)?r.push.apply(r,i):r.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==Gi;)Array.isArray(i)?r.push.apply(r,i):r.push(i);this._encoder=null}return new Uint8Array(r)}};function qk(t){var e=t.fatal,n=0,r=0,s=0,i=128,o=191;this.handler=function(a,l){if(l===Hl&&s!==0)return s=0,Du(e);if(l===Hl)return Gi;if(s===0){if(Rr(l,0,127))return l;if(Rr(l,194,223))s=1,n=l-192;else if(Rr(l,224,239))l===224&&(i=160),l===237&&(o=159),s=2,n=l-224;else if(Rr(l,240,244))l===240&&(i=144),l===244&&(o=143),s=3,n=l-240;else return Du(e);return n=n<<6*s,null}if(!Rr(l,i,o))return n=s=r=0,i=128,o=191,a.prepend(l),Du(e);if(i=128,o=191,r+=1,n+=l-128<<6*(s-r),r!==s)return null;var c=n;return n=s=r=0,c}}function Wk(t){t.fatal,this.handler=function(e,n){if(n===Hl)return Gi;if(Rr(n,0,127))return n;var r,s;Rr(n,128,2047)?(r=1,s=192):Rr(n,2048,65535)?(r=2,s=224):Rr(n,65536,1114111)&&(r=3,s=240);for(var i=[(n>>6*r)+s];r>0;){var o=n>>6*(r-1);i.push(128|o&63),r-=1}return i}}const Vk=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Gl,TextEncoder:Jl},Symbol.toStringTag,{value:"Module"})),Hk=nc(Vk);var Kk=or&&or.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Gk=or&&or.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),wr=or&&or.__decorate||function(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i},Jk=or&&or.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.hasOwnProperty.call(t,n)&&Kk(e,t,n);return Gk(e,t),e},dv=or&&or.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(zt,"__esModule",{value:!0});var hv=zt.deserializeUnchecked=wv=zt.deserialize=yv=zt.serialize=zt.BinaryReader=zt.BinaryWriter=zt.BorshError=zt.baseDecode=zt.baseEncode=void 0;const Qr=dv(cv),fv=dv(uv),Yk=Jk(Hk),Zk=typeof TextDecoder!="function"?Yk.TextDecoder:TextDecoder,Xk=new Zk("utf-8",{fatal:!0});function Qk(t){return typeof t=="string"&&(t=Buffer.from(t,"utf8")),fv.default.encode(Buffer.from(t))}zt.baseEncode=Qk;function e2(t){return Buffer.from(fv.default.decode(t))}zt.baseDecode=e2;const Fu=1024;class sn extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}zt.BorshError=sn;class pv{constructor(){this.buf=Buffer.alloc(Fu),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(Fu)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Qr.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Qr.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Qr.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Qr.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),e,Buffer.alloc(Fu)]),this.length+=e.length}writeString(e){this.maybeResize();const n=Buffer.from(e,"utf8");this.writeU32(n.length),this.writeBuffer(n)}writeFixedArray(e){this.writeBuffer(Buffer.from(e))}writeArray(e,n){this.maybeResize(),this.writeU32(e.length);for(const r of e)this.maybeResize(),n(r)}toArray(){return this.buf.subarray(0,this.length)}}zt.BinaryWriter=pv;function vr(t,e,n){const r=n.value;n.value=function(...s){try{return r.apply(this,s)}catch(i){if(i instanceof RangeError){const o=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new sn("Reached the end of buffer when deserializing")}throw i}}}class In{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new Qr.default(e,"le")}readU128(){const e=this.readBuffer(16);return new Qr.default(e,"le")}readU256(){const e=this.readBuffer(32);return new Qr.default(e,"le")}readU512(){const e=this.readBuffer(64);return new Qr.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new sn(`Expected buffer length ${e} isn't within bounds`);const n=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,n}readString(){const e=this.readU32(),n=this.readBuffer(e);try{return Xk.decode(n)}catch(r){throw new sn(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const n=this.readU32(),r=Array();for(let s=0;s<n;++s)r.push(e());return r}}wr([vr],In.prototype,"readU8",null);wr([vr],In.prototype,"readU16",null);wr([vr],In.prototype,"readU32",null);wr([vr],In.prototype,"readU64",null);wr([vr],In.prototype,"readU128",null);wr([vr],In.prototype,"readU256",null);wr([vr],In.prototype,"readU512",null);wr([vr],In.prototype,"readString",null);wr([vr],In.prototype,"readFixedArray",null);wr([vr],In.prototype,"readArray",null);zt.BinaryReader=In;function gv(t){return t.charAt(0).toUpperCase()+t.slice(1)}function ks(t,e,n,r,s){try{if(typeof r=="string")s[`write${gv(r)}`](n);else if(r instanceof Array)if(typeof r[0]=="number"){if(n.length!==r[0])throw new sn(`Expecting byte array of length ${r[0]}, but got ${n.length} bytes`);s.writeFixedArray(n)}else if(r.length===2&&typeof r[1]=="number"){if(n.length!==r[1])throw new sn(`Expecting byte array of length ${r[1]}, but got ${n.length} bytes`);for(let i=0;i<r[1];i++)ks(t,null,n[i],r[0],s)}else s.writeArray(n,i=>{ks(t,e,i,r[0],s)});else if(r.kind!==void 0)switch(r.kind){case"option":{n==null?s.writeU8(0):(s.writeU8(1),ks(t,e,n,r.type,s));break}case"map":{s.writeU32(n.size),n.forEach((i,o)=>{ks(t,e,o,r.key,s),ks(t,e,i,r.value,s)});break}default:throw new sn(`FieldType ${r} unrecognized`)}else mv(t,n,s)}catch(i){throw i instanceof sn&&i.addToFieldPath(e),i}}function mv(t,e,n){if(typeof e.borshSerialize=="function"){e.borshSerialize(n);return}const r=t.get(e.constructor);if(!r)throw new sn(`Class ${e.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([s,i])=>{ks(t,s,e[s],i,n)});else if(r.kind==="enum"){const s=e[r.field];for(let i=0;i<r.values.length;++i){const[o,a]=r.values[i];if(o===s){n.writeU8(i),ks(t,o,e[o],a,n);break}}}else throw new sn(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function t2(t,e,n=pv){const r=new n;return mv(t,e,r),r.toArray()}var yv=zt.serialize=t2;function As(t,e,n,r){try{if(typeof n=="string")return r[`read${gv(n)}`]();if(n instanceof Array){if(typeof n[0]=="number")return r.readFixedArray(n[0]);if(typeof n[1]=="number"){const s=[];for(let i=0;i<n[1];i++)s.push(As(t,null,n[0],r));return s}else return r.readArray(()=>As(t,e,n[0],r))}if(n.kind==="option")return r.readU8()?As(t,e,n.type,r):void 0;if(n.kind==="map"){let s=new Map;const i=r.readU32();for(let o=0;o<i;o++){const a=As(t,e,n.key,r),l=As(t,e,n.value,r);s.set(a,l)}return s}return Tf(t,n,r)}catch(s){throw s instanceof sn&&s.addToFieldPath(e),s}}function Tf(t,e,n){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(n);const r=t.get(e);if(!r)throw new sn(`Class ${e.name} is missing in schema`);if(r.kind==="struct"){const s={};for(const[i,o]of t.get(e).fields)s[i]=As(t,i,o,n);return new e(s)}if(r.kind==="enum"){const s=n.readU8();if(s>=r.values.length)throw new sn(`Enum index: ${s} is out of range`);const[i,o]=r.values[s],a=As(t,i,o,n);return new e({[i]:a})}throw new sn(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function n2(t,e,n,r=In){const s=new r(n),i=Tf(t,e,s);if(s.offset<n.length)throw new sn(`Unexpected ${n.length-s.offset} bytes after deserialized data`);return i}var wv=zt.deserialize=n2;function r2(t,e,n,r=In){const s=new r(n);return Tf(t,e,s)}hv=zt.deserializeUnchecked=r2;var V={};Object.defineProperty(V,"__esModule",{value:!0});V.s16=V.s8=V.nu64be=V.u48be=V.u40be=V.u32be=V.u24be=V.u16be=Dt=V.nu64=V.u48=V.u40=he=V.u32=V.u24=On=V.u16=Ae=V.u8=Ls=V.offset=V.greedy=V.Constant=V.UTF8=V.CString=V.Blob=V.Boolean=V.BitField=V.BitStructure=V.VariantLayout=V.Union=V.UnionLayoutDiscriminator=V.UnionDiscriminator=V.Structure=V.Sequence=V.DoubleBE=V.Double=V.FloatBE=V.Float=V.NearInt64BE=V.NearInt64=V.NearUInt64BE=V.NearUInt64=V.IntBE=V.Int=V.UIntBE=V.UInt=V.OffsetLayout=V.GreedyCount=V.ExternalLayout=V.bindConstructorLayout=V.nameWithProperty=V.Layout=V.uint8ArrayToBuffer=V.checkUint8Array=void 0;V.constant=V.utf8=V.cstr=We=V.blob=V.unionLayoutDiscriminator=V.union=on=V.seq=V.bits=le=V.struct=V.f64be=V.f64=V.f32be=V.f32=V.ns64be=V.s48be=V.s40be=V.s32be=V.s24be=V.s16be=_n=V.ns64=V.s48=V.s40=V.s32=V.s24=void 0;const Bf=_e;function no(t){if(!(t instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}V.checkUint8Array=no;function Ce(t){return no(t),Bf.Buffer.from(t.buffer,t.byteOffset,t.length)}V.uint8ArrayToBuffer=Ce;class Te{constructor(e,n){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=n}makeDestinationObject(){return{}}getSpan(e,n){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const n=Object.create(this.constructor.prototype);return Object.assign(n,this),n.property=e,n}fromArray(e){}}V.Layout=Te;function jf(t,e){return e.property?t+"["+e.property+"]":t}V.nameWithProperty=jf;function s2(t,e){if(typeof t!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(t,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof Te))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");t.layout_=e,e.boundConstructor_=t,e.makeDestinationObject=()=>new t,Object.defineProperty(t.prototype,"encode",{value(n,r){return e.encode(this,n,r)},writable:!0}),Object.defineProperty(t,"decode",{value(n,r){return e.decode(n,r)},writable:!0})}V.bindConstructorLayout=s2;class hn extends Te{isCount(){throw new Error("ExternalLayout is abstract")}}V.ExternalLayout=hn;class vv extends hn{constructor(e=1,n){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,n),this.elementSpan=e}isCount(){return!0}decode(e,n=0){no(e);const r=e.length-n;return Math.floor(r/this.elementSpan)}encode(e,n,r){return 0}}V.GreedyCount=vv;class Nf extends hn{constructor(e,n=0,r){if(!(e instanceof Te))throw new TypeError("layout must be a Layout");if(!Number.isInteger(n))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=n}isCount(){return this.layout instanceof Wn||this.layout instanceof ir}decode(e,n=0){return this.layout.decode(e,n+this.offset)}encode(e,n,r=0){return this.layout.encode(e,n,r+this.offset)}}V.OffsetLayout=Nf;class Wn extends Te{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return Ce(e).readUIntLE(n,this.span)}encode(e,n,r=0){return Ce(n).writeUIntLE(e,r,this.span),this.span}}V.UInt=Wn;class ir extends Te{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return Ce(e).readUIntBE(n,this.span)}encode(e,n,r=0){return Ce(n).writeUIntBE(e,r,this.span),this.span}}V.UIntBE=ir;class Gs extends Te{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return Ce(e).readIntLE(n,this.span)}encode(e,n,r=0){return Ce(n).writeIntLE(e,r,this.span),this.span}}V.Int=Gs;class ro extends Te{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return Ce(e).readIntBE(n,this.span)}encode(e,n,r=0){return Ce(n).writeIntBE(e,r,this.span),this.span}}V.IntBE=ro;const uh=Math.pow(2,32);function Ec(t){const e=Math.floor(t/uh),n=t-e*uh;return{hi32:e,lo32:n}}function kc(t,e){return t*uh+e}class bv extends Te{constructor(e){super(8,e)}decode(e,n=0){const r=Ce(e),s=r.readUInt32LE(n),i=r.readUInt32LE(n+4);return kc(i,s)}encode(e,n,r=0){const s=Ec(e),i=Ce(n);return i.writeUInt32LE(s.lo32,r),i.writeUInt32LE(s.hi32,r+4),8}}V.NearUInt64=bv;class _v extends Te{constructor(e){super(8,e)}decode(e,n=0){const r=Ce(e),s=r.readUInt32BE(n),i=r.readUInt32BE(n+4);return kc(s,i)}encode(e,n,r=0){const s=Ec(e),i=Ce(n);return i.writeUInt32BE(s.hi32,r),i.writeUInt32BE(s.lo32,r+4),8}}V.NearUInt64BE=_v;class xv extends Te{constructor(e){super(8,e)}decode(e,n=0){const r=Ce(e),s=r.readUInt32LE(n),i=r.readInt32LE(n+4);return kc(i,s)}encode(e,n,r=0){const s=Ec(e),i=Ce(n);return i.writeUInt32LE(s.lo32,r),i.writeInt32LE(s.hi32,r+4),8}}V.NearInt64=xv;class Sv extends Te{constructor(e){super(8,e)}decode(e,n=0){const r=Ce(e),s=r.readInt32BE(n),i=r.readUInt32BE(n+4);return kc(s,i)}encode(e,n,r=0){const s=Ec(e),i=Ce(n);return i.writeInt32BE(s.hi32,r),i.writeUInt32BE(s.lo32,r+4),8}}V.NearInt64BE=Sv;class Ev extends Te{constructor(e){super(4,e)}decode(e,n=0){return Ce(e).readFloatLE(n)}encode(e,n,r=0){return Ce(n).writeFloatLE(e,r),4}}V.Float=Ev;class kv extends Te{constructor(e){super(4,e)}decode(e,n=0){return Ce(e).readFloatBE(n)}encode(e,n,r=0){return Ce(n).writeFloatBE(e,r),4}}V.FloatBE=kv;class Av extends Te{constructor(e){super(8,e)}decode(e,n=0){return Ce(e).readDoubleLE(n)}encode(e,n,r=0){return Ce(n).writeDoubleLE(e,r),8}}V.Double=Av;class Rv extends Te{constructor(e){super(8,e)}decode(e,n=0){return Ce(e).readDoubleBE(n)}encode(e,n,r=0){return Ce(n).writeDoubleBE(e,r),8}}V.DoubleBE=Rv;class Cv extends Te{constructor(e,n,r){if(!(e instanceof Te))throw new TypeError("elementLayout must be a Layout");if(!(n instanceof hn&&n.isCount()||Number.isInteger(n)&&0<=n))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(n instanceof hn)&&0<e.span&&(s=n*e.span),super(s,r),this.elementLayout=e,this.count=n}getSpan(e,n=0){if(0<=this.span)return this.span;let r=0,s=this.count;if(s instanceof hn&&(s=s.decode(e,n)),0<this.elementLayout.span)r=s*this.elementLayout.span;else{let i=0;for(;i<s;)r+=this.elementLayout.getSpan(e,n+r),++i}return r}decode(e,n=0){const r=[];let s=0,i=this.count;for(i instanceof hn&&(i=i.decode(e,n));s<i;)r.push(this.elementLayout.decode(e,n)),n+=this.elementLayout.getSpan(e,n),s+=1;return r}encode(e,n,r=0){const s=this.elementLayout,i=e.reduce((o,a)=>o+s.encode(a,n,r+o),0);return this.count instanceof hn&&this.count.encode(e.length,n,r),i}}V.Sequence=Cv;class Iv extends Te{constructor(e,n,r){if(!(Array.isArray(e)&&e.reduce((i,o)=>i&&o instanceof Te,!0)))throw new TypeError("fields must be array of Layout instances");typeof n=="boolean"&&r===void 0&&(r=n,n=void 0);for(const i of e)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=e.reduce((i,o)=>i+o.getSpan(),0)}catch{}super(s,n),this.fields=e,this.decodePrefixes=!!r}getSpan(e,n=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((s,i)=>{const o=i.getSpan(e,n);return n+=o,s+o},0)}catch{throw new RangeError("indeterminate span")}return r}decode(e,n=0){no(e);const r=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(r[s.property]=s.decode(e,n)),n+=s.getSpan(e,n),this.decodePrefixes&&e.length===n)break;return r}encode(e,n,r=0){const s=r;let i=0,o=0;for(const a of this.fields){let l=a.span;if(o=0<l?l:0,a.property!==void 0){const c=e[a.property];c!==void 0&&(o=a.encode(c,n,r),0>l&&(l=a.getSpan(n,r)))}i=r,r+=l}return i+o-s}fromArray(e){const n=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<e.length&&(n[r.property]=e.shift());return n}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const n of this.fields)if(n.property===e)return n}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let n=0;for(const r of this.fields){if(r.property===e)return n;0>r.span?n=-1:0<=n&&(n+=r.span)}}}V.Structure=Iv;class Pf{constructor(e){this.property=e}decode(e,n){throw new Error("UnionDiscriminator is abstract")}encode(e,n,r){throw new Error("UnionDiscriminator is abstract")}}V.UnionDiscriminator=Pf;class Yl extends Pf{constructor(e,n){if(!(e instanceof hn&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(n||e.property||"variant"),this.layout=e}decode(e,n){return this.layout.decode(e,n)}encode(e,n,r){return this.layout.encode(e,n,r)}}V.UnionLayoutDiscriminator=Yl;class Of extends Te{constructor(e,n,r){let s;if(e instanceof Wn||e instanceof ir)s=new Yl(new Nf(e));else if(e instanceof hn&&e.isCount())s=new Yl(e);else if(e instanceof Pf)s=e;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(n===void 0&&(n=null),!(n===null||n instanceof Te))throw new TypeError("defaultLayout must be null or a Layout");if(n!==null){if(0>n.span)throw new Error("defaultLayout must have constant span");n.property===void 0&&(n=n.replicate("content"))}let i=-1;n&&(i=n.span,0<=i&&(e instanceof Wn||e instanceof ir)&&(i+=s.layout.span)),super(i,r),this.discriminator=s,this.usesPrefixDiscriminator=e instanceof Wn||e instanceof ir,this.defaultLayout=n,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return o(a)},this.configGetSourceVariant=function(a){o=a.bind(this)}}getSpan(e,n=0){if(0<=this.span)return this.span;const r=this.getVariant(e,n);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,n)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const n=this.registry[e[this.discriminator.property]];if(n&&(!n.layout||n.property&&Object.prototype.hasOwnProperty.call(e,n.property)))return n}else for(const n in this.registry){const r=this.registry[n];if(r.property&&Object.prototype.hasOwnProperty.call(e,r.property))return r}throw new Error("unable to infer src variant")}decode(e,n=0){let r;const s=this.discriminator,i=s.decode(e,n),o=this.registry[i];if(o===void 0){const a=this.defaultLayout;let l=0;this.usesPrefixDiscriminator&&(l=s.layout.span),r=this.makeDestinationObject(),r[s.property]=i,r[a.property]=a.decode(e,n+l)}else r=o.decode(e,n);return r}encode(e,n,r=0){const s=this.getSourceVariant(e);if(s===void 0){const i=this.discriminator,o=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=i.layout.span),i.encode(e[i.property],n,r),a+o.encode(e[o.property],n,r+a)}return s.encode(e,n,r)}addVariant(e,n,r){const s=new Tv(this,e,n,r);return this.registry[e]=s,s}getVariant(e,n=0){let r;return e instanceof Uint8Array?r=this.discriminator.decode(e,n):r=e,this.registry[r]}}V.Union=Of;class Tv extends Te{constructor(e,n,r,s){if(!(e instanceof Of))throw new TypeError("union must be a Union");if(!Number.isInteger(n)||0>n)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&s===void 0&&(s=r,r=null),r){if(!(r instanceof Te))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=r.span&&r.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let i=e.span;0>e.span&&(i=r?r.span:0,0<=i&&e.usesPrefixDiscriminator&&(i+=e.discriminator.layout.span)),super(i,s),this.union=e,this.variant=n,this.layout=r||null}getSpan(e,n=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let s=0;return this.layout&&(s=this.layout.getSpan(e,n+r)),r+s}decode(e,n=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(e,n))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,n+s):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,n,r=0){let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,n,r);let i=s;if(this.layout&&(this.layout.encode(e[this.property],n,r+s),i+=this.layout.getSpan(n,r+s),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}V.VariantLayout=Tv;function hi(t){return 0>t&&(t+=4294967296),t}class Mf extends Te{constructor(e,n,r){if(!(e instanceof Wn||e instanceof ir))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof n=="string"&&r===void 0&&(r=n,n=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!n,this.fields=[];let s=0;this._packedSetValue=function(i){return s=hi(i),this},this._packedGetValue=function(){return s}}decode(e,n=0){const r=this.makeDestinationObject(),s=this.word.decode(e,n);this._packedSetValue(s);for(const i of this.fields)i.property!==void 0&&(r[i.property]=i.decode(e));return r}encode(e,n,r=0){const s=this.word.decode(n,r);this._packedSetValue(s);for(const i of this.fields)if(i.property!==void 0){const o=e[i.property];o!==void 0&&i.encode(o)}return this.word.encode(this._packedGetValue(),n,r)}addField(e,n){const r=new Lf(this,e,n);return this.fields.push(r),r}addBoolean(e){const n=new Bv(this,e);return this.fields.push(n),n}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const n of this.fields)if(n.property===e)return n}}V.BitStructure=Mf;class Lf{constructor(e,n,r){if(!(e instanceof Mf))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(n)||0>=n)throw new TypeError("bits must be positive integer");const s=8*e.span,i=e.fields.reduce((o,a)=>o+a.bits,0);if(n+i>s)throw new Error("bits too long for span remainder ("+(s-i)+" of "+s+" remain)");this.container=e,this.bits=n,this.valueMask=(1<<n)-1,n===32&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=s-i-n),this.wordMask=hi(this.valueMask<<this.start),this.property=r}decode(e,n){const r=this.container._packedGetValue();return hi(r&this.wordMask)>>>this.start}encode(e){if(typeof e!="number"||!Number.isInteger(e)||e!==hi(e&this.valueMask))throw new TypeError(jf("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const n=this.container._packedGetValue(),r=hi(e<<this.start);this.container._packedSetValue(hi(n&~this.wordMask)|r)}}V.BitField=Lf;let Bv=class extends Lf{constructor(e,n){super(e,1,n)}decode(e,n){return!!super.decode(e,n)}encode(e){typeof e=="boolean"&&(e=+e),super.encode(e)}};V.Boolean=Bv;let jv=class extends Te{constructor(e,n){if(!(e instanceof hn&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof hn||(r=e),super(r,n),this.length=e}getSpan(e,n){let r=this.span;return 0>r&&(r=this.length.decode(e,n)),r}decode(e,n=0){let r=this.span;return 0>r&&(r=this.length.decode(e,n)),Ce(e).slice(n,n+r)}encode(e,n,r){let s=this.length;if(this.length instanceof hn&&(s=e.length),!(e instanceof Uint8Array&&s===e.length))throw new TypeError(jf("Blob.encode",this)+" requires (length "+s+") Uint8Array as src");if(r+s>n.length)throw new RangeError("encoding overruns Uint8Array");const i=Ce(e);return Ce(n).write(i.toString("hex"),r,s,"hex"),this.length instanceof hn&&this.length.encode(s,n,r),s}};V.Blob=jv;class Nv extends Te{constructor(e){super(-1,e)}getSpan(e,n=0){no(e);let r=n;for(;r<e.length&&e[r]!==0;)r+=1;return 1+r-n}decode(e,n=0){const r=this.getSpan(e,n);return Ce(e).slice(n,n+r-1).toString("utf-8")}encode(e,n,r=0){typeof e!="string"&&(e=String(e));const s=Bf.Buffer.from(e,"utf8"),i=s.length;if(r+i>n.length)throw new RangeError("encoding overruns Buffer");const o=Ce(n);return s.copy(o,r),o[r+i]=0,i+1}}V.CString=Nv;class Pv extends Te{constructor(e,n){if(typeof e=="string"&&n===void 0&&(n=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,n),this.maxSpan=e}getSpan(e,n=0){return no(e),e.length-n}decode(e,n=0){const r=this.getSpan(e,n);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return Ce(e).slice(n,n+r).toString("utf-8")}encode(e,n,r=0){typeof e!="string"&&(e=String(e));const s=Bf.Buffer.from(e,"utf8"),i=s.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(r+i>n.length)throw new RangeError("encoding overruns Buffer");return s.copy(Ce(n),r),i}}V.UTF8=Pv;class Ov extends Te{constructor(e,n){super(0,n),this.value=e}decode(e,n){return this.value}encode(e,n,r){return 0}}V.Constant=Ov;V.greedy=(t,e)=>new vv(t,e);var Ls=V.offset=(t,e,n)=>new Nf(t,e,n),Ae=V.u8=t=>new Wn(1,t),On=V.u16=t=>new Wn(2,t);V.u24=t=>new Wn(3,t);var he=V.u32=t=>new Wn(4,t);V.u40=t=>new Wn(5,t);V.u48=t=>new Wn(6,t);var Dt=V.nu64=t=>new bv(t);V.u16be=t=>new ir(2,t);V.u24be=t=>new ir(3,t);V.u32be=t=>new ir(4,t);V.u40be=t=>new ir(5,t);V.u48be=t=>new ir(6,t);V.nu64be=t=>new _v(t);V.s8=t=>new Gs(1,t);V.s16=t=>new Gs(2,t);V.s24=t=>new Gs(3,t);V.s32=t=>new Gs(4,t);V.s40=t=>new Gs(5,t);V.s48=t=>new Gs(6,t);var _n=V.ns64=t=>new xv(t);V.s16be=t=>new ro(2,t);V.s24be=t=>new ro(3,t);V.s32be=t=>new ro(4,t);V.s40be=t=>new ro(5,t);V.s48be=t=>new ro(6,t);V.ns64be=t=>new Sv(t);V.f32=t=>new Ev(t);V.f32be=t=>new kv(t);V.f64=t=>new Av(t);V.f64be=t=>new Rv(t);var le=V.struct=(t,e,n)=>new Iv(t,e,n);V.bits=(t,e,n)=>new Mf(t,e,n);var on=V.seq=(t,e,n)=>new Cv(t,e,n);V.union=(t,e,n)=>new Of(t,e,n);V.unionLayoutDiscriminator=(t,e)=>new Yl(t,e);var We=V.blob=(t,e)=>new jv(t,e);V.cstr=t=>new Nv(t);V.utf8=(t,e)=>new Pv(t,e);V.constant=(t,e)=>new Ov(t,e);var i2=8078e3,o2=8078001,a2=8078004,l2=8078005,c2=8078006,u2=8078011;function Mv(t){return Array.isArray(t)?"%5B"+t.map(Mv).join("%2C%20")+"%5D":typeof t=="bigint"?`${t}n`:encodeURIComponent(String(t!=null&&Object.getPrototypeOf(t)===null?{...t}:t))}function d2([t,e]){return`${t}=${Mv(e)}`}function h2(t){const e=Object.entries(t).map(d2).join("&");return btoa(e)}function f2(t,e={}){{let n=`Solana error #${t}; Decode this error by running \`npx @solana/errors decode -- ${t}`;return Object.keys(e).length&&(n+=` '${h2(e)}'`),`${n}\``}}var Oi=class extends Error{constructor(...[e,n]){let r,s;if(n){const{cause:o,...a}=n;o&&(s={cause:o}),Object.keys(a).length>0&&(r=a)}const i=f2(e,r);super(i,s);At(this,"cause",this.cause);At(this,"context");this.context={__code:e,...r},this.name="SolanaError"}};function p2(t,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(t)}function g2(t){return Object.freeze({...t,encode:e=>{const n=new Uint8Array(p2(e,t));return t.write(e,n,0),n}})}function m2(t){return Object.freeze({...t,decode:(e,n=0)=>t.read(e,n)[0]})}function li(t){return"fixedSize"in t&&typeof t.fixedSize=="number"}function y2(t,e){if(li(t)!==li(e))throw new Oi(a2);if(li(t)&&li(e)&&t.fixedSize!==e.fixedSize)throw new Oi(l2,{decoderFixedSize:e.fixedSize,encoderFixedSize:t.fixedSize});if(!li(t)&&!li(e)&&t.maxSize!==e.maxSize)throw new Oi(c2,{decoderMaxSize:e.maxSize,encoderMaxSize:t.maxSize});return{...e,...t,decode:e.decode,encode:t.encode,read:e.read,write:t.write}}function w2(t,e,n=0){if(e.length-n<=0)throw new Oi(i2,{codecDescription:t})}function v2(t,e,n,r=0){const s=n.length-r;if(s<e)throw new Oi(o2,{bytesLength:s,codecDescription:t,expected:e})}function b2(t,e,n,r){if(r<e||r>n)throw new Oi(u2,{codecDescription:t,max:n,min:e,value:r})}function Lv(t){return(t==null?void 0:t.endian)!==1}function _2(t){return g2({fixedSize:t.size,write(e,n,r){t.range&&b2(t.name,t.range[0],t.range[1],e);const s=new ArrayBuffer(t.size);return t.set(new DataView(s),e,Lv(t.config)),n.set(new Uint8Array(s),r),r+t.size}})}function x2(t){return m2({fixedSize:t.size,read(e,n=0){w2(t.name,e,n),v2(t.name,t.size,e,n);const r=new DataView(S2(e,n,t.size));return[t.get(r,Lv(t.config)),n+t.size]}})}function S2(t,e,n){const r=t.byteOffset+(e??0),s=n??t.byteLength;return t.buffer.slice(r,r+s)}var E2=(t={})=>_2({config:t,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,n,r)=>e.setBigUint64(0,BigInt(n),r),size:8}),k2=(t={})=>x2({config:t,get:(e,n)=>e.getBigUint64(0,n),name:"u64",size:8}),A2=(t={})=>y2(E2(t),k2(t));class R2 extends TypeError{constructor(e,n){let r;const{message:s,explanation:i,...o}=e,{path:a}=e,l=a.length===0?s:`At path: ${a.join(".")} -- ${s}`;super(i??l),i!=null&&(this.cause=l),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...n()])}}function C2(t){return pa(t)&&typeof t[Symbol.iterator]=="function"}function pa(t){return typeof t=="object"&&t!=null}function Zl(t){return pa(t)&&!Array.isArray(t)}function lr(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function I2(t){const{done:e,value:n}=t.next();return e?void 0:n}function T2(t,e,n,r){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:s,branch:i}=e,{type:o}=n,{refinement:a,message:l=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${lr(r)}\``}=t;return{value:r,type:o,refinement:a,key:s[s.length-1],path:s,branch:i,...t,message:l}}function*Z0(t,e,n,r){C2(t)||(t=[t]);for(const s of t){const i=T2(s,e,n,r);i&&(yield i)}}function*Uf(t,e,n={}){const{path:r=[],branch:s=[t],coerce:i=!1,mask:o=!1}=n,a={path:r,branch:s,mask:o};i&&(t=e.coercer(t,a));let l="valid";for(const c of e.validator(t,a))c.explanation=n.message,l="not_valid",yield[c,void 0];for(let[c,f,v]of e.entries(t,a)){const w=Uf(f,v,{path:c===void 0?r:[...r,c],branch:c===void 0?s:[...s,f],coerce:i,mask:o,message:n.message});for(const g of w)g[0]?(l=g[0].refinement!=null?"not_refined":"not_valid",yield[g[0],void 0]):i&&(f=g[1],c===void 0?t=f:t instanceof Map?t.set(c,f):t instanceof Set?t.add(f):pa(t)&&(f!==void 0||c in t)&&(t[c]=f))}if(l!=="not_valid")for(const c of e.refiner(t,a))c.explanation=n.message,l="not_refined",yield[c,void 0];l==="valid"&&(yield[void 0,t])}let br=class{constructor(e){const{type:n,schema:r,validator:s,refiner:i,coercer:o=l=>l,entries:a=function*(){}}=e;this.type=n,this.schema=r,this.entries=a,this.coercer=o,s?this.validator=(l,c)=>{const f=s(l,c);return Z0(f,c,this,l)}:this.validator=()=>[],i?this.refiner=(l,c)=>{const f=i(l,c);return Z0(f,c,this,l)}:this.refiner=()=>[]}assert(e,n){return B2(e,this,n)}create(e,n){return ne(e,this,n)}is(e){return Uv(e,this)}mask(e,n){return j2(e,this,n)}validate(e,n={}){return ga(e,this,n)}};function B2(t,e,n){const r=ga(t,e,{message:n});if(r[0])throw r[0]}function ne(t,e,n){const r=ga(t,e,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function j2(t,e,n){const r=ga(t,e,{coerce:!0,mask:!0,message:n});if(r[0])throw r[0];return r[1]}function Uv(t,e){return!ga(t,e)[0]}function ga(t,e,n={}){const r=Uf(t,e,n),s=I2(r);return s[0]?[new R2(s[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function Js(t,e){return new br({type:t,schema:null,validator:e})}function N2(){return Js("any",()=>!0)}function se(t){return new br({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[n,r]of e.entries())yield[n,r,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${lr(e)}`}})}function yr(){return Js("boolean",t=>typeof t=="boolean")}function Df(t){return Js("instance",e=>e instanceof t||`Expected a \`${t.name}\` instance, but received: ${lr(e)}`)}function Je(t){const e=lr(t),n=typeof t;return new br({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?t:null,validator(r){return r===t||`Expected the literal \`${e}\`, but received: ${lr(r)}`}})}function P2(){return Js("never",()=>!1)}function ie(t){return new br({...t,validator:(e,n)=>e===null||t.validator(e,n),refiner:(e,n)=>e===null||t.refiner(e,n)})}function z(){return Js("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${lr(t)}`)}function fe(t){return new br({...t,validator:(e,n)=>e===void 0||t.validator(e,n),refiner:(e,n)=>e===void 0||t.refiner(e,n)})}function Dv(t,e){return new br({type:"record",schema:null,*entries(n){if(pa(n))for(const r in n){const s=n[r];yield[r,r,t],yield[r,s,e]}},validator(n){return Zl(n)||`Expected an object, but received: ${lr(n)}`},coercer(n){return Zl(n)?{...n}:n}})}function Q(){return Js("string",t=>typeof t=="string"||`Expected a string, but received: ${lr(t)}`)}function Ff(t){const e=P2();return new br({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){const r=Math.max(t.length,n.length);for(let s=0;s<r;s++)yield[s,n[s],t[s]||e]}},validator(n){return Array.isArray(n)||`Expected an array, but received: ${lr(n)}`},coercer(n){return Array.isArray(n)?n.slice():n}})}function J(t){const e=Object.keys(t);return new br({type:"type",schema:t,*entries(n){if(pa(n))for(const r of e)yield[r,n[r],t[r]]},validator(n){return Zl(n)||`Expected an object, but received: ${lr(n)}`},coercer(n){return Zl(n)?{...n}:n}})}function ln(t){const e=t.map(n=>n.type).join(" | ");return new br({type:"union",schema:null,coercer(n,r){for(const s of t){const[i,o]=s.validate(n,{coerce:!0,mask:r.mask});if(!i)return o}return n},validator(n,r){const s=[];for(const i of t){const[...o]=Uf(n,i,r),[a]=o;if(a[0])for(const[l]of o)l&&s.push(l);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${lr(n)}`,...s]}})}function so(){return Js("unknown",()=>!0)}function ma(t,e,n){return new br({...t,coercer:(r,s)=>Uv(r,e)?t.coercer(n(r,s),s):t.coercer(r,s)})}var Za,O2=new Uint8Array(16);function Fv(){if(!Za&&(Za=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Za))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Za(O2)}const M2=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Ac(t){return typeof t=="string"&&M2.test(t)}var Lt=[];for(var $u=0;$u<256;++$u)Lt.push(($u+256).toString(16).substr(1));function Rc(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Lt[t[e+0]]+Lt[t[e+1]]+Lt[t[e+2]]+Lt[t[e+3]]+"-"+Lt[t[e+4]]+Lt[t[e+5]]+"-"+Lt[t[e+6]]+Lt[t[e+7]]+"-"+Lt[t[e+8]]+Lt[t[e+9]]+"-"+Lt[t[e+10]]+Lt[t[e+11]]+Lt[t[e+12]]+Lt[t[e+13]]+Lt[t[e+14]]+Lt[t[e+15]]).toLowerCase();if(!Ac(n))throw TypeError("Stringified UUID is invalid");return n}var X0,zu,qu=0,Wu=0;function L2(t,e,n){var r=e&&n||0,s=e||new Array(16);t=t||{};var i=t.node||X0,o=t.clockseq!==void 0?t.clockseq:zu;if(i==null||o==null){var a=t.random||(t.rng||Fv)();i==null&&(i=X0=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=zu=(a[6]<<8|a[7])&16383)}var l=t.msecs!==void 0?t.msecs:Date.now(),c=t.nsecs!==void 0?t.nsecs:Wu+1,f=l-qu+(c-Wu)/1e4;if(f<0&&t.clockseq===void 0&&(o=o+1&16383),(f<0||l>qu)&&t.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");qu=l,Wu=c,zu=o,l+=122192928e5;var v=((l&268435455)*1e4+c)%4294967296;s[r++]=v>>>24&255,s[r++]=v>>>16&255,s[r++]=v>>>8&255,s[r++]=v&255;var w=l/4294967296*1e4&268435455;s[r++]=w>>>8&255,s[r++]=w&255,s[r++]=w>>>24&15|16,s[r++]=w>>>16&255,s[r++]=o>>>8|128,s[r++]=o&255;for(var g=0;g<6;++g)s[r+g]=i[g];return e||Rc(s)}function $v(t){if(!Ac(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}function U2(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}var D2="6ba7b810-9dad-11d1-80b4-00c04fd430c8",F2="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function zv(t,e,n){function r(s,i,o,a){if(typeof s=="string"&&(s=U2(s)),typeof i=="string"&&(i=$v(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var l=new Uint8Array(16+s.length);if(l.set(i),l.set(s,i.length),l=n(l),l[6]=l[6]&15|e,l[8]=l[8]&63|128,o){a=a||0;for(var c=0;c<16;++c)o[a+c]=l[c];return o}return Rc(l)}try{r.name=t}catch{}return r.DNS=D2,r.URL=F2,r}function $2(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return z2(q2(W2(t),t.length*8))}function z2(t){for(var e=[],n=t.length*32,r="0123456789abcdef",s=0;s<n;s+=8){var i=t[s>>5]>>>s%32&255,o=parseInt(r.charAt(i>>>4&15)+r.charAt(i&15),16);e.push(o)}return e}function qv(t){return(t+64>>>9<<4)+14+1}function q2(t,e){t[e>>5]|=128<<e%32,t[qv(e)-1]=e;for(var n=1732584193,r=-271733879,s=-1732584194,i=271733878,o=0;o<t.length;o+=16){var a=n,l=r,c=s,f=i;n=Yt(n,r,s,i,t[o],7,-680876936),i=Yt(i,n,r,s,t[o+1],12,-389564586),s=Yt(s,i,n,r,t[o+2],17,606105819),r=Yt(r,s,i,n,t[o+3],22,-1044525330),n=Yt(n,r,s,i,t[o+4],7,-176418897),i=Yt(i,n,r,s,t[o+5],12,1200080426),s=Yt(s,i,n,r,t[o+6],17,-1473231341),r=Yt(r,s,i,n,t[o+7],22,-45705983),n=Yt(n,r,s,i,t[o+8],7,1770035416),i=Yt(i,n,r,s,t[o+9],12,-1958414417),s=Yt(s,i,n,r,t[o+10],17,-42063),r=Yt(r,s,i,n,t[o+11],22,-1990404162),n=Yt(n,r,s,i,t[o+12],7,1804603682),i=Yt(i,n,r,s,t[o+13],12,-40341101),s=Yt(s,i,n,r,t[o+14],17,-1502002290),r=Yt(r,s,i,n,t[o+15],22,1236535329),n=Zt(n,r,s,i,t[o+1],5,-165796510),i=Zt(i,n,r,s,t[o+6],9,-1069501632),s=Zt(s,i,n,r,t[o+11],14,643717713),r=Zt(r,s,i,n,t[o],20,-373897302),n=Zt(n,r,s,i,t[o+5],5,-701558691),i=Zt(i,n,r,s,t[o+10],9,38016083),s=Zt(s,i,n,r,t[o+15],14,-660478335),r=Zt(r,s,i,n,t[o+4],20,-405537848),n=Zt(n,r,s,i,t[o+9],5,568446438),i=Zt(i,n,r,s,t[o+14],9,-1019803690),s=Zt(s,i,n,r,t[o+3],14,-187363961),r=Zt(r,s,i,n,t[o+8],20,1163531501),n=Zt(n,r,s,i,t[o+13],5,-1444681467),i=Zt(i,n,r,s,t[o+2],9,-51403784),s=Zt(s,i,n,r,t[o+7],14,1735328473),r=Zt(r,s,i,n,t[o+12],20,-1926607734),n=Xt(n,r,s,i,t[o+5],4,-378558),i=Xt(i,n,r,s,t[o+8],11,-2022574463),s=Xt(s,i,n,r,t[o+11],16,1839030562),r=Xt(r,s,i,n,t[o+14],23,-35309556),n=Xt(n,r,s,i,t[o+1],4,-1530992060),i=Xt(i,n,r,s,t[o+4],11,1272893353),s=Xt(s,i,n,r,t[o+7],16,-155497632),r=Xt(r,s,i,n,t[o+10],23,-1094730640),n=Xt(n,r,s,i,t[o+13],4,681279174),i=Xt(i,n,r,s,t[o],11,-358537222),s=Xt(s,i,n,r,t[o+3],16,-722521979),r=Xt(r,s,i,n,t[o+6],23,76029189),n=Xt(n,r,s,i,t[o+9],4,-640364487),i=Xt(i,n,r,s,t[o+12],11,-421815835),s=Xt(s,i,n,r,t[o+15],16,530742520),r=Xt(r,s,i,n,t[o+2],23,-995338651),n=Qt(n,r,s,i,t[o],6,-198630844),i=Qt(i,n,r,s,t[o+7],10,1126891415),s=Qt(s,i,n,r,t[o+14],15,-1416354905),r=Qt(r,s,i,n,t[o+5],21,-57434055),n=Qt(n,r,s,i,t[o+12],6,1700485571),i=Qt(i,n,r,s,t[o+3],10,-1894986606),s=Qt(s,i,n,r,t[o+10],15,-1051523),r=Qt(r,s,i,n,t[o+1],21,-2054922799),n=Qt(n,r,s,i,t[o+8],6,1873313359),i=Qt(i,n,r,s,t[o+15],10,-30611744),s=Qt(s,i,n,r,t[o+6],15,-1560198380),r=Qt(r,s,i,n,t[o+13],21,1309151649),n=Qt(n,r,s,i,t[o+4],6,-145523070),i=Qt(i,n,r,s,t[o+11],10,-1120210379),s=Qt(s,i,n,r,t[o+2],15,718787259),r=Qt(r,s,i,n,t[o+9],21,-343485551),n=es(n,a),r=es(r,l),s=es(s,c),i=es(i,f)}return[n,r,s,i]}function W2(t){if(t.length===0)return[];for(var e=t.length*8,n=new Uint32Array(qv(e)),r=0;r<e;r+=8)n[r>>5]|=(t[r/8]&255)<<r%32;return n}function es(t,e){var n=(t&65535)+(e&65535),r=(t>>16)+(e>>16)+(n>>16);return r<<16|n&65535}function V2(t,e){return t<<e|t>>>32-e}function Cc(t,e,n,r,s,i){return es(V2(es(es(e,t),es(r,i)),s),n)}function Yt(t,e,n,r,s,i,o){return Cc(e&n|~e&r,t,e,s,i,o)}function Zt(t,e,n,r,s,i,o){return Cc(e&r|n&~r,t,e,s,i,o)}function Xt(t,e,n,r,s,i,o){return Cc(e^n^r,t,e,s,i,o)}function Qt(t,e,n,r,s,i,o){return Cc(n^(e|~r),t,e,s,i,o)}var H2=zv("v3",48,$2);function K2(t,e,n){t=t||{};var r=t.random||(t.rng||Fv)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var s=0;s<16;++s)e[n+s]=r[s];return e}return Rc(r)}function G2(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:return e^n^r;case 2:return e&n^e&r^n&r;case 3:return e^n^r}}function Vu(t,e){return t<<e|t>>>32-e}function J2(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var r=unescape(encodeURIComponent(t));t=[];for(var s=0;s<r.length;++s)t.push(r.charCodeAt(s))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var i=t.length/4+2,o=Math.ceil(i/16),a=new Array(o),l=0;l<o;++l){for(var c=new Uint32Array(16),f=0;f<16;++f)c[f]=t[l*64+f*4]<<24|t[l*64+f*4+1]<<16|t[l*64+f*4+2]<<8|t[l*64+f*4+3];a[l]=c}a[o-1][14]=(t.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(t.length-1)*8&4294967295;for(var v=0;v<o;++v){for(var w=new Uint32Array(80),g=0;g<16;++g)w[g]=a[v][g];for(var _=16;_<80;++_)w[_]=Vu(w[_-3]^w[_-8]^w[_-14]^w[_-16],1);for(var E=n[0],C=n[1],b=n[2],S=n[3],x=n[4],O=0;O<80;++O){var L=Math.floor(O/20),D=Vu(E,5)+G2(L,C,b,S)+x+e[L]+w[O]>>>0;x=S,S=b,b=Vu(C,30)>>>0,C=E,E=D}n[0]=n[0]+E>>>0,n[1]=n[1]+C>>>0,n[2]=n[2]+b>>>0,n[3]=n[3]+S>>>0,n[4]=n[4]+x>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var Y2=zv("v5",80,J2);const Z2="00000000-0000-0000-0000-000000000000";function X2(t){if(!Ac(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const Q2=Object.freeze(Object.defineProperty({__proto__:null,NIL:Z2,parse:$v,stringify:Rc,v1:L2,v3:H2,v4:K2,v5:Y2,validate:Ac,version:X2},Symbol.toStringTag,{value:"Module"})),Wv=nc(Q2),eA=Wv.v4,tA=function(t,e,n,r){if(typeof t!="string")throw new TypeError(t+" must be a string");r=r||{};const s=typeof r.version=="number"?r.version:2;if(s!==1&&s!==2)throw new TypeError(s+" must be 1 or 2");const i={method:t};if(s===2&&(i.jsonrpc="2.0"),e){if(typeof e!="object"&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");i.params=e}if(typeof n>"u"){const o=typeof r.generator=="function"?r.generator:function(){return eA()};i.id=o(i,r)}else s===2&&n===null?r.notificationIdNull&&(i.id=null):i.id=n;return i};var nA=tA;const rA=Wv.v4,sA=nA,ea=function(t,e){if(!(this instanceof ea))return new ea(t,e);e||(e={}),this.options={reviver:typeof e.reviver<"u"?e.reviver:null,replacer:typeof e.replacer<"u"?e.replacer:null,generator:typeof e.generator<"u"?e.generator:function(){return rA()},version:typeof e.version<"u"?e.version:2,notificationIdNull:typeof e.notificationIdNull=="boolean"?e.notificationIdNull:!1},this.callServer=t};var iA=ea;ea.prototype.request=function(t,e,n,r){const s=this;let i=null;const o=Array.isArray(t)&&typeof e=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&t&&typeof t=="object"&&typeof e=="function")r=e,i=t;else{typeof n=="function"&&(r=n,n=void 0);const c=typeof r=="function";try{i=sA(t,e,n,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(f){if(c)return r(f);throw f}if(!c)return i}let l;try{l=JSON.stringify(i,this.options.replacer)}catch(c){return r(c)}return this.callServer(l,function(c,f){s._parseResponse(c,f,r)}),i};ea.prototype._parseResponse=function(t,e,n){if(t){n(t);return}if(!e)return n();let r;try{r=JSON.parse(e,this.options.reviver)}catch(s){return n(s)}if(n.length===3)if(Array.isArray(r)){const s=function(o){return typeof o.error<"u"},i=function(o){return!s(o)};return n(null,r.filter(s),r.filter(i))}else return n(null,r.error,r.result);n(null,r)};const oA=ra(iA);var Vv={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(l,c,f){this.fn=l,this.context=c,this.once=f||!1}function i(l,c,f,v,w){if(typeof f!="function")throw new TypeError("The listener must be a function");var g=new s(f,v||l,w),_=n?n+c:c;return l._events[_]?l._events[_].fn?l._events[_]=[l._events[_],g]:l._events[_].push(g):(l._events[_]=g,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],f,v;if(this._eventsCount===0)return c;for(v in f=this._events)e.call(f,v)&&c.push(n?v.slice(1):v);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(f)):c},a.prototype.listeners=function(c){var f=n?n+c:c,v=this._events[f];if(!v)return[];if(v.fn)return[v.fn];for(var w=0,g=v.length,_=new Array(g);w<g;w++)_[w]=v[w].fn;return _},a.prototype.listenerCount=function(c){var f=n?n+c:c,v=this._events[f];return v?v.fn?1:v.length:0},a.prototype.emit=function(c,f,v,w,g,_){var E=n?n+c:c;if(!this._events[E])return!1;var C=this._events[E],b=arguments.length,S,x;if(C.fn){switch(C.once&&this.removeListener(c,C.fn,void 0,!0),b){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,f),!0;case 3:return C.fn.call(C.context,f,v),!0;case 4:return C.fn.call(C.context,f,v,w),!0;case 5:return C.fn.call(C.context,f,v,w,g),!0;case 6:return C.fn.call(C.context,f,v,w,g,_),!0}for(x=1,S=new Array(b-1);x<b;x++)S[x-1]=arguments[x];C.fn.apply(C.context,S)}else{var O=C.length,L;for(x=0;x<O;x++)switch(C[x].once&&this.removeListener(c,C[x].fn,void 0,!0),b){case 1:C[x].fn.call(C[x].context);break;case 2:C[x].fn.call(C[x].context,f);break;case 3:C[x].fn.call(C[x].context,f,v);break;case 4:C[x].fn.call(C[x].context,f,v,w);break;default:if(!S)for(L=1,S=new Array(b-1);L<b;L++)S[L-1]=arguments[L];C[x].fn.apply(C[x].context,S)}}return!0},a.prototype.on=function(c,f,v){return i(this,c,f,v,!1)},a.prototype.once=function(c,f,v){return i(this,c,f,v,!0)},a.prototype.removeListener=function(c,f,v,w){var g=n?n+c:c;if(!this._events[g])return this;if(!f)return o(this,g),this;var _=this._events[g];if(_.fn)_.fn===f&&(!w||_.once)&&(!v||_.context===v)&&o(this,g);else{for(var E=0,C=[],b=_.length;E<b;E++)(_[E].fn!==f||w&&!_[E].once||v&&_[E].context!==v)&&C.push(_[E]);C.length?this._events[g]=C.length===1?C[0]:C:o(this,g)}return this},a.prototype.removeAllListeners=function(c){var f;return c?(f=n?n+c:c,this._events[f]&&o(this,f)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(Vv);var aA=Vv.exports;const Hv=ra(aA);var lA=class extends Hv{constructor(e,n){super();At(this,"socket");this.socket=new window.WebSocket(e,n.protocols),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=r=>this.emit("message",r.data),this.socket.onerror=r=>this.emit("error",r),this.socket.onclose=r=>{this.emit("close",r.code,r.reason)}}send(e,n,r){const s=r||n;try{this.socket.send(e),s()}catch(i){s(i)}}close(e,n){this.socket.close(e,n)}addEventListener(e,n,r){this.socket.addEventListener(e,n,r)}};function cA(t,e){return new lA(t,e)}var uA=class{encode(t){return JSON.stringify(t)}decode(t){return JSON.parse(t)}},dA=class extends Hv{constructor(e,n="ws://localhost:8080",{autoconnect:r=!0,reconnect:s=!0,reconnect_interval:i=1e3,max_reconnects:o=5,...a}={},l,c){super();At(this,"address");At(this,"rpc_id");At(this,"queue");At(this,"options");At(this,"autoconnect");At(this,"ready");At(this,"reconnect");At(this,"reconnect_timer_id");At(this,"reconnect_interval");At(this,"max_reconnects");At(this,"rest_options");At(this,"current_reconnects");At(this,"generate_request_id");At(this,"socket");At(this,"webSocketFactory");At(this,"dataPack");this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=n,this.autoconnect=r,this.ready=!1,this.reconnect=s,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=l||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),c?this.dataPack=c:this.dataPack=new uA,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,n,r,s){return!s&&typeof r=="object"&&(s=r,r=null),new Promise((i,o)=>{if(!this.ready)return o(new Error("socket not ready"));const a=this.generate_request_id(e,n),l={jsonrpc:"2.0",method:e,params:n||void 0,id:a};this.socket.send(this.dataPack.encode(l),s,c=>{if(c)return o(c);this.queue[a]={promise:[i,o]},r&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(new Error("reply timeout"))},r))})})}async login(e){const n=await this.call("rpc.login",e);if(!n)throw new Error("authentication failed");return n}async listMethods(){return await this.call("__listMethods")}notify(e,n){return new Promise((r,s)=>{if(!this.ready)return s(new Error("socket not ready"));const i={jsonrpc:"2.0",method:e,params:n};this.socket.send(this.dataPack.encode(i),o=>{if(o)return s(o);r()})})}async subscribe(e){typeof e=="string"&&(e=[e]);const n=await this.call("rpc.on",e);if(typeof e=="string"&&n[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+n[e]);return n}async unsubscribe(e){typeof e=="string"&&(e=[e]);const n=await this.call("rpc.off",e);if(typeof e=="string"&&n[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+n);return n}close(e,n){this.socket&&this.socket.close(e||1e3,n)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return this.reconnect_timer_id!==void 0}willReconnect(){return this.reconnect&&(this.max_reconnects===0||this.current_reconnects<this.max_reconnects)}_connect(e,n){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,n),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=_e.Buffer.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const s=[r.notification];if(r.params.constructor===Object)s.push(r.params);else for(let i=0;i<r.params.length;i++)s.push(r.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,s)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r==null?void 0:r.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:s})=>{this.ready&&setTimeout(()=>this.emit("close",r,s),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)?this.reconnect_timer_id=setTimeout(()=>this._connect(e,n),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",r,s),1))})}};class Kv extends Uw{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Mw(e);const r=xf(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Hi(i)}update(e){return zl(this),this.iHash.update(e),this}digestInto(e){zl(this),Hs(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Gv=(t,e,n)=>new Kv(t,e).update(n).digest();Gv.create=(t,e)=>new Kv(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Q0=(t,e)=>(t+(t>=0?e:-e)/Jv)/e;function hA(t,e,n){const[[r,s],[i,o]]=e,a=Q0(o*t,n),l=Q0(-s*t,n);let c=t-a*r-l*i,f=-a*s-l*o;const v=c<Br,w=f<Br;v&&(c=-c),w&&(f=-f);const g=da(Math.ceil(Vw(n)/2))+Mi;if(c<Br||c>=g||f<Br||f>=g)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:v,k1:c,k2neg:w,k2:f}}function dh(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function Hu(t,e){const n={};for(let r of Object.keys(e))n[r]=t[r]===void 0?e[r]:t[r];return qs(n.lowS,"lowS"),qs(n.prehash,"prehash"),n.format!==void 0&&dh(n.format),n}class fA extends Error{constructor(e=""){super(e)}}const Ar={Err:fA,_tlv:{encode:(t,e)=>{const{Err:n}=Ar;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Ja(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Ja(s.length/2|128):"";return Ja(t)+i+s+e},decode(t,e){const{Err:n}=Ar;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const l=s&127;if(!l)throw new n("tlv.decode(long): indefinite length not supported");if(l>4)throw new n("tlv.decode(long): byte length is too big");const c=e.subarray(r,r+l);if(c.length!==l)throw new n("tlv.decode: length bytes not complete");if(c[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const f of c)o=o<<8|f;if(r+=l,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Ar;if(t<Br)throw new e("integer: negative integers are not allowed");let n=Ja(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Ar;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return xc(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Ar,s=it("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l}=r.decode(2,i),{v:c,l:f}=r.decode(2,l);if(f.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(c)}},hexFromSig(t){const{_tlv:e,_int:n}=Ar,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},Br=BigInt(0),Mi=BigInt(1),Jv=BigInt(2),Xa=BigInt(3),pA=BigInt(4);function Ai(t,e){const{BYTES:n}=t;let r;if(typeof e=="bigint")r=e;else{let s=it("private key",e);try{r=t.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof e}`)}}if(!t.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function gA(t,e={}){const n=av("weierstrass",t,e),{Fp:r,Fn:s}=n;let i=n.CURVE;const{h:o,n:a}=i;ha(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:l}=e;if(l&&(!r.is0(i.a)||typeof l.beta!="bigint"||!Array.isArray(l.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const c=Zv(r,s);function f(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function v(te,T,u){const{x:m,y:k}=T.toAffine(),B=r.toBytes(m);if(qs(u,"isCompressed"),u){f();const I=!r.isOdd(k);return pr(Yv(I),B)}else return pr(Uint8Array.of(4),B,r.toBytes(k))}function w(te){nr(te,void 0,"Point");const{publicKey:T,publicKeyUncompressed:u}=c,m=te.length,k=te[0],B=te.subarray(1);if(m===T&&(k===2||k===3)){const I=r.fromBytes(B);if(!r.isValid(I))throw new Error("bad point: is not on curve, wrong x");const P=E(I);let N;try{N=r.sqrt(P)}catch(M){const ee=M instanceof Error?": "+M.message:"";throw new Error("bad point: is not on curve, sqrt error"+ee)}f();const R=r.isOdd(N);return(k&1)===1!==R&&(N=r.neg(N)),{x:I,y:N}}else if(m===u&&k===4){const I=r.BYTES,P=r.fromBytes(B.subarray(0,I)),N=r.fromBytes(B.subarray(I,I*2));if(!C(P,N))throw new Error("bad point: is not on curve");return{x:P,y:N}}else throw new Error(`bad point: got length ${m}, expected compressed=${T} or uncompressed=${u}`)}const g=e.toBytes||v,_=e.fromBytes||w;function E(te){const T=r.sqr(te),u=r.mul(T,te);return r.add(r.add(u,r.mul(te,i.a)),i.b)}function C(te,T){const u=r.sqr(T),m=E(te);return r.eql(u,m)}if(!C(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const b=r.mul(r.pow(i.a,Xa),pA),S=r.mul(r.sqr(i.b),BigInt(27));if(r.is0(r.add(b,S)))throw new Error("bad curve params: a or b");function x(te,T,u=!1){if(!r.isValid(T)||u&&r.is0(T))throw new Error(`bad point coordinate ${te}`);return T}function O(te){if(!(te instanceof F))throw new Error("ProjectivePoint expected")}function L(te){if(!l||!l.basises)throw new Error("no endo");return hA(te,l.basises,s.ORDER)}const D=Wl((te,T)=>{const{X:u,Y:m,Z:k}=te;if(r.eql(k,r.ONE))return{x:u,y:m};const B=te.is0();T==null&&(T=B?r.ONE:r.inv(k));const I=r.mul(u,T),P=r.mul(m,T),N=r.mul(k,T);if(B)return{x:r.ZERO,y:r.ZERO};if(!r.eql(N,r.ONE))throw new Error("invZ was invalid");return{x:I,y:P}}),W=Wl(te=>{if(te.is0()){if(e.allowInfinityPoint&&!r.is0(te.Y))return;throw new Error("bad point: ZERO")}const{x:T,y:u}=te.toAffine();if(!r.isValid(T)||!r.isValid(u))throw new Error("bad point: x or y not field elements");if(!C(T,u))throw new Error("bad point: equation left != right");if(!te.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function q(te,T,u,m,k){return u=new F(r.mul(u.X,te),u.Y,u.Z),T=Vl(m,T),u=Vl(k,u),T.add(u)}class F{constructor(T,u,m){this.X=x("x",T),this.Y=x("y",u,!0),this.Z=x("z",m),Object.freeze(this)}static CURVE(){return i}static fromAffine(T){const{x:u,y:m}=T||{};if(!T||!r.isValid(u)||!r.isValid(m))throw new Error("invalid affine point");if(T instanceof F)throw new Error("projective point not allowed");return r.is0(u)&&r.is0(m)?F.ZERO:new F(u,m,r.ONE)}static fromBytes(T){const u=F.fromAffine(_(nr(T,void 0,"point")));return u.assertValidity(),u}static fromHex(T){return F.fromBytes(it("pointHex",T))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(T=8,u=!0){return Y.createCache(this,T),u||this.multiply(Xa),this}assertValidity(){W(this)}hasEvenY(){const{y:T}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(T)}equals(T){O(T);const{X:u,Y:m,Z:k}=this,{X:B,Y:I,Z:P}=T,N=r.eql(r.mul(u,P),r.mul(B,k)),R=r.eql(r.mul(m,P),r.mul(I,k));return N&&R}negate(){return new F(this.X,r.neg(this.Y),this.Z)}double(){const{a:T,b:u}=i,m=r.mul(u,Xa),{X:k,Y:B,Z:I}=this;let P=r.ZERO,N=r.ZERO,R=r.ZERO,h=r.mul(k,k),M=r.mul(B,B),ee=r.mul(I,I),X=r.mul(k,B);return X=r.add(X,X),R=r.mul(k,I),R=r.add(R,R),P=r.mul(T,R),N=r.mul(m,ee),N=r.add(P,N),P=r.sub(M,N),N=r.add(M,N),N=r.mul(P,N),P=r.mul(X,P),R=r.mul(m,R),ee=r.mul(T,ee),X=r.sub(h,ee),X=r.mul(T,X),X=r.add(X,R),R=r.add(h,h),h=r.add(R,h),h=r.add(h,ee),h=r.mul(h,X),N=r.add(N,h),ee=r.mul(B,I),ee=r.add(ee,ee),h=r.mul(ee,X),P=r.sub(P,h),R=r.mul(ee,M),R=r.add(R,R),R=r.add(R,R),new F(P,N,R)}add(T){O(T);const{X:u,Y:m,Z:k}=this,{X:B,Y:I,Z:P}=T;let N=r.ZERO,R=r.ZERO,h=r.ZERO;const M=i.a,ee=r.mul(i.b,Xa);let X=r.mul(u,B),re=r.mul(m,I),ve=r.mul(k,P),ye=r.add(u,m),pe=r.add(B,I);ye=r.mul(ye,pe),pe=r.add(X,re),ye=r.sub(ye,pe),pe=r.add(u,k);let Qe=r.add(B,P);return pe=r.mul(pe,Qe),Qe=r.add(X,ve),pe=r.sub(pe,Qe),Qe=r.add(m,k),N=r.add(I,P),Qe=r.mul(Qe,N),N=r.add(re,ve),Qe=r.sub(Qe,N),h=r.mul(M,pe),N=r.mul(ee,ve),h=r.add(N,h),N=r.sub(re,h),h=r.add(re,h),R=r.mul(N,h),re=r.add(X,X),re=r.add(re,X),ve=r.mul(M,ve),pe=r.mul(ee,pe),re=r.add(re,ve),ve=r.sub(X,ve),ve=r.mul(M,ve),pe=r.add(pe,ve),X=r.mul(re,pe),R=r.add(R,X),X=r.mul(Qe,pe),N=r.mul(ye,N),N=r.sub(N,X),X=r.mul(ye,re),h=r.mul(Qe,h),h=r.add(h,X),new F(N,R,h)}subtract(T){return this.add(T.negate())}is0(){return this.equals(F.ZERO)}multiply(T){const{endo:u}=e;if(!s.isValidNot0(T))throw new Error("invalid scalar: out of range");let m,k;const B=I=>Y.cached(this,I,P=>Ns(F,P));if(u){const{k1neg:I,k1:P,k2neg:N,k2:R}=L(T),{p:h,f:M}=B(P),{p:ee,f:X}=B(R);k=M.add(X),m=q(u.beta,h,ee,I,N)}else{const{p:I,f:P}=B(T);m=I,k=P}return Ns(F,[m,k])[0]}multiplyUnsafe(T){const{endo:u}=e,m=this;if(!s.isValid(T))throw new Error("invalid scalar: out of range");if(T===Br||m.is0())return F.ZERO;if(T===Mi)return m;if(Y.hasCache(this))return this.multiply(T);if(u){const{k1neg:k,k1:B,k2neg:I,k2:P}=L(T),{p1:N,p2:R}=yk(F,m,B,P);return q(u.beta,N,R,k,I)}else return Y.unsafe(m,T)}multiplyAndAddUnsafe(T,u,m){const k=this.multiplyUnsafe(u).add(T.multiplyUnsafe(m));return k.is0()?void 0:k}toAffine(T){return D(this,T)}isTorsionFree(){const{isTorsionFree:T}=e;return o===Mi?!0:T?T(F,this):Y.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:T}=e;return o===Mi?this:T?T(F,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(T=!0){return qs(T,"isCompressed"),this.assertValidity(),g(F,this,T)}toHex(T=!0){return Ms(this.toBytes(T))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(T=!0){return this.toBytes(T)}_setWindowSize(T){this.precompute(T)}static normalizeZ(T){return Ns(F,T)}static msm(T,u){return ov(F,s,T,u)}static fromPrivateKey(T){return F.BASE.multiply(Ai(s,T))}}F.BASE=new F(i.Gx,i.Gy,r.ONE),F.ZERO=new F(r.ZERO,r.ONE,r.ZERO),F.Fp=r,F.Fn=s;const K=s.BITS,Y=new iv(F,e.endo?Math.ceil(K/2):K);return F.BASE.precompute(8),F}function Yv(t){return Uint8Array.of(t?2:3)}function Zv(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function mA(t,e={}){const{Fn:n}=t,r=e.randomBytes||Sf,s=Object.assign(Zv(t.Fp,n),{seed:nv(n.ORDER)});function i(g){try{return!!Ai(n,g)}catch{return!1}}function o(g,_){const{publicKey:E,publicKeyUncompressed:C}=s;try{const b=g.length;return _===!0&&b!==E||_===!1&&b!==C?!1:!!t.fromBytes(g)}catch{return!1}}function a(g=r(s.seed)){return pk(nr(g,s.seed,"seed"),n.ORDER)}function l(g,_=!0){return t.BASE.multiply(Ai(n,g)).toBytes(_)}function c(g){const _=a(g);return{secretKey:_,publicKey:l(_)}}function f(g){if(typeof g=="bigint")return!1;if(g instanceof t)return!0;const{secretKey:_,publicKey:E,publicKeyUncompressed:C}=s;if(n.allowedLengths||_===E)return;const b=it("key",g).length;return b===E||b===C}function v(g,_,E=!0){if(f(g)===!0)throw new Error("first arg must be private key");if(f(_)===!1)throw new Error("second arg must be public key");const C=Ai(n,g);return t.fromHex(_).multiply(C).toBytes(E)}return Object.freeze({getPublicKey:l,getSharedSecret:v,keygen:c,Point:t,utils:{isValidSecretKey:i,isValidPublicKey:o,randomSecretKey:a,isValidPrivateKey:i,randomPrivateKey:a,normPrivateKeyToScalar:g=>Ai(n,g),precompute(g=8,_=t.BASE){return _.precompute(g,!1)}},lengths:s})}function yA(t,e,n={}){Mw(e),ha(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=n.randomBytes||Sf,s=n.hmac||((u,...m)=>Gv(e,u,pr(...m))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:l}=o,{keygen:c,getPublicKey:f,getSharedSecret:v,utils:w,lengths:g}=mA(t,n),_={prehash:!1,lowS:typeof n.lowS=="boolean"?n.lowS:!1,format:void 0,extraEntropy:!1},E="compact";function C(u){const m=a>>Mi;return u>m}function b(u,m){if(!o.isValidNot0(m))throw new Error(`invalid signature ${u}: out of range 1..Point.Fn.ORDER`);return m}function S(u,m){dh(m);const k=g.signature,B=m==="compact"?k:m==="recovered"?k+1:void 0;return nr(u,B,`${m} signature`)}class x{constructor(m,k,B){this.r=b("r",m),this.s=b("s",k),B!=null&&(this.recovery=B),Object.freeze(this)}static fromBytes(m,k=E){S(m,k);let B;if(k==="der"){const{r:R,s:h}=Ar.toSig(nr(m));return new x(R,h)}k==="recovered"&&(B=m[0],k="compact",m=m.subarray(1));const I=o.BYTES,P=m.subarray(0,I),N=m.subarray(I,I*2);return new x(o.fromBytes(P),o.fromBytes(N),B)}static fromHex(m,k){return this.fromBytes(ql(m),k)}addRecoveryBit(m){return new x(this.r,this.s,m)}recoverPublicKey(m){const k=i.ORDER,{r:B,s:I,recovery:P}=this;if(P==null||![0,1,2,3].includes(P))throw new Error("recovery id invalid");if(a*Jv<k&&P>1)throw new Error("recovery id is ambiguous for h>1 curve");const R=P===2||P===3?B+a:B;if(!i.isValid(R))throw new Error("recovery id 2 or 3 invalid");const h=i.toBytes(R),M=t.fromBytes(pr(Yv((P&1)===0),h)),ee=o.inv(R),X=L(it("msgHash",m)),re=o.create(-X*ee),ve=o.create(I*ee),ye=t.BASE.multiplyUnsafe(re).add(M.multiplyUnsafe(ve));if(ye.is0())throw new Error("point at infinify");return ye.assertValidity(),ye}hasHighS(){return C(this.s)}toBytes(m=E){if(dh(m),m==="der")return ql(Ar.hexFromSig(this));const k=o.toBytes(this.r),B=o.toBytes(this.s);if(m==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return pr(Uint8Array.of(this.recovery),k,B)}return pr(k,B)}toHex(m){return Ms(this.toBytes(m))}assertValidity(){}static fromCompact(m){return x.fromBytes(it("sig",m),"compact")}static fromDER(m){return x.fromBytes(it("sig",m),"der")}normalizeS(){return this.hasHighS()?new x(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Ms(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Ms(this.toBytes("compact"))}}const O=n.bits2int||function(m){if(m.length>8192)throw new Error("input is too large");const k=xc(m),B=m.length*8-l;return B>0?k>>BigInt(B):k},L=n.bits2int_modN||function(m){return o.create(O(m))},D=da(l);function W(u){return lh("num < 2^"+l,u,Br,D),o.toBytes(u)}function q(u,m){return nr(u,void 0,"message"),m?nr(e(u),void 0,"prehashed message"):u}function F(u,m,k){if(["recovered","canonical"].some(re=>re in k))throw new Error("sign() legacy options not supported");const{lowS:B,prehash:I,extraEntropy:P}=Hu(k,_);u=q(u,I);const N=L(u),R=Ai(o,m),h=[W(R),W(N)];if(P!=null&&P!==!1){const re=P===!0?r(g.secretKey):P;h.push(it("extraEntropy",re))}const M=pr(...h),ee=N;function X(re){const ve=O(re);if(!o.isValidNot0(ve))return;const ye=o.inv(ve),pe=t.BASE.multiply(ve).toAffine(),Qe=o.create(pe.x);if(Qe===Br)return;const je=o.create(ye*o.create(ee+Qe*R));if(je===Br)return;let Ne=(pe.x===Qe?0:2)|Number(pe.y&Mi),Tn=je;return B&&C(je)&&(Tn=o.neg(je),Ne^=1),new x(Qe,Tn,Ne)}return{seed:M,k2sig:X}}function K(u,m,k={}){u=it("message",u);const{seed:B,k2sig:I}=F(u,m,k);return sk(e.outputLen,o.BYTES,s)(B,I)}function Y(u){let m;const k=typeof u=="string"||ua(u),B=!k&&u!==null&&typeof u=="object"&&typeof u.r=="bigint"&&typeof u.s=="bigint";if(!k&&!B)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(B)m=new x(u.r,u.s);else if(k){try{m=x.fromBytes(it("sig",u),"der")}catch(I){if(!(I instanceof Ar.Err))throw I}if(!m)try{m=x.fromBytes(it("sig",u),"compact")}catch{return!1}}return m||!1}function te(u,m,k,B={}){const{lowS:I,prehash:P,format:N}=Hu(B,_);if(k=it("publicKey",k),m=q(it("message",m),P),"strict"in B)throw new Error("options.strict was renamed to lowS");const R=N===void 0?Y(u):x.fromBytes(it("sig",u),N);if(R===!1)return!1;try{const h=t.fromBytes(k);if(I&&R.hasHighS())return!1;const{r:M,s:ee}=R,X=L(m),re=o.inv(ee),ve=o.create(X*re),ye=o.create(M*re),pe=t.BASE.multiplyUnsafe(ve).add(h.multiplyUnsafe(ye));return pe.is0()?!1:o.create(pe.x)===M}catch{return!1}}function T(u,m,k={}){const{prehash:B}=Hu(k,_);return m=q(m,B),x.fromBytes(u,"recovered").recoverPublicKey(m).toBytes()}return Object.freeze({keygen:c,getPublicKey:f,getSharedSecret:v,utils:w,lengths:g,Point:t,sign:K,verify:te,recoverPublicKey:T,Signature:x,hash:e})}function wA(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp;let r=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const s=Ks(e.n,{BITS:t.nBitLength,allowedLengths:r,modFromBytes:t.wrapPrivateKey}),i={Fp:n,Fn:s,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:i}}function vA(t){const{CURVE:e,curveOpts:n}=wA(t),r={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,hash:t.hash,ecdsaOpts:r}}function bA(t,e){const n=e.Point;return Object.assign({},e,{ProjectivePoint:n,CURVE:Object.assign({},t,ev(n.Fn.ORDER,n.Fn.BITS))})}function _A(t){const{CURVE:e,curveOpts:n,hash:r,ecdsaOpts:s}=vA(t),i=gA(e,n),o=yA(i,r,s);return bA(t,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function xA(t,e){const n=r=>_A({...t,hash:r});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $f={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},SA={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},eg=BigInt(2);function EA(t){const e=$f.p,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),c=t*t*t%e,f=c*c*t%e,v=st(f,n,e)*f%e,w=st(v,n,e)*f%e,g=st(w,eg,e)*c%e,_=st(g,s,e)*g%e,E=st(_,i,e)*_%e,C=st(E,a,e)*E%e,b=st(C,l,e)*C%e,S=st(b,a,e)*E%e,x=st(S,n,e)*f%e,O=st(x,o,e)*_%e,L=st(O,r,e)*c%e,D=st(L,eg,e);if(!hh.eql(hh.sqr(D),t))throw new Error("Cannot find square root");return D}const hh=Ks($f.p,{sqrt:EA}),kA=xA({...$f,Fp:hh,lowS:!0,endo:SA},zw);fa.utils.randomPrivateKey;fa.getPublicKey;function tg(t){try{return fa.ExtendedPoint.fromHex(t),!0}catch{return!1}}const AA=(t,e)=>fa.sign(t,e.slice(0,32)),RA=fa.verify,$t=t=>_e.Buffer.isBuffer(t)?t:t instanceof Uint8Array?_e.Buffer.from(t.buffer,t.byteOffset,t.byteLength):_e.Buffer.from(t);class CA{constructor(e){Object.assign(this,e)}encode(){return _e.Buffer.from(yv(hl,this))}static decode(e){return wv(hl,this,e)}static decodeUnchecked(e){return hv(hl,this,e)}}const hl=new Map;var Xv;const IA=32,cs=32;function TA(t){return t._bn!==void 0}let ng=1;class ae extends CA{constructor(e){if(super({}),this._bn=void 0,TA(e))this._bn=e._bn;else{if(typeof e=="string"){const n=qt.decode(e);if(n.length!=cs)throw new Error("Invalid public key input");this._bn=new J0(n)}else this._bn=new J0(e);if(this._bn.byteLength()>cs)throw new Error("Invalid public key input")}}static unique(){const e=new ae(ng);return ng+=1,new ae(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return qt.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(_e.Buffer);if(e.length===cs)return e;const n=_e.Buffer.alloc(32);return e.copy(n,32-e.length),n}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,n,r){const s=_e.Buffer.concat([e.toBuffer(),_e.Buffer.from(n),r.toBuffer()]),i=Y0(s);return new ae(i)}static createProgramAddressSync(e,n){let r=_e.Buffer.alloc(0);e.forEach(function(i){if(i.length>IA)throw new TypeError("Max seed length exceeded");r=_e.Buffer.concat([r,$t(i)])}),r=_e.Buffer.concat([r,n.toBuffer(),_e.Buffer.from("ProgramDerivedAddress")]);const s=Y0(r);if(tg(s))throw new Error("Invalid seeds, address must fall off the curve");return new ae(s)}static async createProgramAddress(e,n){return this.createProgramAddressSync(e,n)}static findProgramAddressSync(e,n){let r=255,s;for(;r!=0;){try{const i=e.concat(_e.Buffer.from([r]));s=this.createProgramAddressSync(i,n)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[s,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,n){return this.findProgramAddressSync(e,n)}static isOnCurve(e){const n=new ae(e);return tg(n.toBytes())}}Xv=ae;ae.default=new Xv("11111111111111111111111111111111");hl.set(ae,{kind:"struct",fields:[["_bn","u256"]]});new ae("BPFLoader1111111111111111111111111111111111");const Li=1232,Qv=127,e1=64;class t1 extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(t1.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class n1 extends Error{constructor(e,n){super(`Transaction was not confirmed in ${n.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(n1.prototype,"name",{value:"TransactionExpiredTimeoutError"});class _o extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(_o.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Xl{constructor(e,n){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=n}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const n of this.keySegments()){if(e<n.length)return n[e];e-=n.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((i,o)=>{r.set(i.toBase58(),o)});const s=i=>{const o=r.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const Ee=(t="publicKey")=>We(32,t),Ri=(t="string")=>{const e=le([he("length"),he("lengthPadding"),We(Ls(he(),-8),"chars")],t),n=e.decode.bind(e),r=e.encode.bind(e),s=e;return s.decode=(i,o)=>n(i,o).chars.toString(),s.encode=(i,o,a)=>{const l={chars:_e.Buffer.from(i,"utf8")};return r(l,o,a)},s.alloc=i=>he().span+he().span+_e.Buffer.from(i,"utf8").length,s},BA=(t="authorized")=>le([Ee("staker"),Ee("withdrawer")],t),jA=(t="lockup")=>le([_n("unixTimestamp"),_n("epoch"),Ee("custodian")],t),NA=(t="voteInit")=>le([Ee("nodePubkey"),Ee("authorizedVoter"),Ee("authorizedWithdrawer"),Ae("commission")],t),PA=(t="voteAuthorizeWithSeedArgs")=>le([he("voteAuthorizationType"),Ee("currentAuthorityDerivedKeyOwnerPubkey"),Ri("currentAuthorityDerivedKeySeed"),Ee("newAuthorized")],t);function r1(t,e){const n=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(e[s.property]);if("count"in s&&"elementLayout"in s){const i=e[s.property];if(Array.isArray(i))return i.length*n(s.elementLayout)}else if("fields"in s)return r1({layout:s},e[s.property]);return 0};let r=0;return t.layout.fields.forEach(s=>{r+=n(s)}),r}function Mn(t){let e=0,n=0;for(;;){let r=t.shift();if(e|=(r&127)<<n*7,n+=1,!(r&128))break}return e}function Ln(t,e){let n=e;for(;;){let r=n&127;if(n>>=7,n==0){t.push(r);break}else r|=128,t.push(r)}}function Ct(t,e){if(!t)throw new Error(e||"Assertion failed")}class Ic{constructor(e,n){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=n}static compile(e,n){const r=new Map,s=o=>{const a=o.toBase58();let l=r.get(a);return l===void 0&&(l={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(a,l)),l},i=s(n);i.isSigner=!0,i.isWritable=!0;for(const o of e){s(o.programId).isInvoked=!0;for(const a of o.keys){const l=s(a.pubkey);l.isSigner||(l.isSigner=a.isSigner),l.isWritable||(l.isWritable=a.isWritable)}}return new Ic(n,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Ct(e.length<=256,"Max static account keys length exceeded");const n=e.filter(([,l])=>l.isSigner&&l.isWritable),r=e.filter(([,l])=>l.isSigner&&!l.isWritable),s=e.filter(([,l])=>!l.isSigner&&l.isWritable),i=e.filter(([,l])=>!l.isSigner&&!l.isWritable),o={numRequiredSignatures:n.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{Ct(n.length>0,"Expected at least one writable signer key");const[l]=n[0];Ct(l===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...n.map(([l])=>new ae(l)),...r.map(([l])=>new ae(l)),...s.map(([l])=>new ae(l)),...i.map(([l])=>new ae(l))];return[o,a]}extractTableLookup(e){const[n,r]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(n.length===0&&s.length===0))return[{accountKey:e.key,writableIndexes:n,readonlyIndexes:s},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(e,n){const r=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(n(o)){const a=new ae(i),l=e.findIndex(c=>c.equals(a));l>=0&&(Ct(l<256,"Max lookup table index exceeded"),r.push(l),s.push(a),this.keyMetaMap.delete(i))}return[r,s]}}const s1="Reached end of buffer unexpectedly";function Cr(t){if(t.length===0)throw new Error(s1);return t.shift()}function Un(t,...e){const[n]=e;if(e.length===2?n+(e[1]??0)>t.length:n>=t.length)throw new Error(s1);return t.splice(...e)}class hs{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(n=>new ae(n)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(n=>this.indexToProgramIds.set(n.programIdIndex,this.accountKeys[n.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:qt.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Xl(this.staticAccountKeys)}static compile(e){const n=Ic.compile(e.instructions,e.payerKey),[r,s]=n.getMessageComponents(),o=new Xl(s).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:qt.encode(a.data)}));return new hs({header:r,accountKeys:s,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const r=e-n,i=this.accountKeys.length-n-this.header.numReadonlyUnsignedAccounts;return r<i}else{const r=n-this.header.numReadonlySignedAccounts;return e<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,n)=>!this.isProgramId(n))}serialize(){const e=this.accountKeys.length;let n=[];Ln(n,e);const r=this.instructions.map(v=>{const{accounts:w,programIdIndex:g}=v,_=Array.from(qt.decode(v.data));let E=[];Ln(E,w.length);let C=[];return Ln(C,_.length),{programIdIndex:g,keyIndicesCount:_e.Buffer.from(E),keyIndices:w,dataLength:_e.Buffer.from(C),data:_}});let s=[];Ln(s,r.length);let i=_e.Buffer.alloc(Li);_e.Buffer.from(s).copy(i);let o=s.length;r.forEach(v=>{const g=le([Ae("programIdIndex"),We(v.keyIndicesCount.length,"keyIndicesCount"),on(Ae("keyIndex"),v.keyIndices.length,"keyIndices"),We(v.dataLength.length,"dataLength"),on(Ae("userdatum"),v.data.length,"data")]).encode(v,i,o);o+=g}),i=i.slice(0,o);const a=le([We(1,"numRequiredSignatures"),We(1,"numReadonlySignedAccounts"),We(1,"numReadonlyUnsignedAccounts"),We(n.length,"keyCount"),on(Ee("key"),e,"keys"),Ee("recentBlockhash")]),l={numRequiredSignatures:_e.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:_e.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:_e.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:_e.Buffer.from(n),keys:this.accountKeys.map(v=>$t(v.toBytes())),recentBlockhash:qt.decode(this.recentBlockhash)};let c=_e.Buffer.alloc(2048);const f=a.encode(l,c);return i.copy(c,f),c.slice(0,f+i.length)}static from(e){let n=[...e];const r=Cr(n);if(r!==(r&Qv))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=Cr(n),i=Cr(n),o=Mn(n);let a=[];for(let w=0;w<o;w++){const g=Un(n,0,cs);a.push(new ae(_e.Buffer.from(g)))}const l=Un(n,0,cs),c=Mn(n);let f=[];for(let w=0;w<c;w++){const g=Cr(n),_=Mn(n),E=Un(n,0,_),C=Mn(n),b=Un(n,0,C),S=qt.encode(_e.Buffer.from(b));f.push({programIdIndex:g,accounts:E,data:S})}const v={header:{numRequiredSignatures:r,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:qt.encode(_e.Buffer.from(l)),accountKeys:a,instructions:f};return new hs(v)}}class Ql{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const n of this.addressTableLookups)e+=n.readonlyIndexes.length+n.writableIndexes.length;return e}getAccountKeys(e){let n;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");n=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)n=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Xl(this.staticAccountKeys,n)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r){const s=e-r,i=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return s<i}else if(e>=this.header.numRequiredSignatures){const s=e-n,o=r-n-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=n-this.header.numReadonlySignedAccounts;return e<s}}resolveAddressTableLookups(e){const n={writable:[],readonly:[]};for(const r of this.addressTableLookups){const s=e.find(i=>i.key.equals(r.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const i of r.writableIndexes)if(i<s.state.addresses.length)n.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(const i of r.readonlyIndexes)if(i<s.state.addresses.length)n.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return n}static compile(e){const n=Ic.compile(e.instructions,e.payerKey),r=new Array,s={writable:new Array,readonly:new Array},i=e.addressLookupTableAccounts||[];for(const f of i){const v=n.extractTableLookup(f);if(v!==void 0){const[w,{writable:g,readonly:_}]=v;r.push(w),s.writable.push(...g),s.readonly.push(..._)}}const[o,a]=n.getMessageComponents(),c=new Xl(a,s).compileInstructions(e.instructions);return new Ql({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:c,addressTableLookups:r})}serialize(){const e=Array();Ln(e,this.staticAccountKeys.length);const n=this.serializeInstructions(),r=Array();Ln(r,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();Ln(i,this.addressTableLookups.length);const o=le([Ae("prefix"),le([Ae("numRequiredSignatures"),Ae("numReadonlySignedAccounts"),Ae("numReadonlyUnsignedAccounts")],"header"),We(e.length,"staticAccountKeysLength"),on(Ee(),this.staticAccountKeys.length,"staticAccountKeys"),Ee("recentBlockhash"),We(r.length,"instructionsLength"),We(n.length,"serializedInstructions"),We(i.length,"addressTableLookupsLength"),We(s.length,"serializedAddressTableLookups")]),a=new Uint8Array(Li),c=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(f=>f.toBytes()),recentBlockhash:qt.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:n,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},a);return a.slice(0,c)}serializeInstructions(){let e=0;const n=new Uint8Array(Li);for(const r of this.compiledInstructions){const s=Array();Ln(s,r.accountKeyIndexes.length);const i=Array();Ln(i,r.data.length);const o=le([Ae("programIdIndex"),We(s.length,"encodedAccountKeyIndexesLength"),on(Ae(),r.accountKeyIndexes.length,"accountKeyIndexes"),We(i.length,"encodedDataLength"),We(r.data.length,"data")]);e+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},n,e)}return n.slice(0,e)}serializeAddressTableLookups(){let e=0;const n=new Uint8Array(Li);for(const r of this.addressTableLookups){const s=Array();Ln(s,r.writableIndexes.length);const i=Array();Ln(i,r.readonlyIndexes.length);const o=le([Ee("accountKey"),We(s.length,"encodedWritableIndexesLength"),on(Ae(),r.writableIndexes.length,"writableIndexes"),We(i.length,"encodedReadonlyIndexesLength"),on(Ae(),r.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},n,e)}return n.slice(0,e)}static deserialize(e){let n=[...e];const r=Cr(n),s=r&Qv;Ct(r!==s,"Expected versioned message but received legacy message");const i=s;Ct(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:Cr(n),numReadonlySignedAccounts:Cr(n),numReadonlyUnsignedAccounts:Cr(n)},a=[],l=Mn(n);for(let _=0;_<l;_++)a.push(new ae(Un(n,0,cs)));const c=qt.encode(Un(n,0,cs)),f=Mn(n),v=[];for(let _=0;_<f;_++){const E=Cr(n),C=Mn(n),b=Un(n,0,C),S=Mn(n),x=new Uint8Array(Un(n,0,S));v.push({programIdIndex:E,accountKeyIndexes:b,data:x})}const w=Mn(n),g=[];for(let _=0;_<w;_++){const E=new ae(Un(n,0,cs)),C=Mn(n),b=Un(n,0,C),S=Mn(n),x=Un(n,0,S);g.push({accountKey:E,writableIndexes:b,readonlyIndexes:x})}return new Ql({header:o,staticAccountKeys:a,recentBlockhash:c,compiledInstructions:v,addressTableLookups:g})}}let Vr=function(t){return t[t.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",t[t.PROCESSED=1]="PROCESSED",t[t.TIMED_OUT=2]="TIMED_OUT",t[t.NONCE_INVALID=3]="NONCE_INVALID",t}({});const OA=_e.Buffer.alloc(e1).fill(0);class Pn{constructor(e){this.keys=void 0,this.programId=void 0,this.data=_e.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:n,isWritable:r})=>({pubkey:e.toJSON(),isSigner:n,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class $n{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:n,nonceInfo:r}=e;this.minNonceContextSlot=n,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:n,lastValidBlockHeight:r}=e;this.recentBlockhash=n,this.lastValidBlockHeight=r}else{const{recentBlockhash:n,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=n}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(n=>{"instructions"in n?this.instructions=this.instructions.concat(n.instructions):"data"in n&&"programId"in n&&"keys"in n?this.instructions.push(n):this.instructions.push(new Pn(n))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,n;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?n=[this.nonceInfo.nonceInstruction,...this.instructions]:n=this.instructions):(e=this.recentBlockhash,n=this.instructions),!e)throw new Error("Transaction recentBlockhash required");n.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let E=0;E<n.length;E++)if(n[E].programId===void 0)throw new Error(`Transaction instruction index ${E} has undefined program id`);const s=[],i=[];n.forEach(E=>{E.keys.forEach(b=>{i.push({...b})});const C=E.programId.toString();s.includes(C)||s.push(C)}),s.forEach(E=>{i.push({pubkey:new ae(E),isSigner:!1,isWritable:!1})});const o=[];i.forEach(E=>{const C=E.pubkey.toString(),b=o.findIndex(S=>S.pubkey.toString()===C);b>-1?(o[b].isWritable=o[b].isWritable||E.isWritable,o[b].isSigner=o[b].isSigner||E.isSigner):o.push(E)}),o.sort(function(E,C){if(E.isSigner!==C.isSigner)return E.isSigner?-1:1;if(E.isWritable!==C.isWritable)return E.isWritable?-1:1;const b={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return E.pubkey.toBase58().localeCompare(C.pubkey.toBase58(),"en",b)});const a=o.findIndex(E=>E.pubkey.equals(r));if(a>-1){const[E]=o.splice(a,1);E.isSigner=!0,E.isWritable=!0,o.unshift(E)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const E of this.signatures){const C=o.findIndex(b=>b.pubkey.equals(E.publicKey));if(C>-1)o[C].isSigner||(o[C].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${E.publicKey.toString()}`)}let l=0,c=0,f=0;const v=[],w=[];o.forEach(({pubkey:E,isSigner:C,isWritable:b})=>{C?(v.push(E.toString()),l+=1,b||(c+=1)):(w.push(E.toString()),b||(f+=1))});const g=v.concat(w),_=n.map(E=>{const{data:C,programId:b}=E;return{programIdIndex:g.indexOf(b.toString()),accounts:E.keys.map(S=>g.indexOf(S.pubkey.toString())),data:qt.encode(C)}});return _.forEach(E=>{Ct(E.programIdIndex>=0),E.accounts.forEach(C=>Ct(C>=0))}),new hs({header:{numRequiredSignatures:l,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:f},accountKeys:g,recentBlockhash:e,instructions:_})}_compile(){const e=this.compileMessage(),n=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===n.length&&this.signatures.every((s,i)=>n[i].equals(s.publicKey))||(this.signatures=n.map(r=>({signature:null,publicKey:r}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const n=new Set;this.signatures=e.filter(r=>{const s=r.toString();return n.has(s)?!1:(n.add(s),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,r=[];for(const i of e){const o=i.publicKey.toString();n.has(o)||(n.add(o),r.push(i))}this.signatures=r.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...r)}partialSign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,r=[];for(const i of e){const o=i.publicKey.toString();n.has(o)||(n.add(o),r.push(i))}const s=this._compile();this._partialSign(s,...r)}_partialSign(e,...n){const r=e.serialize();n.forEach(s=>{const i=AA(r,s.secretKey);this._addSignature(s.publicKey,$t(i))})}addSignature(e,n){this._compile(),this._addSignature(e,n)}_addSignature(e,n){Ct(n.length===64);const r=this.signatures.findIndex(s=>e.equals(s.publicKey));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=_e.Buffer.from(n)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,n){const r={};for(const{signature:s,publicKey:i}of this.signatures)s===null?n&&(r.missing||(r.missing=[])).push(i):RA(s,e,i.toBytes())||(r.invalid||(r.invalid=[])).push(i);return r.invalid||r.missing?r:void 0}serialize(e){const{requireAllSignatures:n,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),s=this.serializeMessage();if(r){const i=this._getMessageSignednessErrors(s,n);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(e){const{signatures:n}=this,r=[];Ln(r,n.length);const s=r.length+n.length*64+e.length,i=_e.Buffer.alloc(s);return Ct(n.length<256),_e.Buffer.from(r).copy(i,0),n.forEach(({signature:o},a)=>{o!==null&&(Ct(o.length===64,"signature has invalid length"),_e.Buffer.from(o).copy(i,r.length+a*64))}),e.copy(i,r.length+n.length*64),Ct(i.length<=Li,`Transaction too large: ${i.length} > ${Li}`),i}get keys(){return Ct(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return Ct(this.instructions.length===1),this.instructions[0].programId}get data(){return Ct(this.instructions.length===1),this.instructions[0].data}static from(e){let n=[...e];const r=Mn(n);let s=[];for(let i=0;i<r;i++){const o=Un(n,0,e1);s.push(qt.encode(_e.Buffer.from(o)))}return $n.populate(hs.from(n),s)}static populate(e,n=[]){const r=new $n;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),n.forEach((s,i)=>{const o={signature:s==qt.encode(OA)?null:qt.decode(s),publicKey:e.accountKeys[i]};r.signatures.push(o)}),e.instructions.forEach(s=>{const i=s.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:r.signatures.some(l=>l.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});r.instructions.push(new Pn({keys:i,programId:e.accountKeys[s.programIdIndex],data:qt.decode(s.data)}))}),r._message=e,r._json=r.toJSON(),r}}const MA=160,LA=64,UA=MA/LA,DA=1e3/UA;new ae("SysvarC1ock11111111111111111111111111111111");new ae("SysvarEpochSchedu1e111111111111111111111111");new ae("Sysvar1nstructions1111111111111111111111111");const Ku=new ae("SysvarRecentB1ockHashes11111111111111111111"),rg=new ae("SysvarRent111111111111111111111111111111111");new ae("SysvarRewards111111111111111111111111111111");new ae("SysvarS1otHashes111111111111111111111111111");new ae("SysvarS1otHistory11111111111111111111111111");new ae("SysvarStakeHistory1111111111111111111111111");class sg extends Error{constructor({action:e,signature:n,transactionMessage:r,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(e){case"send":a=`Transaction ${n} resulted in an error. 
${r}. `+i+o;break;case"simulate":a=`Simulation failed. 
Message: ${r}. 
`+i+o;break;default:a=`Unknown action '${(l=>l)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=n,this.transactionMessage=r,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((n,r)=>{e.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,n(i)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}class ue extends Error{constructor({code:e,message:n,data:r},s){super(s!=null?`${s}: ${n}`:n),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}function fi(t){return new Promise(e=>setTimeout(e,t))}function Bn(t,e){const n=t.layout.span>=0?t.layout.span:r1(t,e),r=_e.Buffer.alloc(n),s=Object.assign({instruction:t.index},e);return t.layout.encode(s,r),r}const FA=Dt("lamportsPerSignature"),i1=le([he("version"),he("state"),Ee("authorizedPubkey"),Ee("nonce"),le([FA],"feeCalculator")]),ig=i1.span;class zf{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const n=i1.decode($t(e),0);return new zf({authorizedPubkey:new ae(n.authorizedPubkey),nonce:new ae(n.nonce).toString(),feeCalculator:n.feeCalculator})}}function Ji(t){const e=We(8,t),n=e.decode.bind(e),r=e.encode.bind(e),s=e,i=A2();return s.decode=(o,a)=>{const l=n(o,a);return i.decode(l)},s.encode=(o,a,l)=>{const c=i.encode(o);return r(c,a,l)},s}const jn=Object.freeze({Create:{index:0,layout:le([he("instruction"),_n("lamports"),_n("space"),Ee("programId")])},Assign:{index:1,layout:le([he("instruction"),Ee("programId")])},Transfer:{index:2,layout:le([he("instruction"),Ji("lamports")])},CreateWithSeed:{index:3,layout:le([he("instruction"),Ee("base"),Ri("seed"),_n("lamports"),_n("space"),Ee("programId")])},AdvanceNonceAccount:{index:4,layout:le([he("instruction")])},WithdrawNonceAccount:{index:5,layout:le([he("instruction"),_n("lamports")])},InitializeNonceAccount:{index:6,layout:le([he("instruction"),Ee("authorized")])},AuthorizeNonceAccount:{index:7,layout:le([he("instruction"),Ee("authorized")])},Allocate:{index:8,layout:le([he("instruction"),_n("space")])},AllocateWithSeed:{index:9,layout:le([he("instruction"),Ee("base"),Ri("seed"),_n("space"),Ee("programId")])},AssignWithSeed:{index:10,layout:le([he("instruction"),Ee("base"),Ri("seed"),Ee("programId")])},TransferWithSeed:{index:11,layout:le([he("instruction"),Ji("lamports"),Ri("seed"),Ee("programId")])},UpgradeNonceAccount:{index:12,layout:le([he("instruction")])}});class ta{constructor(){}static createAccount(e){const n=jn.Create,r=Bn(n,{lamports:e.lamports,space:e.space,programId:$t(e.programId.toBuffer())});return new Pn({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(e){let n,r;if("basePubkey"in e){const s=jn.TransferWithSeed;n=Bn(s,{lamports:BigInt(e.lamports),seed:e.seed,programId:$t(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=jn.Transfer;n=Bn(s,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new Pn({keys:r,programId:this.programId,data:n})}static assign(e){let n,r;if("basePubkey"in e){const s=jn.AssignWithSeed;n=Bn(s,{base:$t(e.basePubkey.toBuffer()),seed:e.seed,programId:$t(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=jn.Assign;n=Bn(s,{programId:$t(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Pn({keys:r,programId:this.programId,data:n})}static createAccountWithSeed(e){const n=jn.CreateWithSeed,r=Bn(n,{base:$t(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:$t(e.programId.toBuffer())});let s=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||s.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new Pn({keys:s,programId:this.programId,data:r})}static createNonceAccount(e){const n=new $n;"basePubkey"in e&&"seed"in e?n.add(ta.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:ig,programId:this.programId})):n.add(ta.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:ig,programId:this.programId}));const r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return n.add(this.nonceInitialize(r)),n}static nonceInitialize(e){const n=jn.InitializeNonceAccount,r=Bn(n,{authorized:$t(e.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Ku,isSigner:!1,isWritable:!1},{pubkey:rg,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new Pn(s)}static nonceAdvance(e){const n=jn.AdvanceNonceAccount,r=Bn(n),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Ku,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new Pn(s)}static nonceWithdraw(e){const n=jn.WithdrawNonceAccount,r=Bn(n,{lamports:e.lamports});return new Pn({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Ku,isSigner:!1,isWritable:!1},{pubkey:rg,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(e){const n=jn.AuthorizeNonceAccount,r=Bn(n,{authorized:$t(e.newAuthorizedPubkey.toBuffer())});return new Pn({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(e){let n,r;if("basePubkey"in e){const s=jn.AllocateWithSeed;n=Bn(s,{base:$t(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:$t(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=jn.Allocate;n=Bn(s,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Pn({keys:r,programId:this.programId,data:n})}}ta.programId=new ae("11111111111111111111111111111111");new ae("BPFLoader2111111111111111111111111111111111");function $A(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Gu,og;function zA(){if(og)return Gu;og=1;var t=Object.prototype.toString,e=Object.keys||function(r){var s=[];for(var i in r)s.push(i);return s};function n(r,s){var i,o,a,l,c,f,v;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return n(r.toJSON(),s);if(v=t.call(r),v==="[object Array]"){for(a="[",o=r.length-1,i=0;i<o;i++)a+=n(r[i],!0)+",";return o>-1&&(a+=n(r[i],!0)),a+"]"}else if(v==="[object Object]"){for(l=e(r).sort(),o=l.length,a="",i=0;i<o;)c=l[i],f=n(r[c],!1),f!==void 0&&(a&&(a+=","),a+=JSON.stringify(c)+":"+f),i++;return"{"+a+"}"}else return JSON.stringify(r);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return Gu=function(r){var s=n(r,!1);if(s!==void 0)return""+s},Gu}var qA=zA(),ag=$A(qA);const go=32;function Ju(t){let e=0;for(;t>1;)t/=2,e++;return e}function WA(t){return t===0?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t|=t>>32,t+1)}class VA{constructor(e,n,r,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=n,this.warmup=r,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const n=Ju(WA(e+go+1))-Ju(go)-1,r=this.getSlotsInEpoch(n),s=e-(r-go);return[n,s]}else{const n=e-this.firstNormalSlot,r=Math.floor(n/this.slotsPerEpoch),s=this.firstNormalEpoch+r,i=n%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*go:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+Ju(go)):this.slotsPerEpoch}}var HA=globalThis.fetch;class KA extends dA{constructor(e,n,r){const s=i=>{const o=cA(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...n});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,e,n,r),this.underlyingSocket=void 0}call(...e){var r;const n=(r=this.underlyingSocket)==null?void 0:r.readyState;return n===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}notify(...e){var r;const n=(r=this.underlyingSocket)==null?void 0:r.readyState;return n===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}}function GA(t,e){let n;try{n=t.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(n.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${n.typeIndex} != ${t.index}`);return n}const lg=56;class cg{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const n=GA(JA,e),r=e.length-lg;Ct(r>=0,"lookup table is invalid"),Ct(r%32===0,"lookup table is invalid");const s=r/32,{addresses:i}=le([on(Ee(),s,"addresses")]).decode(e.slice(lg));return{deactivationSlot:n.deactivationSlot,lastExtendedSlot:n.lastExtendedSlot,lastExtendedSlotStartIndex:n.lastExtendedStartIndex,authority:n.authority.length!==0?new ae(n.authority[0]):void 0,addresses:i.map(o=>new ae(o))}}}const JA={index:1,layout:le([he("typeIndex"),Ji("deactivationSlot"),Dt("lastExtendedSlot"),Ae("lastExtendedStartIndex"),Ae(),on(Ee(),Ls(Ae(),-1),"authority")])},YA=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function ZA(t){const e=t.match(YA);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${t}\``);const[n,r,s,i]=e,o=t.startsWith("https:")?"wss:":"ws:",a=s==null?null:parseInt(s.slice(1),10),l=a==null?"":`:${a+1}`;return`${o}//${r}${l}${i}`}const Xe=ma(Df(ae),Q(),t=>new ae(t)),o1=Ff([Q(),Je("base64")]),qf=ma(Df(_e.Buffer),o1,t=>_e.Buffer.from(t[0],"base64")),XA=30*1e3;function QA(t){if(/^https?:/.test(t)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}function Oe(t){let e,n;if(typeof t=="string")e=t;else if(t){const{commitment:r,...s}=t;e=r,n=s}return{commitment:e,config:n}}function ug(t){return t.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function a1(t){return ln([J({jsonrpc:Je("2.0"),id:Q(),result:t}),J({jsonrpc:Je("2.0"),id:Q(),error:J({code:so(),message:Q(),data:fe(N2())})})])}const eR=a1(so());function Se(t){return ma(a1(t),eR,e=>"error"in e?e:{...e,result:ne(e.result,t)})}function at(t){return Se(J({context:J({slot:z()}),value:t}))}function Tc(t){return J({context:J({slot:z()}),value:t})}function Yu(t,e){return t===0?new Ql({header:e.header,staticAccountKeys:e.accountKeys.map(n=>new ae(n)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(n=>({programIdIndex:n.programIdIndex,accountKeyIndexes:n.accounts,data:qt.decode(n.data)})),addressTableLookups:e.addressTableLookups}):new hs(e)}const tR=J({foundation:z(),foundationTerm:z(),initial:z(),taper:z(),terminal:z()}),nR=Se(se(ie(J({epoch:z(),effectiveSlot:z(),amount:z(),postBalance:z(),commission:fe(ie(z()))})))),rR=se(J({slot:z(),prioritizationFee:z()})),sR=J({total:z(),validator:z(),foundation:z(),epoch:z()}),iR=J({epoch:z(),slotIndex:z(),slotsInEpoch:z(),absoluteSlot:z(),blockHeight:fe(z()),transactionCount:fe(z())}),oR=J({slotsPerEpoch:z(),leaderScheduleSlotOffset:z(),warmup:yr(),firstNormalEpoch:z(),firstNormalSlot:z()}),aR=Dv(Q(),se(z())),Ys=ie(ln([J({}),Q()])),lR=J({err:Ys}),cR=Je("receivedSignature"),uR=J({"solana-core":Q(),"feature-set":fe(z())}),dR=J({program:Q(),programId:Xe,parsed:so()}),hR=J({programId:Xe,accounts:se(Xe),data:Q()}),dg=at(J({err:ie(ln([J({}),Q()])),logs:ie(se(Q())),accounts:fe(ie(se(ie(J({executable:yr(),owner:Q(),lamports:z(),data:se(Q()),rentEpoch:fe(z())}))))),unitsConsumed:fe(z()),returnData:fe(ie(J({programId:Q(),data:Ff([Q(),Je("base64")])}))),innerInstructions:fe(ie(se(J({index:z(),instructions:se(ln([dR,hR]))}))))})),fR=at(J({byIdentity:Dv(Q(),se(z())),range:J({firstSlot:z(),lastSlot:z()})}));function pR(t,e,n,r,s,i){const o=n||HA;let a;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let l;return r&&(l=async(f,v)=>{const w=await new Promise((g,_)=>{try{r(f,v,(E,C)=>g([E,C]))}catch(E){_(E)}});return await o(...w)}),new oA(async(f,v)=>{const w={method:"POST",body:f,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},pC)};try{let g=5,_,E=500;for(;l?_=await l(t,w):_=await o(t,w),!(_.status!==429||s===!0||(g-=1,g===0));)console.error(`Server responded with ${_.status} ${_.statusText}.  Retrying after ${E}ms delay...`),await fi(E),E*=2;const C=await _.text();_.ok?v(null,C):v(new Error(`${_.status} ${_.statusText}: ${C}`))}catch(g){g instanceof Error&&v(g)}},{})}function gR(t){return(e,n)=>new Promise((r,s)=>{t.request(e,n,(i,o)=>{if(i){s(i);return}r(o)})})}function mR(t){return e=>new Promise((n,r)=>{e.length===0&&n([]);const s=e.map(i=>t.request(i.methodName,i.args));t.request(s,(i,o)=>{if(i){r(i);return}n(o)})})}const yR=Se(tR),wR=Se(sR),vR=Se(rR),bR=Se(iR),_R=Se(oR),xR=Se(aR),SR=Se(z()),ER=at(J({total:z(),circulating:z(),nonCirculating:z(),nonCirculatingAccounts:se(Xe)})),fh=J({amount:Q(),uiAmount:ie(z()),decimals:z(),uiAmountString:fe(Q())}),kR=at(se(J({address:Xe,amount:Q(),uiAmount:ie(z()),decimals:z(),uiAmountString:fe(Q())}))),AR=at(se(J({pubkey:Xe,account:J({executable:yr(),owner:Xe,lamports:z(),data:qf,rentEpoch:z()})}))),ph=J({program:Q(),parsed:so(),space:z()}),RR=at(se(J({pubkey:Xe,account:J({executable:yr(),owner:Xe,lamports:z(),data:ph,rentEpoch:z()})}))),CR=at(se(J({lamports:z(),address:Xe}))),na=J({executable:yr(),owner:Xe,lamports:z(),data:qf,rentEpoch:z()}),IR=J({pubkey:Xe,account:na}),TR=ma(ln([Df(_e.Buffer),ph]),ln([o1,ph]),t=>Array.isArray(t)?ne(t,qf):t),gh=J({executable:yr(),owner:Xe,lamports:z(),data:TR,rentEpoch:z()}),BR=J({pubkey:Xe,account:gh}),jR=J({state:ln([Je("active"),Je("inactive"),Je("activating"),Je("deactivating")]),active:z(),inactive:z()}),NR=Se(se(J({signature:Q(),slot:z(),err:Ys,memo:ie(Q()),blockTime:fe(ie(z()))}))),PR=Se(se(J({signature:Q(),slot:z(),err:Ys,memo:ie(Q()),blockTime:fe(ie(z()))}))),OR=J({subscription:z(),result:Tc(na)}),MR=J({pubkey:Xe,account:na}),LR=J({subscription:z(),result:Tc(MR)}),UR=J({parent:z(),slot:z(),root:z()}),DR=J({subscription:z(),result:UR}),FR=ln([J({type:ln([Je("firstShredReceived"),Je("completed"),Je("optimisticConfirmation"),Je("root")]),slot:z(),timestamp:z()}),J({type:Je("createdBank"),parent:z(),slot:z(),timestamp:z()}),J({type:Je("frozen"),slot:z(),timestamp:z(),stats:J({numTransactionEntries:z(),numSuccessfulTransactions:z(),numFailedTransactions:z(),maxTransactionsPerEntry:z()})}),J({type:Je("dead"),slot:z(),timestamp:z(),err:Q()})]),$R=J({subscription:z(),result:FR}),zR=J({subscription:z(),result:Tc(ln([lR,cR]))}),qR=J({subscription:z(),result:z()}),WR=J({pubkey:Q(),gossip:ie(Q()),tpu:ie(Q()),rpc:ie(Q()),version:ie(Q())}),hg=J({votePubkey:Q(),nodePubkey:Q(),activatedStake:z(),epochVoteAccount:yr(),epochCredits:se(Ff([z(),z(),z()])),commission:z(),lastVote:z(),rootSlot:ie(z())}),VR=Se(J({current:se(hg),delinquent:se(hg)})),HR=ln([Je("processed"),Je("confirmed"),Je("finalized")]),KR=J({slot:z(),confirmations:ie(z()),err:Ys,confirmationStatus:fe(HR)}),GR=at(se(ie(KR))),JR=Se(z()),l1=J({accountKey:Xe,writableIndexes:se(z()),readonlyIndexes:se(z())}),Wf=J({signatures:se(Q()),message:J({accountKeys:se(Q()),header:J({numRequiredSignatures:z(),numReadonlySignedAccounts:z(),numReadonlyUnsignedAccounts:z()}),instructions:se(J({accounts:se(z()),data:Q(),programIdIndex:z()})),recentBlockhash:Q(),addressTableLookups:fe(se(l1))})}),c1=J({pubkey:Xe,signer:yr(),writable:yr(),source:fe(ln([Je("transaction"),Je("lookupTable")]))}),u1=J({accountKeys:se(c1),signatures:se(Q())}),d1=J({parsed:so(),program:Q(),programId:Xe}),h1=J({accounts:se(Xe),data:Q(),programId:Xe}),YR=ln([h1,d1]),ZR=ln([J({parsed:so(),program:Q(),programId:Q()}),J({accounts:se(Q()),data:Q(),programId:Q()})]),f1=ma(YR,ZR,t=>"accounts"in t?ne(t,h1):ne(t,d1)),p1=J({signatures:se(Q()),message:J({accountKeys:se(c1),instructions:se(f1),recentBlockhash:Q(),addressTableLookups:fe(ie(se(l1)))})}),ec=J({accountIndex:z(),mint:Q(),owner:fe(Q()),programId:fe(Q()),uiTokenAmount:fh}),g1=J({writable:se(Xe),readonly:se(Xe)}),Bc=J({err:Ys,fee:z(),innerInstructions:fe(ie(se(J({index:z(),instructions:se(J({accounts:se(z()),data:Q(),programIdIndex:z()}))})))),preBalances:se(z()),postBalances:se(z()),logMessages:fe(ie(se(Q()))),preTokenBalances:fe(ie(se(ec))),postTokenBalances:fe(ie(se(ec))),loadedAddresses:fe(g1),computeUnitsConsumed:fe(z()),costUnits:fe(z())}),Vf=J({err:Ys,fee:z(),innerInstructions:fe(ie(se(J({index:z(),instructions:se(f1)})))),preBalances:se(z()),postBalances:se(z()),logMessages:fe(ie(se(Q()))),preTokenBalances:fe(ie(se(ec))),postTokenBalances:fe(ie(se(ec))),loadedAddresses:fe(g1),computeUnitsConsumed:fe(z()),costUnits:fe(z())}),io=ln([Je(0),Je("legacy")]),Zs=J({pubkey:Q(),lamports:z(),postBalance:ie(z()),rewardType:ie(Q()),commission:fe(ie(z()))}),XR=Se(ie(J({blockhash:Q(),previousBlockhash:Q(),parentSlot:z(),transactions:se(J({transaction:Wf,meta:ie(Bc),version:fe(io)})),rewards:fe(se(Zs)),blockTime:ie(z()),blockHeight:ie(z())}))),QR=Se(ie(J({blockhash:Q(),previousBlockhash:Q(),parentSlot:z(),rewards:fe(se(Zs)),blockTime:ie(z()),blockHeight:ie(z())}))),eC=Se(ie(J({blockhash:Q(),previousBlockhash:Q(),parentSlot:z(),transactions:se(J({transaction:u1,meta:ie(Bc),version:fe(io)})),rewards:fe(se(Zs)),blockTime:ie(z()),blockHeight:ie(z())}))),tC=Se(ie(J({blockhash:Q(),previousBlockhash:Q(),parentSlot:z(),transactions:se(J({transaction:p1,meta:ie(Vf),version:fe(io)})),rewards:fe(se(Zs)),blockTime:ie(z()),blockHeight:ie(z())}))),nC=Se(ie(J({blockhash:Q(),previousBlockhash:Q(),parentSlot:z(),transactions:se(J({transaction:u1,meta:ie(Vf),version:fe(io)})),rewards:fe(se(Zs)),blockTime:ie(z()),blockHeight:ie(z())}))),rC=Se(ie(J({blockhash:Q(),previousBlockhash:Q(),parentSlot:z(),rewards:fe(se(Zs)),blockTime:ie(z()),blockHeight:ie(z())}))),sC=Se(ie(J({blockhash:Q(),previousBlockhash:Q(),parentSlot:z(),transactions:se(J({transaction:Wf,meta:ie(Bc)})),rewards:fe(se(Zs)),blockTime:ie(z())}))),fg=Se(ie(J({blockhash:Q(),previousBlockhash:Q(),parentSlot:z(),signatures:se(Q()),blockTime:ie(z())}))),Zu=Se(ie(J({slot:z(),meta:ie(Bc),blockTime:fe(ie(z())),transaction:Wf,version:fe(io)}))),Qa=Se(ie(J({slot:z(),transaction:p1,meta:ie(Vf),blockTime:fe(ie(z())),version:fe(io)}))),iC=at(J({blockhash:Q(),lastValidBlockHeight:z()})),oC=at(yr()),aC=J({slot:z(),numTransactions:z(),numSlots:z(),samplePeriodSecs:z()}),lC=Se(se(aC)),cC=at(ie(J({feeCalculator:J({lamportsPerSignature:z()})}))),uC=Se(Q()),dC=Se(Q()),hC=J({err:Ys,logs:se(Q()),signature:Q()}),fC=J({result:Tc(hC),subscription:z()}),pC={"solana-client":"js/1.0.0-maintenance"};class gC{constructor(e,n){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const c={};return async f=>{const{commitment:v,config:w}=Oe(f),g=this._buildArgs([],v,void 0,w),_=ag(g);return c[_]=c[_]??(async()=>{try{const E=await this._rpcRequest("getBlockHeight",g),C=ne(E,Se(z()));if("error"in C)throw new ue(C.error,"failed to get block height information");return C.result}finally{delete c[_]}})(),await c[_]}})();let r,s,i,o,a,l;n&&typeof n=="string"?this._commitment=n:n&&(this._commitment=n.commitment,this._confirmTransactionInitialTimeout=n.confirmTransactionInitialTimeout,r=n.wsEndpoint,s=n.httpHeaders,i=n.fetch,o=n.fetchMiddleware,a=n.disableRetryOnRateLimit,l=n.httpAgent),this._rpcEndpoint=QA(e),this._rpcWsEndpoint=r||ZA(e),this._rpcClient=pR(e,s,i,o,a,l),this._rpcRequest=gR(this._rpcClient),this._rpcBatchRequest=mR(this._rpcClient),this._rpcWebSocket=new KA(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,n){const{commitment:r,config:s}=Oe(n),i=this._buildArgs([e.toBase58()],r,void 0,s),o=await this._rpcRequest("getBalance",i),a=ne(o,at(z()));if("error"in a)throw new ue(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,n){return await this.getBalanceAndContext(e,n).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+r)})}async getBlockTime(e){const n=await this._rpcRequest("getBlockTime",[e]),r=ne(n,Se(ie(z())));if("error"in r)throw new ue(r.error,`failed to get block time for slot ${e}`);return r.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),n=ne(e,Se(z()));if("error"in n)throw new ue(n.error,"failed to get minimum ledger slot");return n.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),n=ne(e,SR);if("error"in n)throw new ue(n.error,"failed to get first available block");return n.result}async getSupply(e){let n={};typeof e=="string"?n={commitment:e}:e?n={...e,commitment:e&&e.commitment||this.commitment}:n={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[n]),s=ne(r,ER);if("error"in s)throw new ue(s.error,"failed to get supply");return s.result}async getTokenSupply(e,n){const r=this._buildArgs([e.toBase58()],n),s=await this._rpcRequest("getTokenSupply",r),i=ne(s,at(fh));if("error"in i)throw new ue(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(e,n){const r=this._buildArgs([e.toBase58()],n),s=await this._rpcRequest("getTokenAccountBalance",r),i=ne(s,at(fh));if("error"in i)throw new ue(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(e,n,r){const{commitment:s,config:i}=Oe(r);let o=[e.toBase58()];"mint"in n?o.push({mint:n.mint.toBase58()}):o.push({programId:n.programId.toBase58()});const a=this._buildArgs(o,s,"base64",i),l=await this._rpcRequest("getTokenAccountsByOwner",a),c=ne(l,AR);if("error"in c)throw new ue(c.error,`failed to get token accounts owned by account ${e.toBase58()}`);return c.result}async getParsedTokenAccountsByOwner(e,n,r){let s=[e.toBase58()];"mint"in n?s.push({mint:n.mint.toBase58()}):s.push({programId:n.programId.toBase58()});const i=this._buildArgs(s,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),a=ne(o,RR);if("error"in a)throw new ue(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const n={...e,commitment:e&&e.commitment||this.commitment},r=n.filter||n.commitment?[n]:[],s=await this._rpcRequest("getLargestAccounts",r),i=ne(s,CR);if("error"in i)throw new ue(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(e,n){const r=this._buildArgs([e.toBase58()],n),s=await this._rpcRequest("getTokenLargestAccounts",r),i=ne(s,kR);if("error"in i)throw new ue(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(e,n){const{commitment:r,config:s}=Oe(n),i=this._buildArgs([e.toBase58()],r,"base64",s),o=await this._rpcRequest("getAccountInfo",i),a=ne(o,at(ie(na)));if("error"in a)throw new ue(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,n){const{commitment:r,config:s}=Oe(n),i=this._buildArgs([e.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),a=ne(o,at(ie(gh)));if("error"in a)throw new ue(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,n){try{return(await this.getAccountInfoAndContext(e,n)).value}catch(r){throw new Error("failed to get info about account "+e.toBase58()+": "+r)}}async getMultipleParsedAccounts(e,n){const{commitment:r,config:s}=Oe(n),i=e.map(c=>c.toBase58()),o=this._buildArgs([i],r,"jsonParsed",s),a=await this._rpcRequest("getMultipleAccounts",o),l=ne(a,at(se(ie(gh))));if("error"in l)throw new ue(l.error,`failed to get info for accounts ${i}`);return l.result}async getMultipleAccountsInfoAndContext(e,n){const{commitment:r,config:s}=Oe(n),i=e.map(c=>c.toBase58()),o=this._buildArgs([i],r,"base64",s),a=await this._rpcRequest("getMultipleAccounts",o),l=ne(a,at(se(ie(na))));if("error"in l)throw new ue(l.error,`failed to get info for accounts ${i}`);return l.result}async getMultipleAccountsInfo(e,n){return(await this.getMultipleAccountsInfoAndContext(e,n)).value}async getStakeActivation(e,n,r){const{commitment:s,config:i}=Oe(n),o=this._buildArgs([e.toBase58()],s,void 0,{...i,epoch:r??(i==null?void 0:i.epoch)}),a=await this._rpcRequest("getStakeActivation",o),l=ne(a,Se(jR));if("error"in l)throw new ue(l.error,`failed to get Stake Activation ${e.toBase58()}`);return l.result}async getProgramAccounts(e,n){const{commitment:r,config:s}=Oe(n),{encoding:i,...o}=s||{},a=this._buildArgs([e.toBase58()],r,i||"base64",{...o,...o.filters?{filters:ug(o.filters)}:null}),l=await this._rpcRequest("getProgramAccounts",a),c=se(IR),f=o.withContext===!0?ne(l,at(c)):ne(l,Se(c));if("error"in f)throw new ue(f.error,`failed to get accounts owned by program ${e.toBase58()}`);return f.result}async getParsedProgramAccounts(e,n){const{commitment:r,config:s}=Oe(n),i=this._buildArgs([e.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),a=ne(o,Se(se(BR)));if("error"in a)throw new ue(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,n){var i;let r;if(typeof e=="string")r=e;else{const o=e;if((i=o.abortSignal)!=null&&i.aborted)return Promise.reject(o.abortSignal.reason);r=o.signature}let s;try{s=qt.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return Ct(s.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:n||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:n||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:n||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((n,r)=>{e!=null&&(e.aborted?r(e.reason):e.addEventListener("abort",()=>{r(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:n}){let r,s,i=!1;const o=new Promise((l,c)=>{try{r=this.onSignature(n,(v,w)=>{r=void 0;const g={context:w,value:v};l({__type:Vr.PROCESSED,response:g})},e);const f=new Promise(v=>{r==null?v():s=this._onSubscriptionStateChange(r,w=>{w==="subscribed"&&v()})});(async()=>{if(await f,i)return;const v=await this.getSignatureStatus(n);if(i||v==null)return;const{context:w,value:g}=v;if(g!=null)if(g!=null&&g.err)c(g.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(g.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(g.confirmationStatus==="processed"||g.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,l({__type:Vr.PROCESSED,response:{context:w,value:g}})}})()}catch(f){c(f)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:n,lastValidBlockHeight:r,signature:s}}){let i=!1;const o=new Promise(v=>{const w=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let g=await w();if(!i){for(;g<=r;)if(await fi(1e3),i||(g=await w(),i))return;v({__type:Vr.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:l}=this.getTransactionConfirmationPromise({commitment:e,signature:s}),c=this.getCancellationPromise(n);let f;try{const v=await Promise.race([c,l,o]);if(v.__type===Vr.PROCESSED)f=v.response;else throw new t1(s)}finally{i=!0,a()}return f}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:n,minContextSlot:r,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let a=!1;const l=new Promise(g=>{let _=i,E=null;const C=async()=>{try{const{context:b,value:S}=await this.getNonceAndContext(s,{commitment:e,minContextSlot:r});return E=b.slot,S==null?void 0:S.nonce}catch{return _}};(async()=>{if(_=await C(),!a)for(;;){if(i!==_){g({__type:Vr.NONCE_INVALID,slotInWhichNonceDidAdvance:E});return}if(await fi(2e3),a||(_=await C(),a))return}})()}),{abortConfirmation:c,confirmationPromise:f}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),v=this.getCancellationPromise(n);let w;try{const g=await Promise.race([v,f,l]);if(g.__type===Vr.PROCESSED)w=g.response;else{let _;for(;;){const E=await this.getSignatureStatus(o);if(E==null)break;if(E.context.slot<(g.slotInWhichNonceDidAdvance??r)){await fi(400);continue}_=E;break}if(_!=null&&_.value){const E=e||"finalized",{confirmationStatus:C}=_.value;switch(E){case"processed":case"recent":if(C!=="processed"&&C!=="confirmed"&&C!=="finalized")throw new _o(o);break;case"confirmed":case"single":case"singleGossip":if(C!=="confirmed"&&C!=="finalized")throw new _o(o);break;case"finalized":case"max":case"root":if(C!=="finalized")throw new _o(o);break;default:}w={context:_.context,value:{err:_.value.err}}}else throw new _o(o)}}finally{a=!0,c()}return w}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:n}){let r;const s=new Promise(l=>{let c=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{c=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>l({__type:Vr.TIMED_OUT,timeoutMs:c}),c)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:n});let a;try{const l=await Promise.race([o,s]);if(l.__type===Vr.PROCESSED)a=l.response;else throw new n1(n,l.timeoutMs/1e3)}finally{clearTimeout(r),i()}return a}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),n=ne(e,Se(se(WR)));if("error"in n)throw new ue(n.error,"failed to get cluster nodes");return n.result}async getVoteAccounts(e){const n=this._buildArgs([],e),r=await this._rpcRequest("getVoteAccounts",n),s=ne(r,VR);if("error"in s)throw new ue(s.error,"failed to get vote accounts");return s.result}async getSlot(e){const{commitment:n,config:r}=Oe(e),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getSlot",s),o=ne(i,Se(z()));if("error"in o)throw new ue(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:n,config:r}=Oe(e),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getSlotLeader",s),o=ne(i,Se(Q()));if("error"in o)throw new ue(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,n){const r=[e,n],s=await this._rpcRequest("getSlotLeaders",r),i=ne(s,Se(se(Xe)));if("error"in i)throw new ue(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(e,n){const{context:r,value:s}=await this.getSignatureStatuses([e],n);Ct(s.length===1);const i=s[0];return{context:r,value:i}}async getSignatureStatuses(e,n){const r=[e];n&&r.push(n);const s=await this._rpcRequest("getSignatureStatuses",r),i=ne(s,GR);if("error"in i)throw new ue(i.error,"failed to get signature status");return i.result}async getTransactionCount(e){const{commitment:n,config:r}=Oe(e),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getTransactionCount",s),o=ne(i,Se(z()));if("error"in o)throw new ue(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const n=this._buildArgs([],e),r=await this._rpcRequest("getInflationGovernor",n),s=ne(r,yR);if("error"in s)throw new ue(s.error,"failed to get inflation");return s.result}async getInflationReward(e,n,r){const{commitment:s,config:i}=Oe(r),o=this._buildArgs([e.map(c=>c.toBase58())],s,void 0,{...i,epoch:n??(i==null?void 0:i.epoch)}),a=await this._rpcRequest("getInflationReward",o),l=ne(a,nR);if("error"in l)throw new ue(l.error,"failed to get inflation reward");return l.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),n=ne(e,wR);if("error"in n)throw new ue(n.error,"failed to get inflation rate");return n.result}async getEpochInfo(e){const{commitment:n,config:r}=Oe(e),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getEpochInfo",s),o=ne(i,bR);if("error"in o)throw new ue(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),n=ne(e,_R);if("error"in n)throw new ue(n.error,"failed to get epoch schedule");const r=n.result;return new VA(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),n=ne(e,xR);if("error"in n)throw new ue(n.error,"failed to get leader schedule");return n.result}async getMinimumBalanceForRentExemption(e,n){const r=this._buildArgs([e],n),s=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=ne(s,JR);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(e){const{context:n,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(e);return{context:n,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const n=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),r=ne(n,lC);if("error"in r)throw new ue(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(e,n){const r=this._buildArgs([e],n),s=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=ne(s,cC);if("error"in i)throw new ue(i.error,"failed to get fee calculator");const{context:o,value:a}=i.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,n){const r=$t(e.serialize()).toString("base64"),s=this._buildArgs([r],n),i=await this._rpcRequest("getFeeForMessage",s),o=ne(i,at(ie(z())));if("error"in o)throw new ue(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){var o;const n=(o=e==null?void 0:e.lockedWritableAccounts)==null?void 0:o.map(a=>a.toBase58()),r=n!=null&&n.length?[n]:[],s=await this._rpcRequest("getRecentPrioritizationFees",r),i=ne(s,vR);if("error"in i)throw new ue(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhashAndContext(e){const{commitment:n,config:r}=Oe(e),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getLatestBlockhash",s),o=ne(i,iC);if("error"in o)throw new ue(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,n){const{commitment:r,config:s}=Oe(n),i=this._buildArgs([e],r,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),a=ne(o,oC);if("error"in a)throw new ue(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),n=ne(e,Se(uR));if("error"in n)throw new ue(n.error,"failed to get version");return n.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),n=ne(e,Se(Q()));if("error"in n)throw new ue(n.error,"failed to get genesis hash");return n.result}async getBlock(e,n){const{commitment:r,config:s}=Oe(n),i=this._buildArgsAtLeastConfirmed([e],r,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const a=ne(o,eC);if("error"in a)throw a.error;return a.result}case"none":{const a=ne(o,QR);if("error"in a)throw a.error;return a.result}default:{const a=ne(o,XR);if("error"in a)throw a.error;const{result:l}=a;return l?{...l,transactions:l.transactions.map(({transaction:c,meta:f,version:v})=>({meta:f,transaction:{...c,message:Yu(v,c.message)},version:v}))}:null}}}catch(a){throw new ue(a,"failed to get confirmed block")}}async getParsedBlock(e,n){const{commitment:r,config:s}=Oe(n),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const a=ne(o,nC);if("error"in a)throw a.error;return a.result}case"none":{const a=ne(o,rC);if("error"in a)throw a.error;return a.result}default:{const a=ne(o,tC);if("error"in a)throw a.error;return a.result}}}catch(a){throw new ue(a,"failed to get block")}}async getBlockProduction(e){let n,r;if(typeof e=="string")r=e;else if(e){const{commitment:a,...l}=e;r=a,n=l}const s=this._buildArgs([],r,"base64",n),i=await this._rpcRequest("getBlockProduction",s),o=ne(i,fR);if("error"in o)throw new ue(o.error,"failed to get block production information");return o.result}async getTransaction(e,n){const{commitment:r,config:s}=Oe(n),i=this._buildArgsAtLeastConfirmed([e],r,void 0,s),o=await this._rpcRequest("getTransaction",i),a=ne(o,Zu);if("error"in a)throw new ue(a.error,"failed to get transaction");const l=a.result;return l&&{...l,transaction:{...l.transaction,message:Yu(l.version,l.transaction.message)}}}async getParsedTransaction(e,n){const{commitment:r,config:s}=Oe(n),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),a=ne(o,Qa);if("error"in a)throw new ue(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,n){const{commitment:r,config:s}=Oe(n),i=e.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],r,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(l=>{const c=ne(l,Qa);if("error"in c)throw new ue(c.error,"failed to get transactions");return c.result})}async getTransactions(e,n){const{commitment:r,config:s}=Oe(n),i=e.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],r,void 0,s)}));return(await this._rpcBatchRequest(i)).map(l=>{const c=ne(l,Zu);if("error"in c)throw new ue(c.error,"failed to get transactions");const f=c.result;return f&&{...f,transaction:{...f.transaction,message:Yu(f.version,f.transaction.message)}}})}async getConfirmedBlock(e,n){const r=this._buildArgsAtLeastConfirmed([e],n),s=await this._rpcRequest("getBlock",r),i=ne(s,sC);if("error"in i)throw new ue(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");const a={...o,transactions:o.transactions.map(({transaction:l,meta:c})=>{const f=new hs(l.message);return{meta:c,transaction:{...l,message:f}}})};return{...a,transactions:a.transactions.map(({transaction:l,meta:c})=>({meta:c,transaction:$n.populate(l.message,l.signatures)}))}}async getBlocks(e,n,r){const s=this._buildArgsAtLeastConfirmed(n!==void 0?[e,n]:[e],r),i=await this._rpcRequest("getBlocks",s),o=ne(i,Se(se(z())));if("error"in o)throw new ue(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=ne(s,fg);if("error"in i)throw new ue(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=ne(s,fg);if("error"in i)throw new ue(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,n){const r=this._buildArgsAtLeastConfirmed([e],n),s=await this._rpcRequest("getTransaction",r),i=ne(s,Zu);if("error"in i)throw new ue(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const a=new hs(o.transaction.message),l=o.transaction.signatures;return{...o,transaction:$n.populate(a,l)}}async getParsedConfirmedTransaction(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed"),s=await this._rpcRequest("getTransaction",r),i=ne(s,Qa);if("error"in i)throw new ue(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(e,n){const r=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],n,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const a=ne(o,Qa);if("error"in a)throw new ue(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,n,r){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(n--,!(n<=0||n<i));)try{const l=await this.getConfirmedBlockSignatures(n,"finalized");l.signatures.length>0&&(s.until=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}let o=await this.getSlot("finalized");for(;!("before"in s)&&(r++,!(r>o));)try{const l=await this.getConfirmedBlockSignatures(r);l.signatures.length>0&&(s.before=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}return(await this.getConfirmedSignaturesForAddress2(e,s)).map(l=>l.signature)}async getConfirmedSignaturesForAddress2(e,n,r){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,n),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=ne(i,NR);if("error"in o)throw new ue(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,n,r){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,n),i=await this._rpcRequest("getSignaturesForAddress",s),o=ne(i,PR);if("error"in o)throw new ue(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,n){const{context:r,value:s}=await this.getAccountInfoAndContext(e,n);let i=null;return s!==null&&(i=new cg({key:e,state:cg.deserialize(s.data)})),{context:r,value:i}}async getNonceAndContext(e,n){const{context:r,value:s}=await this.getAccountInfoAndContext(e,n);let i=null;return s!==null&&(i=zf.fromAccountData(s.data)),{context:r,value:i}}async getNonce(e,n){return await this.getNonceAndContext(e,n).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+r)})}async requestAirdrop(e,n){const r=await this._rpcRequest("requestAirdrop",[e.toBase58(),n]),s=ne(r,uC);if("error"in s)throw new ue(s.error,`airdrop to ${e.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await fi(100);const r=Date.now()-this._blockhashInfo.lastFetch>=XA;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),n=this._blockhashInfo.latestBlockhash,r=n?n.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(r!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await fi(DA/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:n,config:r}=Oe(e),s=this._buildArgs([],n,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=ne(i,at(z()));if("error"in o)throw new ue(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,n,r){if("message"in e){const E=e.serialize(),C=_e.Buffer.from(E).toString("base64");if(Array.isArray(n)||r!==void 0)throw new Error("Invalid arguments");const b=n||{};b.encoding="base64","commitment"in b||(b.commitment=this.commitment),n&&typeof n=="object"&&"innerInstructions"in n&&(b.innerInstructions=n.innerInstructions);const S=[C,b],x=await this._rpcRequest("simulateTransaction",S),O=ne(x,dg);if("error"in O)throw new Error("failed to simulate transaction: "+O.error.message);return O.result}let s;if(e instanceof $n){let _=e;s=new $n,s.feePayer=_.feePayer,s.instructions=e.instructions,s.nonceInfo=_.nonceInfo,s.signatures=_.signatures}else s=$n.populate(e),s._message=s._json=void 0;if(n!==void 0&&!Array.isArray(n))throw new Error("Invalid arguments");const i=n;if(s.nonceInfo&&i)s.sign(...i);else{let _=this._disableBlockhashCaching;for(;;){const E=await this._blockhashWithExpiryBlockHeight(_);if(s.lastValidBlockHeight=E.lastValidBlockHeight,s.recentBlockhash=E.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const C=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(C)&&!this._blockhashInfo.transactionSignatures.includes(C)){this._blockhashInfo.simulatedSignatures.push(C);break}else _=!0}}const o=s._compile(),a=o.serialize(),c=s._serialize(a).toString("base64"),f={encoding:"base64",commitment:this.commitment};if(r){const _=(Array.isArray(r)?r:o.nonProgramIds()).map(E=>E.toBase58());f.accounts={encoding:"base64",addresses:_}}i&&(f.sigVerify=!0),n&&typeof n=="object"&&"innerInstructions"in n&&(f.innerInstructions=n.innerInstructions);const v=[c,f],w=await this._rpcRequest("simulateTransaction",v),g=ne(w,dg);if("error"in g){let _;if("data"in g.error&&(_=g.error.data.logs,_&&Array.isArray(_))){const E=`
    `,C=E+_.join(E);console.error(g.error.message,C)}throw new sg({action:"simulate",signature:"",transactionMessage:g.error.message,logs:_})}return g.result}async sendTransaction(e,n,r){if("version"in e){if(n&&Array.isArray(n))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,n)}if(n===void 0||!Array.isArray(n))throw new Error("Invalid arguments");const s=n;if(e.nonceInfo)e.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...s),!e.signature)throw new Error("!signature");const l=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(l))o=!0;else{this._blockhashInfo.transactionSignatures.push(l);break}}}const i=e.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(e,n){const r=$t(e).toString("base64");return await this.sendEncodedTransaction(r,n)}async sendEncodedTransaction(e,n){const r={encoding:"base64"},s=n&&n.skipPreflight,i=s===!0?"processed":n&&n.preflightCommitment||this.commitment;n&&n.maxRetries!=null&&(r.maxRetries=n.maxRetries),n&&n.minContextSlot!=null&&(r.minContextSlot=n.minContextSlot),s&&(r.skipPreflight=s),i&&(r.preflightCommitment=i);const o=[e,r],a=await this._rpcRequest("sendTransaction",o),l=ne(a,dC);if("error"in l){let c;throw"data"in l.error&&(c=l.error.data.logs),new sg({action:s?"send":"simulate",signature:"",transactionMessage:l.error.message,logs:c})}return l.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([n,r])=>{this._setSubscription(n,{...r,state:"pending"})})}_setSubscription(e,n){var s;const r=(s=this._subscriptionsByHash[e])==null?void 0:s.state;if(this._subscriptionsByHash[e]=n,r!==n.state){const i=this._subscriptionStateChangeCallbacksByHash[e];i&&i.forEach(o=>{try{o(n.state)}catch{}})}}_onSubscriptionStateChange(e,n){var i;const r=this._subscriptionHashByClientSubscriptionId[e];if(r==null)return()=>{};const s=(i=this._subscriptionStateChangeCallbacksByHash)[r]||(i[r]=new Set);return s.add(n),()=>{s.delete(n),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,n=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const s=this._subscriptionsByHash[r];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[r],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(r,{...s,state:"subscribing"});const a=await this._rpcWebSocket.call(o,i);this._setSubscription(r,{...s,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=s.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:a}),!n())return;this._setSubscription(r,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(r,{...s,state:"unsubscribing"}),this._setSubscription(r,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!n())return;this._setSubscription(r,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,n){const r=this._subscriptionCallbacksByServerSubscriptionId[e];r!==void 0&&r.forEach(s=>{try{s(...n)}catch(i){console.error(i)}})}_wsOnAccountNotification(e){const{result:n,subscription:r}=ne(e,OR);this._handleServerNotification(r,[n.value,n.context])}_makeSubscription(e,n){const r=this._nextClientSubscriptionId++,s=ag([e.method,n]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...e,args:n,callbacks:new Set([e.callback]),state:"pending"}:i.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[s];Ct(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,n,r){const{commitment:s,config:i}=Oe(r),o=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:n,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:n,subscription:r}=ne(e,LR);this._handleServerNotification(r,[{accountId:n.value.pubkey,accountInfo:n.value.account},n.context])}onProgramAccountChange(e,n,r,s){const{commitment:i,config:o}=Oe(r),a=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:ug(s)}:void 0));return this._makeSubscription({callback:n,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,n,r){const s=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:n,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:n,subscription:r}=ne(e,fC);this._handleServerNotification(r,[n.value,n.context])}_wsOnSlotNotification(e){const{result:n,subscription:r}=ne(e,DR);this._handleServerNotification(r,[n])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:n,subscription:r}=ne(e,$R);this._handleServerNotification(r,[n])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,n){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${n}' events could not be found.`)}_buildArgs(e,n,r,s){const i=n||this._commitment;if(i||r||s){let o={};r&&(o.encoding=r),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,n,r,s){const i=n||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,n,r,s)}_wsOnSignatureNotification(e){const{result:n,subscription:r}=ne(e,zR);n.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,n.value==="receivedSignature"?[{type:"received"},n.context]:[{type:"status",result:n.value},n.context])}onSignature(e,n,r){const s=this._buildArgs([e],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){n(o.result,a);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(e,n,r){const{commitment:s,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([e],s,void 0,i),a=this._makeSubscription({callback:(l,c)=>{n(l,c);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:n,subscription:r}=ne(e,qR);this._handleServerNotification(r,[n])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:le([he("instruction"),Ji("recentSlot"),Ae("bumpSeed")])},FreezeLookupTable:{index:1,layout:le([he("instruction")])},ExtendLookupTable:{index:2,layout:le([he("instruction"),Ji(),on(Ee(),Ls(he(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:le([he("instruction")])},CloseLookupTable:{index:4,layout:le([he("instruction")])}});new ae("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:le([Ae("instruction"),he("units"),he("additionalFee")])},RequestHeapFrame:{index:1,layout:le([Ae("instruction"),he("bytes")])},SetComputeUnitLimit:{index:2,layout:le([Ae("instruction"),he("units")])},SetComputeUnitPrice:{index:3,layout:le([Ae("instruction"),Ji("microLamports")])}});new ae("ComputeBudget111111111111111111111111111111");le([Ae("numSignatures"),Ae("padding"),On("signatureOffset"),On("signatureInstructionIndex"),On("publicKeyOffset"),On("publicKeyInstructionIndex"),On("messageDataOffset"),On("messageDataSize"),On("messageInstructionIndex")]);new ae("Ed25519SigVerify111111111111111111111111111");kA.utils.isValidPrivateKey;le([Ae("numSignatures"),On("signatureOffset"),Ae("signatureInstructionIndex"),On("ethAddressOffset"),Ae("ethAddressInstructionIndex"),On("messageDataOffset"),On("messageDataSize"),Ae("messageInstructionIndex"),We(20,"ethAddress"),We(64,"signature"),Ae("recoveryId")]);new ae("KeccakSecp256k11111111111111111111111111111");var m1;new ae("StakeConfig11111111111111111111111111111111");class y1{constructor(e,n,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=n,this.custodian=r}}m1=y1;y1.default=new m1(0,0,ae.default);Object.freeze({Initialize:{index:0,layout:le([he("instruction"),BA(),jA()])},Authorize:{index:1,layout:le([he("instruction"),Ee("newAuthorized"),he("stakeAuthorizationType")])},Delegate:{index:2,layout:le([he("instruction")])},Split:{index:3,layout:le([he("instruction"),_n("lamports")])},Withdraw:{index:4,layout:le([he("instruction"),_n("lamports")])},Deactivate:{index:5,layout:le([he("instruction")])},Merge:{index:7,layout:le([he("instruction")])},AuthorizeWithSeed:{index:8,layout:le([he("instruction"),Ee("newAuthorized"),he("stakeAuthorizationType"),Ri("authoritySeed"),Ee("authorityOwner")])}});new ae("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:le([he("instruction"),NA()])},Authorize:{index:1,layout:le([he("instruction"),Ee("newAuthorized"),he("voteAuthorizationType")])},Withdraw:{index:3,layout:le([he("instruction"),_n("lamports")])},UpdateValidatorIdentity:{index:4,layout:le([he("instruction")])},AuthorizeWithSeed:{index:10,layout:le([he("instruction"),PA()])}});new ae("Vote111111111111111111111111111111111111111");new ae("Va1idator1nfo111111111111111111111111111111");J({name:Q(),website:fe(Q()),details:fe(Q()),iconUrl:fe(Q()),keybaseUsername:fe(Q())});new ae("Vote111111111111111111111111111111111111111");le([Ee("nodePubkey"),Ee("authorizedWithdrawer"),Ae("commission"),Dt(),on(le([Dt("slot"),he("confirmationCount")]),Ls(he(),-8),"votes"),Ae("rootSlotValid"),Dt("rootSlot"),Dt(),on(le([Dt("epoch"),Ee("authorizedVoter")]),Ls(he(),-8),"authorizedVoters"),le([on(le([Ee("authorizedPubkey"),Dt("epochOfLastAuthorizedSwitch"),Dt("targetEpoch")]),32,"buf"),Dt("idx"),Ae("isEmpty")],"priorVoters"),Dt(),on(le([Dt("epoch"),Dt("credits"),Dt("prevCredits")]),Ls(he(),-8),"epochCredits"),le([Dt("slot"),Dt("timestamp")],"lastTimestamp")]);const pg=1e9,tc=new ae("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new ae("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb");const mC=new ae("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new ae("So11111111111111111111111111111111111111112");new ae("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");const Hf=t=>{const e=t.decode.bind(t),n=t.encode.bind(t);return{decode:e,encode:n}};var ya={};Object.defineProperty(ya,"__esModule",{value:!0});function yC(t){{const e=Buffer.from(t);e.reverse();const n=e.toString("hex");return n.length===0?BigInt(0):BigInt(`0x${n}`)}}var wC=ya.toBigIntLE=yC;function vC(t){{const e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}ya.toBigIntBE=vC;function bC(t,e){{const n=t.toString(16),r=Buffer.from(n.padStart(e*2,"0").slice(0,e*2),"hex");return r.reverse(),r}}var _C=ya.toBufferLE=bC;function xC(t,e){{const n=t.toString(16);return Buffer.from(n.padStart(e*2,"0").slice(0,e*2),"hex")}}ya.toBufferBE=xC;const SC=t=>e=>{const n=We(t,e),{encode:r,decode:s}=Hf(n),i=n;return i.decode=(o,a)=>{const l=s(o,a);return wC(Buffer.from(l))},i.encode=(o,a,l)=>{const c=_C(o,t);return r(c,a,l)},i},w1=SC(8),EC=t=>{const e=Ae(t),{encode:n,decode:r}=Hf(e),s=e;return s.decode=(i,o)=>!!r(i,o),s.encode=(i,o,a)=>{const l=Number(i);return n(l,o,a)},s},gg=t=>{const e=We(32,t),{encode:n,decode:r}=Hf(e),s=e;return s.decode=(i,o)=>{const a=r(i,o);return new ae(a)},s.encode=(i,o,a)=>{const l=i.toBuffer();return n(l,o,a)},s};class kC extends Error{constructor(e){super(e)}}class AC extends kC{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}var mh;(function(t){t[t.InitializeMint=0]="InitializeMint",t[t.InitializeAccount=1]="InitializeAccount",t[t.InitializeMultisig=2]="InitializeMultisig",t[t.Transfer=3]="Transfer",t[t.Approve=4]="Approve",t[t.Revoke=5]="Revoke",t[t.SetAuthority=6]="SetAuthority",t[t.MintTo=7]="MintTo",t[t.Burn=8]="Burn",t[t.CloseAccount=9]="CloseAccount",t[t.FreezeAccount=10]="FreezeAccount",t[t.ThawAccount=11]="ThawAccount",t[t.TransferChecked=12]="TransferChecked",t[t.ApproveChecked=13]="ApproveChecked",t[t.MintToChecked=14]="MintToChecked",t[t.BurnChecked=15]="BurnChecked",t[t.InitializeAccount2=16]="InitializeAccount2",t[t.SyncNative=17]="SyncNative",t[t.InitializeAccount3=18]="InitializeAccount3",t[t.InitializeMultisig2=19]="InitializeMultisig2",t[t.InitializeMint2=20]="InitializeMint2",t[t.GetAccountDataSize=21]="GetAccountDataSize",t[t.InitializeImmutableOwner=22]="InitializeImmutableOwner",t[t.AmountToUiAmount=23]="AmountToUiAmount",t[t.UiAmountToAmount=24]="UiAmountToAmount",t[t.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",t[t.TransferFeeExtension=26]="TransferFeeExtension",t[t.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",t[t.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",t[t.Reallocate=29]="Reallocate",t[t.MemoTransferExtension=30]="MemoTransferExtension",t[t.CreateNativeMint=31]="CreateNativeMint",t[t.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",t[t.InterestBearingMintExtension=33]="InterestBearingMintExtension",t[t.CpiGuardExtension=34]="CpiGuardExtension",t[t.InitializePermanentDelegate=35]="InitializePermanentDelegate",t[t.TransferHookExtension=36]="TransferHookExtension",t[t.MetadataPointerExtension=39]="MetadataPointerExtension",t[t.GroupPointerExtension=40]="GroupPointerExtension",t[t.GroupMemberPointerExtension=41]="GroupMemberPointerExtension",t[t.ScaledUiAmountExtension=43]="ScaledUiAmountExtension",t[t.PausableExtension=44]="PausableExtension"})(mh||(mh={}));function RC(t,e,n){if(n.length){t.push({pubkey:e,isSigner:!1,isWritable:!1});for(const r of n)t.push({pubkey:r instanceof ae?r:r.publicKey,isSigner:!0,isWritable:!1})}else t.push({pubkey:e,isSigner:!0,isWritable:!1});return t}const CC=le([he("mintAuthorityOption"),gg("mintAuthority"),w1("supply"),Ae("decimals"),EC("isInitialized"),he("freezeAuthorityOption"),gg("freezeAuthority")]);CC.span;async function ci(t,e,n=!1,r=tc,s=mC){if(!n&&!ae.isOnCurve(e.toBuffer()))throw new AC;const[i]=await ae.findProgramAddress([e.toBuffer(),r.toBuffer(),t.toBuffer()],s);return i}const mg=le([Ae("instruction"),w1("amount")]);function yg(t,e,n,r,s=[],i=tc){const o=RC([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0}],n,s),a=Buffer.alloc(mg.span);return mg.encode({instruction:mh.Transfer,amount:BigInt(r)},a),new Pn({keys:o,programId:i,data:a})}const v1=G.createContext(void 0),IC="https://api.mainnet-beta.solana.com",Xu=new ae("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),Qu=new ae("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),TC=({children:t})=>{const[e,n]=G.useState(!1),[r,s]=G.useState(!1),[i,o]=G.useState(null),[a,l]=G.useState({sol:0,usdc:0,usdt:0}),[c,f]=G.useState(null),[v,w]=G.useState(null);G.useEffect(()=>{const x=window.solana;x!=null&&x.isPhantom&&(f(x),w(new gC(IC,"confirmed")),x.on("connect",O=>{o(O.toString()),n(!0)}),x.on("disconnect",()=>{o(null),n(!1),l({sol:0,usdc:0,usdt:0})}),x.publicKey&&(o(x.publicKey.toString()),n(!0)))},[]),G.useEffect(()=>{e&&i&&v&&g()},[e,i,v]);const g=async()=>{var x,O;if(!(!v||!i))try{const L=new ae(i),W=await v.getBalance(L)/pg;let q=0,F=0;try{const K=await ci(Xu,L),Y=await v.getTokenAccountBalance(K);q=parseFloat(((x=Y.value.uiAmount)==null?void 0:x.toString())||"0")}catch{}try{const K=await ci(Qu,L),Y=await v.getTokenAccountBalance(K);F=parseFloat(((O=Y.value.uiAmount)==null?void 0:O.toString())||"0")}catch{}l({sol:W,usdc:q,usdt:F})}catch{}},_=async()=>{if(!c){window.open("https://phantom.app/","_blank");return}try{s(!0);const x=await c.connect();o(x.publicKey.toString()),n(!0)}catch(x){throw x}finally{s(!1)}},E=async()=>{if(c)try{await c.disconnect(),o(null),n(!1),l({sol:0,usdc:0,usdt:0})}catch(x){throw x}},C=async(x,O)=>{if(!c||!v||!i)throw new Error("Wallet not connected");try{const L=new ae(i),D=new ae(x),W=new $n().add(ta.transfer({fromPubkey:L,toPubkey:D,lamports:O*pg})),{blockhash:q}=await v.getLatestBlockhash();W.recentBlockhash=q,W.feePayer=L;const{signature:F}=await c.signAndSendTransaction(W);return await v.confirmTransaction(F),await g(),F}catch(L){throw L}},b=async(x,O)=>{if(!c||!v||!i)throw new Error("Wallet not connected");try{const L=new ae(i),D=new ae(x),W=await ci(Xu,L),q=await ci(Xu,D),F=new $n().add(yg(W,q,L,O*1e6,[],tc)),{blockhash:K}=await v.getLatestBlockhash();F.recentBlockhash=K,F.feePayer=L;const{signature:Y}=await c.signAndSendTransaction(F);return await v.confirmTransaction(Y),await g(),Y}catch(L){throw L}},S=async(x,O)=>{if(!c||!v||!i)throw new Error("Wallet not connected");try{const L=new ae(i),D=new ae(x),W=await ci(Qu,L),q=await ci(Qu,D),F=new $n().add(yg(W,q,L,O*1e6,[],tc)),{blockhash:K}=await v.getLatestBlockhash();F.recentBlockhash=K,F.feePayer=L;const{signature:Y}=await c.signAndSendTransaction(F);return await v.confirmTransaction(Y),await g(),Y}catch(L){throw L}};return p.jsx(v1.Provider,{value:{connected:e,connecting:r,publicKey:i,balances:a,connect:_,disconnect:E,sendSOL:C,sendUSDC:b,sendUSDT:S,refreshBalances:g},children:t})},b1=()=>{const t=G.useContext(v1);if(t===void 0)throw new Error("usePhantomWallet must be used within a PhantomWalletProvider");return t};function BC({userId:t}){const{t:e}=Kn(),{connected:n,connecting:r,publicKey:s,balances:i,connect:o,disconnect:a}=b1(),[l,c]=G.useState([]),[f,v]=G.useState(!1),[w,g]=G.useState(""),[_,E]=G.useState("MetaMask"),[C,b]=G.useState(!1);G.useEffect(()=>{t&&L()},[t]),G.useEffect(()=>{n&&s&&S()},[n,s]);const S=async()=>{if(!s)return;const{data:q}=await Be.from("crypto_wallets").select("*").eq("user_id",t).eq("wallet_address",s).maybeSingle();q||(await Be.from("crypto_wallets").insert({user_id:t,wallet_address:s,wallet_type:"Phantom",is_verified:!0}),L())},x=async()=>{try{await o()}catch{}},O=async()=>{try{await a(),L()}catch{}},L=async()=>{const{data:q}=await Be.from("crypto_wallets").select("*").eq("user_id",t);q&&c(q)},D=async q=>{q.preventDefault(),b(!0);const{error:F}=await Be.from("crypto_wallets").insert({user_id:t,wallet_address:w,wallet_type:_,is_verified:!1});F||(g(""),v(!1),L()),b(!1)},W=async q=>{await Be.from("crypto_wallets").delete().eq("id",q),L()};return p.jsxs("div",{className:"wallet-connect",children:[p.jsxs("div",{className:"wallet-header",children:[p.jsx("h3",{children:e("wallet.title")}),p.jsx("button",{onClick:()=>v(!f),className:"add-wallet-btn",children:e(f?"wallet.cancel":"wallet.addWallet")})]}),p.jsxs("div",{className:"phantom-section",children:[p.jsx("h4",{children:"Phantom Wallet"}),n?p.jsxs("div",{className:"phantom-connected",children:[p.jsxs("div",{className:"phantom-info",children:[p.jsx("div",{className:"phantom-badge",children:"Connected"}),p.jsxs("div",{className:"phantom-address",children:[s==null?void 0:s.slice(0,4),"...",s==null?void 0:s.slice(-4)]})]}),p.jsxs("div",{className:"phantom-balances",children:[p.jsxs("div",{className:"balance-item",children:[p.jsx("span",{className:"balance-label",children:"SOL"}),p.jsx("span",{className:"balance-value",children:i.sol.toFixed(4)})]}),p.jsxs("div",{className:"balance-item",children:[p.jsx("span",{className:"balance-label",children:"USDC"}),p.jsx("span",{className:"balance-value",children:i.usdc.toFixed(2)})]}),p.jsxs("div",{className:"balance-item",children:[p.jsx("span",{className:"balance-label",children:"USDT"}),p.jsx("span",{className:"balance-value",children:i.usdt.toFixed(2)})]})]}),p.jsx("button",{onClick:O,className:"phantom-disconnect-btn",children:"Disconnect"})]}):p.jsx("button",{onClick:x,disabled:r,className:"phantom-connect-btn",children:r?"Connecting...":"Connect Phantom"})]}),f&&p.jsxs("form",{onSubmit:D,className:"add-wallet-form",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:e("wallet.type")}),p.jsxs("select",{value:_,onChange:q=>E(q.target.value),className:"form-select",children:[p.jsx("option",{value:"MetaMask",children:"MetaMask"}),p.jsx("option",{value:"Coinbase",children:"Coinbase Wallet"}),p.jsx("option",{value:"Trust Wallet",children:"Trust Wallet"}),p.jsx("option",{value:"Ledger",children:"Ledger"}),p.jsx("option",{value:"Phantom",children:"Phantom"}),p.jsx("option",{value:"Other",children:"Other"})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:e("wallet.address")}),p.jsx("input",{type:"text",value:w,onChange:q=>g(q.target.value),placeholder:"0x...",className:"form-input",required:!0})]}),p.jsx("button",{type:"submit",disabled:C,className:"submit-btn",children:e(C?"wallet.adding":"wallet.connect")})]}),p.jsx("div",{className:"wallets-list",children:l.length===0?p.jsx("div",{className:"empty-state",children:p.jsx("p",{children:e("wallet.noWallets")})}):l.map(q=>p.jsxs("div",{className:"wallet-item",children:[p.jsx("div",{className:"wallet-icon",children:p.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:p.jsx("path",{d:"M21 18V19C21 20.1 20.1 21 19 21H5C3.9 21 3 20.1 3 19V5C3 3.9 3.9 3 5 3H19C20.1 3 21 3.9 21 5V6H12C10.9 6 10 6.9 10 8V16C10 17.1 10.9 18 12 18H21ZM12 16H22V8H12V16ZM16 13.5C15.17 13.5 14.5 12.83 14.5 12C14.5 11.17 15.17 10.5 16 10.5C16.83 10.5 17.5 11.17 17.5 12C17.5 12.83 16.83 13.5 16 13.5Z",fill:"currentColor"})})}),p.jsxs("div",{className:"wallet-details",children:[p.jsx("span",{className:"wallet-type",children:q.wallet_type}),p.jsxs("span",{className:"wallet-address",children:[q.wallet_address.slice(0,6),"...",q.wallet_address.slice(-4)]})]}),p.jsx("button",{onClick:()=>W(q.id),className:"remove-btn",children:e("common.remove")})]},q.id))})]})}function jC({userId:t}){const{t:e}=Kn(),[n,r]=G.useState([]),[s,i]=G.useState(!1),[o,a]=G.useState(""),[l,c]=G.useState(""),[f,v]=G.useState("checking"),[w,g]=G.useState(!1);G.useEffect(()=>{t&&_()},[t]);const _=async()=>{const{data:b}=await Be.from("bank_accounts").select("*").eq("user_id",t);b&&r(b)},E=async b=>{b.preventDefault(),g(!0);const S=l.slice(-4),{error:x}=await Be.from("bank_accounts").insert({user_id:t,bank_name:o,account_number_last4:S,account_type:f,is_verified:!1});x||(a(""),c(""),i(!1),_()),g(!1)},C=async b=>{await Be.from("bank_accounts").delete().eq("id",b),_()};return p.jsxs("div",{className:"bank-connect",children:[p.jsxs("div",{className:"bank-header",children:[p.jsx("h3",{children:e("bank.title")}),p.jsx("button",{onClick:()=>i(!s),className:"add-bank-btn",children:e(s?"wallet.cancel":"bank.addBank")})]}),s&&p.jsxs("form",{onSubmit:E,className:"add-bank-form",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:e("bank.name")}),p.jsx("input",{type:"text",value:o,onChange:b=>a(b.target.value),placeholder:e("bank.namePlaceholder"),className:"form-input",required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:e("bank.accountType")}),p.jsxs("select",{value:f,onChange:b=>v(b.target.value),className:"form-select",children:[p.jsx("option",{value:"checking",children:e("bank.checking")}),p.jsx("option",{value:"savings",children:e("bank.savings")})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:e("bank.accountNumber")}),p.jsx("input",{type:"password",value:l,onChange:b=>c(b.target.value),placeholder:e("bank.accountPlaceholder"),className:"form-input",required:!0,minLength:8}),p.jsx("span",{className:"form-hint",children:e("bank.securityNote")})]}),p.jsx("button",{type:"submit",disabled:w,className:"submit-btn",children:e(w?"bank.adding":"bank.connect")})]}),p.jsx("div",{className:"accounts-list",children:n.length===0?p.jsx("div",{className:"empty-state",children:p.jsx("p",{children:e("bank.noAccounts")})}):n.map(b=>p.jsxs("div",{className:"account-item",children:[p.jsx("div",{className:"account-icon",children:p.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:p.jsx("path",{d:"M12 2L2 7V10H22V7L12 2ZM4 12V17H6V12H4ZM9 12V17H11V12H9ZM13 12V17H15V12H13ZM18 12V17H20V12H18ZM2 19V21H22V19H2Z",fill:"currentColor"})})}),p.jsxs("div",{className:"account-details",children:[p.jsx("span",{className:"account-bank",children:b.bank_name}),p.jsxs("span",{className:"account-info",children:[b.account_type,"  ",b.account_number_last4]})]}),p.jsx("button",{onClick:()=>C(b.id),className:"remove-btn",children:e("common.remove")})]},b.id))})]})}function NC(){const{t}=Kn(),{connected:e,publicKey:n,sendSOL:r,sendUSDC:s,sendUSDT:i,balances:o}=b1(),[a,l]=G.useState("crypto"),[c,f]=G.useState(""),[v,w]=G.useState(""),[g,_]=G.useState(""),[E,C]=G.useState("SOL"),[b,S]=G.useState([]),[x,O]=G.useState([]),[L,D]=G.useState(!1),[W,q]=G.useState(!1),[F,K]=G.useState(null),[Y,te]=G.useState(!1),[T]=G.useState("0.000005");G.useEffect(()=>{u()},[]);const u=async()=>{const{data:{user:N}}=await Be.auth.getUser();if(!N)return;const{data:R}=await Be.from("crypto_wallets").select("*").eq("user_id",N.id),{data:h}=await Be.from("bank_accounts").select("*").eq("user_id",N.id);R&&S(R),h&&O(h)},m=N=>a==="crypto"?N.length>=32&&N.length<=44:N.includes("@"),k=()=>{if(a==="crypto"&&e){if(E==="SOL")return o.sol;if(E==="USDC")return o.usdc;if(E==="USDT")return o.usdt}return 0},B=()=>{const N=k();E==="SOL"&&N>.001?_((N-.001).toFixed(4)):_(N.toFixed(2))},I=N=>{if(N.preventDefault(),K(null),!m(v)){K(a==="crypto"?"Invalid wallet address":"Invalid email address");return}const R=parseFloat(g),h=k();if(a==="crypto"&&R>h){K(`Insufficient balance. Available: ${h.toFixed(4)} ${E}`);return}if(R<=0){K("Amount must be greater than zero");return}te(!0)},P=async()=>{D(!0),K(null),q(!1),te(!1);const{data:{user:N}}=await Be.auth.getUser();if(!N){D(!1);return}try{let R=null;a==="crypto"&&e&&n&&(E==="SOL"?R=await r(v,parseFloat(g)):E==="USDC"?R=await s(v,parseFloat(g)):E==="USDT"&&(R=await i(v,parseFloat(g))));const{error:h}=await Be.from("transactions").insert({user_id:N.id,type:"send",amount:parseFloat(g),currency:E,recipient_email:a==="fiat"?v:null,recipient_wallet:a==="crypto"?v:null,status:R?"completed":"pending",transaction_hash:R});h?K("Failed to record transaction"):(q(!0),_(""),w(""),f(""),setTimeout(()=>q(!1),5e3))}catch(R){K(R instanceof Error?R.message:"Transfer failed")}D(!1)};return p.jsxs("div",{className:"transfer",children:[p.jsxs("div",{className:"transfer-tabs",children:[p.jsx("button",{className:`tab ${a==="crypto"?"active":""}`,onClick:()=>l("crypto"),children:t("transfer.cryptoTransfer")}),p.jsx("button",{className:`tab ${a==="fiat"?"active":""}`,onClick:()=>l("fiat"),children:t("transfer.bankTransfer")})]}),p.jsxs("form",{onSubmit:I,className:"transfer-form",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:t("transfer.from")}),p.jsxs("select",{value:c,onChange:N=>f(N.target.value),className:"form-select",required:!0,children:[p.jsx("option",{value:"",children:t("transfer.selectSource")}),a==="crypto"?b.map(N=>p.jsxs("option",{value:N.id,children:[N.wallet_type," - ",N.wallet_address.slice(0,6),"...",N.wallet_address.slice(-4)]},N.id)):x.map(N=>p.jsxs("option",{value:N.id,children:[N.bank_name," - ",N.account_type,"  ",N.account_number_last4]},N.id))]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:t(a==="crypto"?"transfer.to":"transfer.toAccount")}),p.jsx("input",{type:"text",value:v,onChange:N=>w(N.target.value),placeholder:a==="crypto"?"0x...":t("transfer.toPlaceholder"),className:"form-input",required:!0})]}),p.jsxs("div",{className:"form-row",children:[p.jsxs("div",{className:"form-group",children:[p.jsxs("label",{children:[t("transfer.amount"),a==="crypto"&&e&&p.jsxs("span",{className:"balance-info",children:["Available: ",k().toFixed(4)," ",E]})]}),p.jsxs("div",{className:"amount-input-wrapper",children:[p.jsx("input",{type:"number",value:g,onChange:N=>_(N.target.value),placeholder:"0.00",className:"form-input",step:"0.01",min:"0.01",required:!0}),a==="crypto"&&e&&p.jsx("button",{type:"button",onClick:B,className:"max-btn",children:"MAX"})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:t("transfer.currency")}),p.jsx("select",{value:E,onChange:N=>C(N.target.value),className:"form-select",children:a==="crypto"?p.jsxs(p.Fragment,{children:[p.jsx("option",{value:"SOL",children:"SOL"}),p.jsx("option",{value:"USDC",children:"USDC"}),p.jsx("option",{value:"USDT",children:"USDT"})]}):p.jsxs(p.Fragment,{children:[p.jsx("option",{value:"USD",children:"USD"}),p.jsx("option",{value:"EUR",children:"EUR"}),p.jsx("option",{value:"THB",children:"THB"})]})})]})]}),W&&p.jsx("div",{className:"success-message",children:t("transfer.success")}),F&&p.jsx("div",{className:"error-message",children:F}),a==="crypto"&&["SOL","USDC","USDT"].includes(E)&&!e&&p.jsxs("div",{className:"warning-message",children:["Please connect your Phantom wallet to send ",E]}),p.jsx("button",{type:"submit",disabled:L||a==="crypto"&&!e,className:"transfer-btn",children:t(L?"transfer.processing":"transfer.send")})]}),Y&&p.jsx("div",{className:"confirmation-modal",children:p.jsxs("div",{className:"confirmation-content",children:[p.jsx("h3",{children:"Confirm Transfer"}),p.jsxs("div",{className:"confirmation-details",children:[p.jsxs("div",{className:"detail-item",children:[p.jsx("span",{className:"detail-label",children:"Amount:"}),p.jsxs("span",{className:"detail-value",children:[g," ",E]})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("span",{className:"detail-label",children:"To:"}),p.jsxs("span",{className:"detail-value",children:[v.slice(0,8),"...",v.slice(-8)]})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("span",{className:"detail-label",children:"Network Fee:"}),p.jsxs("span",{className:"detail-value",children:[T," SOL"]})]}),p.jsxs("div",{className:"detail-item total",children:[p.jsx("span",{className:"detail-label",children:"Total:"}),p.jsxs("span",{className:"detail-value",children:[(parseFloat(g)+parseFloat(T)).toFixed(6)," ",E]})]})]}),p.jsxs("div",{className:"confirmation-actions",children:[p.jsx("button",{onClick:()=>te(!1),className:"cancel-btn",disabled:L,children:"Cancel"}),p.jsx("button",{onClick:P,className:"confirm-btn",disabled:L,children:L?"Processing...":"Confirm"})]})]})}),p.jsxs("div",{className:"transfer-info",children:[p.jsxs("div",{className:"info-item",children:[p.jsx("span",{className:"info-label",children:t("transfer.networkFee")}),p.jsx("span",{className:"info-value",children:a==="crypto"?`~${T} SOL`:"$0.00"})]}),p.jsxs("div",{className:"info-item",children:[p.jsx("span",{className:"info-label",children:t("transfer.estimatedTime")}),p.jsx("span",{className:"info-value",children:a==="crypto"?"10-30 sec":"1-3 days"})]}),a==="crypto"&&e&&p.jsxs("div",{className:"info-item",children:[p.jsx("span",{className:"info-label",children:"Your Balance:"}),p.jsxs("span",{className:"info-value",children:[k().toFixed(4)," ",E]})]})]})]})}function PC({userId:t}){const{t:e}=Kn(),[n,r]=G.useState([]),[s,i]=G.useState(!0),[o,a]=G.useState("all"),[l,c]=G.useState(""),[f,v]=G.useState(null),[w,g]=G.useState(!1);G.useEffect(()=>{_()},[t]);const _=async()=>{i(!0);const{data:O,error:L}=await Be.from("transactions").select("*").eq("user_id",t).order("created_at",{ascending:!1});!L&&O&&r(O),i(!1)},E=n.filter(O=>{var W,q,F;const L=o==="all"?!0:O.type===o,D=l===""||O.currency.toLowerCase().includes(l.toLowerCase())||((W=O.recipient_email)==null?void 0:W.toLowerCase().includes(l.toLowerCase()))||((q=O.recipient_wallet)==null?void 0:q.toLowerCase().includes(l.toLowerCase()))||((F=O.transaction_hash)==null?void 0:F.toLowerCase().includes(l.toLowerCase()));return L&&D}),C=O=>{v(O),g(!0)},b=O=>{navigator.clipboard.writeText(O)},S=O=>new Date(O).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),x=O=>{switch(O){case"completed":return"#1ed760";case"pending":return"#ffa500";case"failed":return"#ff4444";default:return"#888888"}};return p.jsxs("div",{className:"transactions-page",children:[p.jsxs("div",{className:"transactions-header",children:[p.jsx("h1",{children:e("dashboard.transactions")}),p.jsxs("div",{className:"transactions-controls",children:[p.jsxs("div",{className:"search-box",children:[p.jsxs("svg",{className:"search-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[p.jsx("circle",{cx:"11",cy:"11",r:"8"}),p.jsx("path",{d:"m21 21-4.35-4.35"})]}),p.jsx("input",{type:"text",placeholder:"Search transactions...",value:l,onChange:O=>c(O.target.value),className:"search-input"})]}),p.jsxs("div",{className:"transaction-filters",children:[p.jsx("button",{className:`filter-btn ${o==="all"?"active":""}`,onClick:()=>a("all"),children:"All"}),p.jsx("button",{className:`filter-btn ${o==="send"?"active":""}`,onClick:()=>a("send"),children:"Sent"}),p.jsx("button",{className:`filter-btn ${o==="receive"?"active":""}`,onClick:()=>a("receive"),children:"Received"})]})]})]}),s?p.jsx("div",{className:"transactions-loading",children:"Loading transactions..."}):E.length===0?p.jsx("div",{className:"transactions-empty glass-card",children:p.jsxs("div",{className:"empty-state-content",children:[p.jsxs("h3",{children:["No ",o==="all"?"":o==="send"?"sent":"received"," transactions yet"]}),p.jsx("p",{children:"Your transaction history will appear here"})]})}):p.jsx("div",{className:"transactions-list",children:E.map(O=>p.jsxs("div",{className:"transaction-item glass-card",onClick:()=>C(O),children:[p.jsx("div",{className:"transaction-icon",children:O.type==="send"?"":""}),p.jsxs("div",{className:"transaction-details",children:[p.jsxs("div",{className:"transaction-main",children:[p.jsx("span",{className:"transaction-type",children:O.type==="send"?"Sent to":"Received from"}),p.jsx("span",{className:"transaction-recipient",children:O.recipient_email||(O.recipient_wallet?`${O.recipient_wallet.slice(0,8)}...${O.recipient_wallet.slice(-6)}`:"Unknown")})]}),p.jsx("div",{className:"transaction-date",children:S(O.created_at)})]}),p.jsxs("div",{className:"transaction-amount-wrapper",children:[p.jsxs("div",{className:`transaction-amount ${O.type}`,children:[O.type==="send"?"-":"+",O.amount.toFixed(4)," ",O.currency]}),p.jsx("div",{className:"transaction-status",style:{color:x(O.status)},children:O.status})]})]},O.id))}),w&&f&&p.jsx("div",{className:"transaction-detail-modal",onClick:()=>g(!1),children:p.jsxs("div",{className:"transaction-detail-content",onClick:O=>O.stopPropagation(),children:[p.jsx("button",{className:"close-btn",onClick:()=>g(!1),children:""}),p.jsx("h3",{children:"Transaction Details"}),p.jsxs("div",{className:"detail-section",children:[p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Type:"}),p.jsx("span",{className:"detail-value",children:f.type==="send"?"Sent":"Received"})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Amount:"}),p.jsxs("span",{className:`detail-value amount-${f.type}`,children:[f.type==="send"?"-":"+",f.amount.toFixed(4)," ",f.currency]})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Status:"}),p.jsx("span",{className:"detail-value",style:{color:x(f.status)},children:f.status})]}),p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Date:"}),p.jsx("span",{className:"detail-value",children:S(f.created_at)})]}),f.recipient_email&&p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Email:"}),p.jsx("span",{className:"detail-value",children:f.recipient_email})]}),f.recipient_wallet&&p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Wallet:"}),p.jsxs("div",{className:"copyable-value",children:[p.jsx("span",{className:"detail-value wallet-address",children:f.recipient_wallet}),p.jsx("button",{className:"copy-btn",onClick:()=>b(f.recipient_wallet),children:"Copy"})]})]}),f.transaction_hash&&p.jsxs("div",{className:"detail-row",children:[p.jsx("span",{className:"detail-label",children:"Transaction Hash:"}),p.jsxs("div",{className:"copyable-value",children:[p.jsxs("span",{className:"detail-value hash",children:[f.transaction_hash.slice(0,16),"..."]}),p.jsx("button",{className:"copy-btn",onClick:()=>b(f.transaction_hash),children:"Copy"})]})]})]})]})})]})}function OC({userId:t}){const{t:e}=Kn(),[n,r]=G.useState(null),[s,i]=G.useState(""),[o,a]=G.useState(""),[l,c]=G.useState(!1),[f,v]=G.useState(!1),[w,g]=G.useState(null),[_,E]=G.useState(!1),[C,b]=G.useState(!1);G.useEffect(()=>{S()},[t]);const S=async()=>{const{data:{user:D}}=await Be.auth.getUser();if(D){a(D.email||"");const{data:W}=await Be.from("user_profiles").select("*").eq("id",t).maybeSingle();W&&(r(W),i(W.full_name||""))}},x=async()=>{v(!0),g(null);const{error:D}=await Be.from("user_profiles").update({full_name:s,updated_at:new Date().toISOString()}).eq("id",t);D?g({type:"error",text:"Failed to update profile"}):(g({type:"success",text:"Profile updated successfully"}),c(!1),S()),v(!1)},O=async()=>{g(null);const{error:D}=await Be.auth.resetPasswordForEmail(o,{redirectTo:`${window.location.origin}/reset-password`});g(D?{type:"error",text:"Failed to send password reset email"}:{type:"success",text:"Password reset email sent to your inbox"})},L=async()=>{b(!0),g(null);const{error:D}=await Be.rpc("delete_user");D?(g({type:"error",text:"Failed to delete account. Please contact support."}),b(!1),E(!1)):(await Be.auth.signOut(),window.location.href="/")};return p.jsxs("div",{className:"settings-page",children:[p.jsx("div",{className:"settings-header",children:p.jsx("h1",{children:e("dashboard.settings")})}),p.jsxs("div",{className:"settings-sections",children:[p.jsxs("div",{className:"settings-section glass-card",children:[p.jsxs("div",{className:"section-header",children:[p.jsx("h2",{children:"Profile Information"}),l?p.jsxs("div",{className:"edit-actions",children:[p.jsx("button",{className:"cancel-btn",onClick:()=>{c(!1),i((n==null?void 0:n.full_name)||"")},children:"Cancel"}),p.jsx("button",{className:"save-btn",onClick:x,disabled:f,children:f?"Saving...":"Save"})]}):p.jsx("button",{className:"edit-btn",onClick:()=>c(!0),children:"Edit"})]}),w&&p.jsx("div",{className:`settings-message ${w.type}`,children:w.text}),p.jsxs("div",{className:"settings-form",children:[p.jsxs("div",{className:"form-field",children:[p.jsx("label",{children:"Email"}),p.jsx("input",{type:"email",value:o,disabled:!0,className:"disabled-input"}),p.jsx("span",{className:"field-help",children:"Email cannot be changed"})]}),p.jsxs("div",{className:"form-field",children:[p.jsx("label",{children:"Full Name"}),p.jsx("input",{type:"text",value:s,onChange:D=>i(D.target.value),disabled:!l,placeholder:"Enter your full name"})]})]})]}),p.jsxs("div",{className:"settings-section glass-card",children:[p.jsx("div",{className:"section-header",children:p.jsx("h2",{children:"Security"})}),p.jsx("div",{className:"settings-form",children:p.jsxs("div",{className:"form-field",children:[p.jsx("label",{children:"Password"}),p.jsxs("div",{className:"password-field",children:[p.jsx("input",{type:"password",value:"",disabled:!0,className:"disabled-input"}),p.jsx("button",{className:"change-password-btn",onClick:O,children:"Change Password"})]}),p.jsx("span",{className:"field-help",children:"We'll send you an email with a reset link"})]})})]}),p.jsxs("div",{className:"settings-section glass-card",children:[p.jsx("div",{className:"section-header",children:p.jsx("h2",{children:"Account"})}),p.jsxs("div",{className:"settings-form",children:[p.jsxs("div",{className:"form-field",children:[p.jsx("label",{children:"User ID"}),p.jsx("input",{type:"text",value:t,disabled:!0,className:"disabled-input"})]}),p.jsxs("div",{className:"form-field",children:[p.jsx("label",{children:"Member Since"}),p.jsx("input",{type:"text",value:n!=null&&n.created_at?new Date(n.created_at).toLocaleDateString():"N/A",disabled:!0,className:"disabled-input"})]})]})]}),p.jsxs("div",{className:"settings-section danger-section glass-card",children:[p.jsx("div",{className:"section-header",children:p.jsx("h2",{children:"Danger Zone"})}),p.jsx("div",{className:"danger-actions",children:p.jsxs("div",{className:"danger-action",children:[p.jsxs("div",{children:[p.jsx("h3",{children:"Delete Account"}),p.jsx("p",{children:"Permanently delete your account and all associated data"})]}),_?p.jsxs("div",{className:"delete-confirm",children:[p.jsx("p",{className:"confirm-text",children:"Are you sure? This cannot be undone."}),p.jsxs("div",{className:"confirm-actions",children:[p.jsx("button",{className:"cancel-delete-btn",onClick:()=>E(!1),disabled:C,children:"Cancel"}),p.jsx("button",{className:"confirm-delete-btn",onClick:L,disabled:C,children:C?"Deleting...":"Yes, Delete My Account"})]})]}):p.jsx("button",{className:"danger-btn",onClick:()=>E(!0),children:"Delete Account"})]})})]})]})]})}function MC({onLogout:t}){const{t:e,setLanguage:n}=Kn(),[r,s]=G.useState(null),[i,o]=G.useState(!1),[a,l]=G.useState("dashboard"),c=[{code:"en",name:"English",flag:""},{code:"fr",name:"Franais",flag:""},{code:"th",name:"",flag:""}];G.useEffect(()=>{f()},[]);const f=async()=>{const{data:{user:w}}=await Be.auth.getUser();if(w){s(w);const{data:g}=await Be.from("user_profiles").select("*").eq("id",w.id).maybeSingle();g||(await Be.from("user_profiles").insert({id:w.id,email:w.email||"",full_name:""}),f())}},v=async()=>{await Be.auth.signOut(),t()};return p.jsxs("div",{className:"dashboard",children:[p.jsxs("header",{className:"dashboard-header",children:[p.jsx("div",{className:"dashboard-logo",children:p.jsx("h1",{children:"Coinvoy"})}),p.jsxs("div",{className:"dashboard-user",children:[p.jsx("span",{className:"user-email",children:r==null?void 0:r.email}),p.jsxs("div",{className:"dashboard-lang-dropdown",onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[p.jsx("button",{className:"lang-btn",children:p.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("circle",{cx:"12",cy:"12",r:"10"}),p.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),p.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]})}),i&&p.jsx("div",{className:"lang-dropdown-menu",children:c.map(w=>p.jsxs("button",{className:"lang-dropdown-item",onClick:()=>n(w.code),children:[p.jsx("span",{className:"lang-flag",children:w.flag}),w.name]},w.code))})]}),p.jsx("button",{onClick:v,className:"logout-btn",children:e("nav.signOut")})]})]}),p.jsxs("div",{className:"dashboard-container",children:[p.jsx("div",{className:"dashboard-sidebar",children:p.jsxs("nav",{className:"dashboard-nav",children:[p.jsx("button",{className:`nav-item ${a==="dashboard"?"active":""}`,onClick:()=>l("dashboard"),children:e("dashboard.title")}),p.jsx("button",{className:`nav-item ${a==="transactions"?"active":""}`,onClick:()=>l("transactions"),children:e("dashboard.transactions")}),p.jsx("button",{className:`nav-item ${a==="settings"?"active":""}`,onClick:()=>l("settings"),children:e("dashboard.settings")})]})}),p.jsxs("main",{className:"dashboard-main",children:[a==="dashboard"&&p.jsxs("div",{className:"dashboard-grid",children:[p.jsxs("div",{className:"dashboard-section rates-section",children:[p.jsx("h2",{children:e("dashboard.liveRates")}),p.jsx(CE,{})]}),p.jsxs("div",{className:"dashboard-section accounts-section",children:[p.jsx("h2",{children:e("dashboard.connectedAccounts")}),p.jsxs("div",{className:"accounts-grid",children:[p.jsx(BC,{userId:r==null?void 0:r.id}),p.jsx(jC,{userId:r==null?void 0:r.id})]})]}),p.jsxs("div",{className:"dashboard-section transfer-section",children:[p.jsx("h2",{children:e("dashboard.sendMoney")}),p.jsx(NC,{})]})]}),a==="transactions"&&(r==null?void 0:r.id)&&p.jsx(PC,{userId:r.id}),a==="settings"&&(r==null?void 0:r.id)&&p.jsx(OC,{userId:r.id})]})]})]})}function LC(){const t=G.useRef(null),e=G.useRef(null),[n,r]=G.useState(!1),[s,i]=G.useState(!1),o=G.useRef({x:0,y:0}),a=G.useRef({x:0,y:0}),l=G.useRef({x:0,y:0});return G.useEffect(()=>{const c=t.current,f=e.current;if(!c||!f)return;const v=(b,S,x)=>b+(S-b)*x,w=b=>{o.current={x:b.clientX,y:b.clientY};const x=b.target.closest("button, a, .country-path, .feature-card, .nav-link-button, .dropdown-item, input, textarea");if(r(!!x),x&&x.classList.contains("magnetic")){const O=x.getBoundingClientRect(),L=O.left+O.width/2,D=O.top+O.height/2,W=b.clientX-L,q=b.clientY-D;if(Math.sqrt(W*W+q*q)<100){const te=W*.3,T=q*.3;x.style.transform=`translate(${te}px, ${T}px)`}}},g=()=>{document.querySelectorAll(".magnetic").forEach(b=>{b.style.transform="translate(0, 0)"})},_=()=>{i(!0)},E=()=>{i(!1)},C=()=>{a.current.x=v(a.current.x,o.current.x,.15),a.current.y=v(a.current.y,o.current.y,.15),l.current.x=o.current.x-a.current.x,l.current.y=o.current.y-a.current.y;const S=Math.sqrt(l.current.x*l.current.x+l.current.y*l.current.y),x=Math.min(1+S*.02,1.5);c.style.transform=`translate(${a.current.x}px, ${a.current.y}px) scale(${x})`,f.style.transform=`translate(${o.current.x}px, ${o.current.y}px)`,requestAnimationFrame(C)};return window.addEventListener("mousemove",w),window.addEventListener("mouseleave",g),window.addEventListener("mousedown",_),window.addEventListener("mouseup",E),requestAnimationFrame(C),()=>{window.removeEventListener("mousemove",w),window.removeEventListener("mouseleave",g),window.removeEventListener("mousedown",_),window.removeEventListener("mouseup",E)}},[]),p.jsxs(p.Fragment,{children:[p.jsx("div",{ref:t,className:`magnetic-cursor ${n?"hovering":""} ${s?"clicking":""}`}),p.jsx("div",{ref:e,className:`magnetic-cursor-dot ${n?"hovering":""} ${s?"clicking":""}`})]})}function UC(){const t=G.useRef(null),e=G.useRef({x:0,y:0}),n=G.useRef([]),r=G.useRef(),s=G.useRef(!1);return G.useEffect(()=>{const i=t.current;if(!i)return;const o=i.getContext("2d");if(!o)return;const a=()=>{i.width=window.innerWidth,i.height=window.innerHeight,l()},l=()=>{n.current=[],s.current=window.innerWidth<=768;const g=window.innerWidth>768&&window.innerWidth<=1024;let _=12e3;s.current?_=2e4:g&&(_=15e3);const E=Math.floor(i.width*i.height/_),C=s.current?50:g?100:200,b=Math.min(E,C);for(let S=0;S<b;S++){const x=Math.random()*i.width,O=Math.random()*i.height;n.current.push({x,y:O,baseX:x,baseY:O,vx:0,vy:0,size:Math.random()*2+.5,opacity:Math.random()*.5+.3,hue:Math.random()*60+200})}},c=g=>{e.current={x:g.clientX,y:g.clientY}},f=g=>{g.touches.length>0&&(e.current={x:g.touches[0].clientX,y:g.touches[0].clientY})},v=()=>{if(s.current)return;const g=n.current,_=120,E=window.innerWidth<=1024?3:5;for(let C=0;C<g.length;C++){let b=0;for(let S=C+1;S<g.length&&b<E;S++){const x=g[C].x-g[S].x,O=g[C].y-g[S].y,L=Math.sqrt(x*x+O*O);if(L<_){const D=(1-L/_)*.3;o.beginPath(),o.strokeStyle=`hsla(${g[C].hue}, 70%, 60%, ${D})`,o.lineWidth=.5,o.moveTo(g[C].x,g[C].y),o.lineTo(g[S].x,g[S].y),o.stroke(),b++}}}},w=()=>{o.fillStyle="rgba(0, 0, 0, 0.05)",o.fillRect(0,0,i.width,i.height);const g=e.current,_=n.current,E=s.current?150:200,C=s.current?.3:.5;_.forEach(b=>{const S=g.x-b.x,x=g.y-b.y,O=Math.sqrt(S*S+x*x);if(O<E){const F=(E-O)/E,K=Math.atan2(x,S);b.vx+=Math.cos(K)*F*C,b.vy+=Math.sin(K)*F*C}const L=b.baseX-b.x,D=b.baseY-b.y;b.vx+=L*.01,b.vy+=D*.01,b.vx*=.92,b.vy*=.92,b.x+=b.vx,b.y+=b.vy;const W=Math.sqrt(b.vx*b.vx+b.vy*b.vy),q=b.size+Math.min(W*.3,2);if(!s.current){const F=o.createRadialGradient(b.x,b.y,0,b.x,b.y,q*2);F.addColorStop(0,`hsla(${b.hue}, 80%, 70%, ${b.opacity})`),F.addColorStop(1,`hsla(${b.hue}, 80%, 50%, 0)`),o.beginPath(),o.fillStyle=F,o.arc(b.x,b.y,q*2,0,Math.PI*2),o.fill()}o.beginPath(),o.fillStyle=`hsla(${b.hue}, 90%, 80%, ${b.opacity*.8})`,o.arc(b.x,b.y,q,0,Math.PI*2),o.fill()}),v(),r.current=requestAnimationFrame(w)};return a(),window.addEventListener("resize",a),window.addEventListener("mousemove",c),window.addEventListener("touchmove",f,{passive:!0}),w(),()=>{window.removeEventListener("resize",a),window.removeEventListener("mousemove",c),window.removeEventListener("touchmove",f),r.current&&cancelAnimationFrame(r.current)}},[]),p.jsx("canvas",{ref:t,className:"interactive-background"})}function DC(){const[t,e]=G.useState("home"),[n,r]=G.useState(!1),[s,i]=G.useState(!0);return G.useEffect(()=>{(async()=>{const{data:{session:l}}=await Be.auth.getSession();l&&(r(!0),e("dashboard")),i(!1)})();const{data:{subscription:a}}=Be.auth.onAuthStateChange((l,c)=>{c?(r(!0),e("dashboard")):(r(!1),e("home"))});return()=>a.unsubscribe()},[]),s?p.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:"linear-gradient(135deg, #0f172a 0%, #1e293b 100%)"},children:p.jsx("div",{style:{color:"white"},children:"Loading..."})}):t==="dashboard"&&n?p.jsx(MC,{onLogout:()=>{r(!1),e("home")}}):t==="auth"?p.jsx(RE,{}):p.jsxs("div",{className:"app",children:[p.jsx(UC,{}),p.jsx(LC,{}),p.jsxs("div",{className:"content",children:[p.jsx(ex,{onNavigateToAuth:()=>e("auth")}),p.jsx(tx,{}),p.jsx(nx,{}),p.jsx(ix,{onNavigateToAuth:()=>e("auth")})]})]})}ed.createRoot(document.getElementById("root")).render(p.jsx(D1.StrictMode,{children:p.jsx(X_,{children:p.jsx(TC,{children:p.jsx(DC,{})})})}));
